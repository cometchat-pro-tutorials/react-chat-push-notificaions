{"ast":null,"code":"!function (t, e) {\n  if (\"object\" == typeof exports && \"object\" == typeof module) module.exports = e();else if (\"function\" == typeof define && define.amd) define([], e);else {\n    var n = e();\n\n    for (var s in n) (\"object\" == typeof exports ? exports : t)[s] = n[s];\n  }\n}(window, function () {\n  return function (n) {\n    var s = {};\n\n    function r(t) {\n      if (s[t]) return s[t].exports;\n      var e = s[t] = {\n        i: t,\n        l: !1,\n        exports: {}\n      };\n      return n[t].call(e.exports, e, e.exports, r), e.l = !0, e.exports;\n    }\n\n    return r.m = n, r.c = s, r.d = function (t, e, n) {\n      r.o(t, e) || Object.defineProperty(t, e, {\n        enumerable: !0,\n        get: n\n      });\n    }, r.r = function (t) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n    }, r.t = function (e, t) {\n      if (1 & t && (e = r(e)), 8 & t) return e;\n      if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n      var n = Object.create(null);\n      if (r.r(n), Object.defineProperty(n, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var s in e) r.d(n, s, function (t) {\n        return e[t];\n      }.bind(null, s));\n      return n;\n    }, r.n = function (t) {\n      var e = t && t.__esModule ? function () {\n        return t.default;\n      } : function () {\n        return t;\n      };\n      return r.d(e, \"a\", e), e;\n    }, r.o = function (t, e) {\n      return Object.prototype.hasOwnProperty.call(t, e);\n    }, r.p = \"\", r(r.s = 36);\n  }([function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n    var s,\n        r,\n        o,\n        i = n(3);\n    e.constants = {\n      DEFAULT_STORE: \"cometchat\",\n      MSG_VER_PRE: \"store-ver-pre\",\n      MSG_VER_POST: \"store-ver-post\"\n    }, e.DEFAULT_VALUES = {\n      MSGS_LIMIT: 30,\n      MSGS_MAX_LIMIT: 100,\n      CALL_TIMEOUT: 45,\n      DEFAULT_MSG_ID: 0,\n      DEFAULT_MAX_TYPING_INDICATOR_LIMIT: 5\n    }, (s = e.GroupType || (e.GroupType = {})).Public = \"public\", s.Private = \"private\", s.Protected = \"protected\", s.Password = \"password\", e.GROUP_TYPE = {\n      PUBLIC: \"public\",\n      PRIVATE: \"private\",\n      PROTECTED: \"password\",\n      PASSWORD: \"password\"\n    }, (r = e.GroupMemberScope || (e.GroupMemberScope = {})).Admin = \"admin\", r.Moderator = \"moderator\", r.Member = \"member\", e.GROUP_MEMBER_SCOPE = {\n      ADMIN: \"admin\",\n      MODERATOR: \"moderator\",\n      PARTICIPANT: \"participant\"\n    }, e.XMPP = {\n      host: \"shoemaker.cometchat.com\",\n      port: 7443,\n      bind_url: \"/ws/\",\n      deafult_password: \"CometChat\",\n      jid_string: \"[%s]%s@%s/%s\",\n      bare_jid_string: \"[%s]%s@%s\",\n      username_string: \"[%s]%s\",\n      muc_jid_string: \"[%s]%s@%s.%s\",\n      xmpp_resource: \"javascripts_\" + new Date().getTime(),\n      CONVERSATION: {\n        TYPE: {\n          CHAT: \"chat\",\n          GROUP_CHAT: \"groupchat\"\n        }\n      }\n    }, e.LOCAL_STORE = {\n      COMMON_STORE: \"common_store\",\n      MESSAGE_LISTENERS_LIST: \"message_listeners_list\",\n      USERS_STORE: \"users_store\",\n      MESSAGES_STORE: \"messages_store\",\n      STORE_STRING: \"%s:%s\"\n    }, e.ResponseConstants = {\n      RESPONSE_KEYS: {\n        KEY_DATA: \"data\",\n        KEY_META: \"meta\",\n        KEY_CURSOR: \"cursor\",\n        KEY_ACTION: \"action\",\n        KEY_MESSAGE: \"message\",\n        KEY_ERROR: \"error\",\n        KEY_ERROR_DETAILS: \"details\",\n        KEY_ERROR_CODE: \"code\",\n        KEY_ERROR_MESSAGE: \"message\",\n        KEY_AUTH_TOKEN: \"authToken\",\n        KEY_WS_CHANNEL: \"wsChannel\",\n        KEY_IDENTITY: \"identity\",\n        KEY_SERVICE: \"identity\",\n        KEY_ENTITIES: \"entities\",\n        KEY_ENTITITY: \"entity\",\n        KEY_ATTACHMENTS: \"attachments\",\n        CODE_REQUEST_OK: 200,\n        CODE_BAD_REQUEST: 401,\n        UNREAD_UNDELIVERED_KEYS: {\n          ENTITY: \"entity\",\n          ENTITY_TYPE: \"entityType\",\n          ENTITY_Id: \"entityId\",\n          COUNT: \"count\"\n        },\n        GROUP_MEMBERS_RESPONSE: {\n          SUCCESS: \"success\",\n          ERROR: \"error\",\n          MESSAGE: \"message\"\n        }\n      }\n    }, e.DELIVERY_RECEIPTS = {\n      RECEIVER_ID: \"receiverId\",\n      RECEIVER_TYPE: \"type\",\n      RECIPIENT: \"recipient\",\n      MESSAGE_ID: \"messageId\",\n      RECEIVED: \"delivered\",\n      DELIVERED_AT: \"deliveredAt\",\n      ID: \"id\",\n      TIME: \"time\",\n      DELIVERED_TO_ME_AT: \"deliveredToMeAt\"\n    }, e.READ_RECEIPTS = {\n      RECEIVER_ID: \"receiverId\",\n      RECEIVER_TYPE: \"type\",\n      RECIPIENT: \"recipient\",\n      MESSAGE_ID: \"messageId\",\n      READ: \"read\",\n      READ_AT: \"readAt\",\n      ID: \"id\",\n      TIME: \"time\",\n      READ_BY_ME_AT: \"readByMeAt\"\n    }, e.MessageConstatnts = {\n      XMPP_KEYS: {\n        FROM: \"from\",\n        TO: \"to\",\n        TYPE: \"type\",\n        TYPE_USER: \"chat\",\n        TYPE_GROUP: \"groupchat\"\n      },\n      TYPE: {\n        TEXT: \"text\",\n        MEDIA: \"media\",\n        IMAGE: \"image\",\n        VIDEO: \"video\",\n        AUDIO: \"audio\",\n        FILE: \"file\",\n        CUSTOM: \"custom\"\n      },\n      CATEGORY: {\n        MESSAGE: \"message\",\n        ACTION: \"action\",\n        CALL: \"call\",\n        CUSTOM: \"custom\"\n      },\n      RECEIVER_TYPE: {\n        USER: \"user\",\n        GROUP: \"group\"\n      },\n      KEYS: {\n        ATTATCHMENT: \"attatchment\",\n        ATTATCHMENTS: \"attachments\",\n        ACTION: \"action\",\n        TYPE: \"type\",\n        DATA: \"data\",\n        ID: \"id\",\n        MUID: \"muid\",\n        SENDER: \"sender\",\n        RECEIVER: \"receiver\",\n        CATEGORY: \"category\",\n        RECEIVER_TYPE: \"receiverType\",\n        SENT_AT: \"sentAt\",\n        STATUS: \"status\",\n        TEXT: \"text\",\n        URL: \"url\",\n        METADATA: \"metadata\",\n        RECEIPTS: \"receipts\",\n        MY_RECEIPTS: \"myReceipt\",\n        CUSTOM_DATA: \"customData\",\n        CUSTOM_SUB_TYPE: \"subType\"\n      },\n      KNOWN_MEDIA_TYPE: {\n        IMAGE: [],\n        VIDEO: [],\n        AUDIO: [],\n        FILE: []\n      },\n      PAGINATION: {\n        AFFIX: {\n          APPEND: \"append\",\n          PREPEND: \"prepend\"\n        },\n        CURSOR_FILEDS: {\n          ID: \"id\",\n          SENT_AT: \"sentAt\"\n        },\n        CURSOR_AFFIX_DEFAULT: \"prepend\",\n        CURSOR_FIELD_DEFAULT: \"sentAt\",\n        KEYS: {\n          PER_PAGE: \"per_page\",\n          CURSOR_AFFIX: \"cursorAffix\",\n          AFFIX: \"affix\",\n          CURSOR_FIELD: \"cursorField\",\n          CURSOR_VALUE: \"cursorValue\",\n          UID: \"uid\",\n          SENT_AT: \"sentAt\",\n          ID: \"id\",\n          CURRENT_PAGE: \"page\",\n          UNREAD: \"unread\",\n          UNDELIVERED: \"undelivered\",\n          HIDE_MESSAGES_FROM_BLOCKED_USER: \"hideMessagesFromBlockedUsers\",\n          SEARCH_KEY: \"searchKey\",\n          ONLY_UPDATES: \"onlyUpdates\",\n          UPDATED_AT: \"updatedAt\"\n        }\n      }\n    }, e.ATTACHMENTS_CONSTANTS = {\n      KEYS: {\n        EXTENSION: \"extension\",\n        MIME_TYPE: \"mimeType\",\n        NAME: \"name\",\n        SIZE: \"size\",\n        URL: \"url\"\n      }\n    }, (o = e.MessageCategory || (e.MessageCategory = {})).ACTION = \"action\", o.MESSAGE = \"message\", o.CALL = \"call\", o.CUSTOM = \"custom\", e.TYPING_NOTIFICATION = {\n      RECEIVER_ID: \"receiverId\",\n      RECEIVER_TYPE: \"receiverType\",\n      META: \"metadata\",\n      KEYS: {\n        TYPING_NOTIFICATION: \"typingNotification\",\n        TIMESTAMP: \"timestamp\"\n      },\n      ACTIONS: {\n        STARTED: \"started\",\n        ENDED: \"ended\"\n      }\n    }, e.ActionConstatnts = {\n      ACTION_SUBJECTS: {\n        ACTION_ON: \"on\",\n        ACTION_BY: \"by\",\n        ACTION_FOR: \"for\"\n      },\n      ACTION_ENTITY_TYPE: {\n        GROUP_USER: \"groupuser\",\n        USER: \"user\",\n        GROUP: \"group\",\n        MESSAGE: \"message\"\n      },\n      ACTION_KEYS: {\n        ACTION_CREATED: \"created\",\n        ACTION_UPDATED: \"updated\",\n        ACTION_DELETED: \"deleted\",\n        ENTITIES: \"entities\",\n        ENTITY: \"entity\",\n        ENTITY_TYPE: \"entityType\",\n        TYPE_MEMBER_JOINED: \"joined\",\n        TYPE_MEMBER_LEFT: \"left\",\n        TYPE_MEMBER_KICKED: \"kicked\",\n        TYPE_MEMBER_BANNED: \"banned\",\n        TYPE_MEMBER_UNBANNED: \"unbanned\",\n        TYPE_MEMBER_INVITED: \"invited\",\n        TYPE_MEMBER_ADDED: \"added\",\n        ACTION_SCOPE_CHANGED: \"scopeChanged\",\n        ACTION_TYPE_USER: \"user\",\n        ACTION_TYPE_GROUP: \"group\",\n        ACTION_TYPE_GROUP_MEMBER: \"groupMember\",\n        TYPE_MESSAGE_EDITED: \"edited\",\n        TYPE_MESSAGE_DELETED: \"deleted\",\n        ACTION_TYPE_CALL: \"call\",\n        EXTRAS: \"extras\",\n        SCOPE: \"scope\",\n        NEW: \"new\",\n        OLD: \"old\"\n      },\n      ActionMessages: {\n        ACTION_GROUP_JOINED_MESSAGE: \"%s joined %s\",\n        ACTION_GROUP_LEFT_MESSAGE: \"%s left %s\",\n        ACTION_MEMBER_KICKED_MESSAGE: \"%s kicked %s from %s\",\n        ACTION_MEMBER_BANNED_MESSAGE: \"%s banned %s from %s\",\n        ACTION_MEMBER_UNBANNED_MESSAGE: \"%s unbanned %s from %s\",\n        ACTION_MEMBER_INVITED_MESSAGE: \"%s banned %s from %s\",\n        ACTION_MESSAGE_EDITED_MESSAGE: \" Message Edited\",\n        ACTION_MESSAGE_DELETED_MESSAGE: \"Message Deleted\",\n        ACTION_MEMBER_SCOPE_CHANGED: \"%s made %s %s\",\n        ACTION_MEMBER_ADDED_TO_GROUP: \"%s added %s\"\n      },\n      ACTION_TYPE: {\n        TYPE_MEMBER_JOINED: \"joined\",\n        TYPE_MEMBER_LEFT: \"left\",\n        TYPE_MEMBER_KICKED: \"kicked\",\n        TYPE_MEMBER_BANNED: \"banned\",\n        TYPE_MEMBER_UNBANNED: \"unbanned\",\n        TYPE_MEMBER_INVITED: \"invited\",\n        TYPE_MEMBER_SCOPE_CHANGED: \"scopeChanged\",\n        TYPE_MESSAGE: \"message\",\n        TYPE_MESSAGE_EDITED: \"edited\",\n        TYPE_MESSAGE_DELETED: \"deleted\",\n        TYPE_MEMBER_ADDED: \"added\"\n      },\n      ACTIONS: {\n        MEMBER_JOINED: \"joined\",\n        MEMBER_LEFT: \"left\",\n        MEMBER_KICKED: \"kicked\",\n        MEMBER_BANNED: \"banned\",\n        MEMBER_UNBANNED: \"unbanned\",\n        MEMBER_INVITED: \"invited\",\n        MEMBER_SCOPE_CHANGED: \"scopeChanged\"\n      }\n    }, e.BlockedUsersConstants = {\n      REQUEST_KEYS: {\n        DIRECTIONS: {\n          BOTH: \"both\",\n          HAS_BLOCKED_ME: \"hasBlockedMe\",\n          BLOCKED_BY_ME: \"blockedByMe\"\n        }\n      }\n    }, e.CallConstants = {\n      CALL_TYPE_AUDIO: \"audio\",\n      CALL_TYPE_VIDEO: \"video\",\n      CALL_TYPE: {\n        AUDIO: \"audio\",\n        VIDEO: \"video\"\n      },\n      RECEIVER_TYPE_GROUP: \"group\",\n      RECEIVER_TYPE_USER: \"user\",\n      CALL_KEYS: {\n        CALL_DATA: \"data\",\n        CALL_ID: \"id\",\n        CALL_SESSION_ID: \"sessionid\",\n        CALL_RECEIVER: \"receiver\",\n        CALL_SENDER: \"sender\",\n        CALL_RECEIVER_TYPE: \"receiverType\",\n        CALL_STATUS: \"status\",\n        CALL_TYPE: \"type\",\n        CALL_INITIATED_AT: \"initiatedAt\",\n        CALL_JOINED_AT: \"joinedAt\",\n        CALL_LEFT_AT: \"leftAt\",\n        CALL_METADATA: \"metadata\",\n        CALL_ENTITIES: \"entities\",\n        CALL_ENTITY_TYPE: \"entityType\",\n        CALL_ENTITY: \"entity\",\n        CALL_ENTITY_USER: \"user\",\n        CALL_ENTITY_GROUP: \"group\"\n      },\n      CALL_STATUS: {\n        INITIATED: \"initiated\",\n        ONGOING: \"ongoing\",\n        UNANSWERED: \"unanswered\",\n        REJECTED: \"rejected\",\n        BUSY: \"busy\",\n        CANCELLED: \"cancelled\",\n        ENDED: \"ended\"\n      }\n    }, e.GroupConstants = {\n      KEYS: {\n        NAME: \"name\",\n        GUID: \"guid\",\n        TYPE: \"type\",\n        PASSWORD: \"password\",\n        ICON: \"icon\",\n        DESCRIPTION: \"description\",\n        OWNER: \"owner\",\n        METADATA: \"metadata\",\n        CREATED_AT: \"createdAt\",\n        UPDATED_AT: \"updatedAt\",\n        HAS_JOINED: \"hasJoined\",\n        WS_CHANNEL: \"wsChannel\"\n      }\n    }, e.GroupMemersConstans = {\n      KEYS: {\n        SCOPE: \"scope\",\n        UID: \"uid\",\n        GUID: \"guid\",\n        USER: \"user\"\n      }\n    }, e.UserConstants = {\n      UID: \"uid\",\n      NAME: \"name\",\n      AUTH_TOKEN: \"authToken\",\n      AVATAR: \"avatar\",\n      CREDITS: \"credits\",\n      EMAIL: \"email\",\n      LAST_ACTIVE_AT: \"lastActiveAt\",\n      LINK: \"link\",\n      META_DATA: \"metaData\",\n      ROLE: \"role\",\n      STATUS: \"status\",\n      STATUS_MESSAGE: \"statusMessage\",\n      USER_NAME: \"user_name\"\n    }, e.Errors = {\n      ERROR_IO_EXCEPTION: \"ERROR_IO_EXCEPTION\",\n      ERROR_JSON_EXCEPTION: \"ERROR_JSON_EXCEPTION\",\n      ERROR_PASSWORD_MISSING: \"ERROR_PASSWORD_MISSING\",\n      ERROR_LIMIT_EXCEEDED: \"ERROR_LIMIT_EXCEEDED\",\n      ERROR_USER_NOT_LOGGED_IN: \"ERROR_USER_NOT_LOGGED_IN\",\n      ERROR_INVALID_GUID: \"ERROR_INVALID_GUID\",\n      ERROR_PASSWORD_MISSING_MESSAGE: \"Password is mandatory for a password group\",\n      ERROR_LIMIT_EXCEEDED_MESSAGE: \"Limit Exceeded Max limit of %s\",\n      ERROR_USER_NOT_LOGGED_IN_MESSAGE: \"Please log in to CometChat before calling this method\",\n      ERROR_INVALID_GUID_MESSAGE: \"Please provide a valid GUID\",\n      ERROR_DEFAULT_MESSAGE: \"Something went wrong\"\n    }, e.CALL_ERROR = {\n      CALL_ALREADY_INITIATED: {\n        code: \"CALL_ALREADY_INITIATED\",\n        name: \"CALL_ALREADY_INITIATED\",\n        message: \"There is already call in progress\",\n        details: {}\n      },\n      ERROR_IN_CALLING: {\n        code: \"CALL_IN_PROGRESS\",\n        name: \"CALL_ALREADY_INITIATED\",\n        message: \"There is already call in progress\",\n        details: {}\n      }\n    }, e.PARAMETER_ERROR = {\n      PARAMETER_REQUIRED: {\n        code: \"%s_NOT_PROVIDED\",\n        name: \"%s_NOT_PROVIDED\",\n        message: \"please provide the %s\",\n        details: {}\n      }\n    }, e.GroupErrors = {\n      NOT_A_GROUP: new i.CometChatException({\n        code: \"NOT_A_GROUP\",\n        message: \"Please use group class to construct a new group\"\n      })\n    }, e.PresenceConstatnts = {\n      XMPP_KEYS: {\n        FROM: \"from\",\n        STATUS: \"status\",\n        LAST_ACTIVE_AT: \"lastActiveAt\",\n        TYPE: \"type\"\n      },\n      STATUS: {\n        ONLINE: \"online\",\n        OFFLINE: \"offline\",\n        JOINED: \"JOINED\",\n        LEFT: \"LEFT\"\n      }\n    }, e.APP_SETTINGS = {\n      APP_SETTINGS: \"app_settings\",\n      KEYS: {\n        CHAT_HOST: \"CHAT_HOST\",\n        CHAT_USE_SSL: \"CHAT_USE_SSL\",\n        GROUP_SERVICE: \"GROUP_SERVICE\",\n        CALL_SERVICE: \"CALL_SERVICE\",\n        CHAT_WS_PORT: \"CHAT_WS_PORT\",\n        CHAT_WSS_PORT: \"CHAT_WSS_PORT\",\n        CHAT_HTTP_BIND_PORT: \"CHAT_HTTP_BIND_PORT\",\n        CHAT_HTTPS_BIND_PORT: \"CHAT_HTTPS_BIND_PORT\",\n        ADMIN_API_HOST: \"ADMIN_API_HOST\",\n        CLIENT_API_HOST: \"CLIENT_API_HOST\",\n        WEBRTC_HOST: \"WEBRTC_HOST\",\n        WEBRTC_USE_SSL: \"WEBRTC_USE_SSL\",\n        WEBRTC_WS_PORT: \"WEBRTC_WS_PORT\",\n        WEBRTC_WSS_PORT: \"WEBRTC_WSS_PORT\",\n        WEBRTC_HTTP_BIND_PORT: \"WEBRTC_HTTP_BIND_PORT\",\n        WEBRTC_HTTPS_BIND_PORT: \"WEBRTC_HTTPS_BIND_PORT\",\n        EXTENSION_LIST: \"extensions\",\n        EXTENSION_KEYS: {\n          ID: \"id\",\n          NAME: \"name\"\n        }\n      }\n    };\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n    var s = n(6),\n        r = n(0),\n        o = n(4),\n        i = n(3);\n\n    function a(t) {\n      return null != t && (\"string\" == typeof t && (t = t.trim()), \"object\" == typeof t && 0 === Object.keys(t).length && (t = void 0)), [\"\", 0, \"0\", !1, null, \"null\", void 0, \"undefined\"].includes(t);\n    }\n\n    e.isObject = function (t) {\n      return t instanceof Object && t.constructor === Object;\n    }, e.isTruthy = function (t) {\n      return [!0, 1, \"1\", \"true\", \"TRUE\"].includes(t);\n    }, e.isFalsy = a, e.getOrdinalSuffix = function (t) {\n      var e = t % 10,\n          n = t % 100;\n      return 1 == e && 11 != n ? t + \"st\" : 2 == e && 12 != n ? t + \"nd\" : 3 == e && 13 != n ? t + \"rd\" : t + \"th\";\n    }, e.format = function (t) {\n      for (var s = [], e = 1; e < arguments.length; e++) s[e - 1] = arguments[e];\n\n      return t.split(\"%s\").reduce(function (t, e, n) {\n        return t + e + (s[n] || \"\");\n      }, \"\");\n    }, e.createUidFromJid = function (t) {\n      return t.substring(t.lastIndexOf(\"]\") + 1, t.lastIndexOf(\"@\"));\n    };\n\n    var c = function () {\n      function t() {}\n\n      return t.log = function (t, e) {}, t.error = function (t, e) {}, t.info = function (t, e) {}, t;\n    }();\n\n    function u() {\n      return new Promise(function (e, n) {\n        o.makeApiCall(\"appSettings\").then(function (t) {\n          s.LocalStorage.getInstance().set(\"app_settings\", t.data), e(t.data);\n        }, function (t) {\n          n(new i.CometChatException(t.error));\n        });\n      });\n    }\n\n    e.Logger = c, e.getCurrentTime = function () {\n      return new Date().getTime();\n    }, e.getAppSettings = function () {\n      return new Promise(function (e, n) {\n        s.LocalStorage.getInstance().get(r.APP_SETTINGS.APP_SETTINGS).then(function (t) {\n          a(t) ? u().then(function (t) {\n            e(t);\n          }, function (t) {\n            n(t);\n          }) : e(t);\n        }, function (t) {\n          n(t);\n        });\n      });\n    }, e.getUpdatedSettings = u, e.isImage = function (t) {\n      var e;\n      return t.type && t.type.toLowerCase().includes(\"image\") && (e = !0), e;\n    }, e.isVideo = function (t) {\n      var e;\n      return t.type && t.type.toLowerCase().includes(\"video\") && (e = !0), e;\n    }, e.isAudio = function (t) {\n      var e;\n      return t.type && t.type.toLowerCase().includes(\"audio\") && (e = !0), e;\n    };\n  }, function (t, B, k) {\n    \"use strict\";\n\n    (function (e) {\n      var l = this && this.__assign || function () {\n        return (l = Object.assign || function (t) {\n          for (var e, n = 1, s = arguments.length; n < s; n++) for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n\n          return t;\n        }).apply(this, arguments);\n      },\n          i = this && this.__awaiter || function (o, i, a, c) {\n        return new (a || (a = Promise))(function (t, e) {\n          function n(t) {\n            try {\n              r(c.next(t));\n            } catch (t) {\n              e(t);\n            }\n          }\n\n          function s(t) {\n            try {\n              r(c.throw(t));\n            } catch (t) {\n              e(t);\n            }\n          }\n\n          function r(e) {\n            e.done ? t(e.value) : new a(function (t) {\n              t(e.value);\n            }).then(n, s);\n          }\n\n          r((c = c.apply(o, i || [])).next());\n        });\n      },\n          c = this && this.__generator || function (n, s) {\n        var r,\n            o,\n            i,\n            t,\n            a = {\n          label: 0,\n          sent: function () {\n            if (1 & i[0]) throw i[1];\n            return i[1];\n          },\n          trys: [],\n          ops: []\n        };\n        return t = {\n          next: e(0),\n          throw: e(1),\n          return: e(2)\n        }, \"function\" == typeof Symbol && (t[Symbol.iterator] = function () {\n          return this;\n        }), t;\n\n        function e(e) {\n          return function (t) {\n            return function (e) {\n              if (r) throw new TypeError(\"Generator is already executing.\");\n\n              for (; a;) try {\n                if (r = 1, o && (i = 2 & e[0] ? o.return : e[0] ? o.throw || ((i = o.return) && i.call(o), 0) : o.next) && !(i = i.call(o, e[1])).done) return i;\n\n                switch (o = 0, i && (e = [2 & e[0], i.value]), e[0]) {\n                  case 0:\n                  case 1:\n                    i = e;\n                    break;\n\n                  case 4:\n                    return a.label++, {\n                      value: e[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    a.label++, o = e[1], e = [0];\n                    continue;\n\n                  case 7:\n                    e = a.ops.pop(), a.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(i = 0 < (i = a.trys).length && i[i.length - 1]) && (6 === e[0] || 2 === e[0])) {\n                      a = 0;\n                      continue;\n                    }\n\n                    if (3 === e[0] && (!i || e[1] > i[0] && e[1] < i[3])) {\n                      a.label = e[1];\n                      break;\n                    }\n\n                    if (6 === e[0] && a.label < i[1]) {\n                      a.label = i[1], i = e;\n                      break;\n                    }\n\n                    if (i && a.label < i[2]) {\n                      a.label = i[2], a.ops.push(e);\n                      break;\n                    }\n\n                    i[2] && a.ops.pop(), a.trys.pop();\n                    continue;\n                }\n\n                e = s.call(n, a);\n              } catch (t) {\n                e = [6, t], o = 0;\n              } finally {\n                r = i = 0;\n              }\n\n              if (5 & e[0]) throw e[1];\n              return {\n                value: e[0] ? e[1] : void 0,\n                done: !0\n              };\n            }([e, t]);\n          };\n        }\n      };\n\n      B.__esModule = !0;\n\n      var t = k(22),\n          d = k(1),\n          h = k(3),\n          p = k(4),\n          u = k(5),\n          E = k(8),\n          o = k(12),\n          s = k(6),\n          f = k(24),\n          r = k(23),\n          g = k(9),\n          n = k(17),\n          _ = k(14),\n          m = k(0),\n          C = k(13),\n          T = k(31),\n          S = k(32),\n          A = k(16),\n          I = k(19),\n          y = k(27),\n          N = k(33),\n          R = k(18),\n          v = k(45),\n          M = k(46),\n          O = k(48),\n          P = k(49),\n          b = k(20),\n          L = k(28),\n          D = k(29),\n          w = k(25),\n          U = k(34),\n          Y = k(50),\n          x = k(30),\n          G = k(15),\n          F = k(51),\n          K = E.XMPPConnectionHelper.getInstance(),\n          a = function () {\n        function a(t) {\n          \"undefined\" != typeof document ? d.Logger.info(\"This is browser\", \"we have everything\") : \"undefined\" != typeof navigator && \"ReactNative\" == navigator.product ? (d.Logger.info(\"This is react-native\", \"we do not have dom\"), e.DOMParser = k(52).DOMParser, e.document = new e.DOMParser().parseFromString(\"<?xml version='1.0'?>\", \"text/xml\"), a.isNative = !0) : d.Logger.info(\"This is node\", \"we do not have anything\"), a.typingTimer(), a.appId = t, a.messagesStore = n.MessagesStore.getInstance(), a.localStorage = s.LocalStorage.getInstance(), a.userStore = S.UserStore.getInstance(), a.messageListnerMaping = b.MessageListnerMaping.getInstance();\n        }\n\n        return a.setAuthToken = function (t) {\n          a.authToken = t;\n        }, a.prototype.getAuthToken = function () {\n          return a.authToken;\n        }, a.getAppId = function () {\n          return a.appId;\n        }, a.prototype.getApiKey = function () {\n          return a.apiKey;\n        }, a.init = function (n) {\n          var s = this;\n          return void 0 === n && (n = \"\"), new Promise(function (e, t) {\n            a.isNative || window.navigator.onLine || t(new h.CometChatException(N.INIT_ERROR.NO_INTERNET_CONNECTION));\n            \"object\" == typeof n && n.hasOwnProperty(\"appId\") && (n = n.appId), d.isFalsy(n) ? t(new h.CometChatException(N.INIT_ERROR.NO_APP_ID)) : (s.initialzed = !0, s.getInstance(n)), a.localStorage.get(\"user\").then(function (t) {\n              t ? (a.user = new u.Me(t), a.setAuthToken(a.user.getAuthToken()), a.XMPPLogin(a.user, function () {\n                e();\n              }, function () {\n                a.logout();\n              })) : e();\n            });\n          });\n        }, a.isInitialized = function () {\n          return this.initialzed;\n        }, a.getInstance = function (t) {\n          return this.cometChat || (this.cometChat = new a(t)), this.cometChat;\n        }, a.login = function () {\n          for (var o = this, i = [], t = 0; t < arguments.length; t++) i[t] = arguments[t];\n\n          if (\"object\" == typeof i[0]) {\n            var e = i[0];\n            i[0].hasOwnProperty(\"authToken\") ? i[0] = e.authToken : i[0].hasOwnProperty(\"username\") && i[0].hasOwnProperty(\"apiKey\") && (i[0] = e.username, i[1] = e.apiKey);\n          }\n\n          return new Promise(function (s, r) {\n            if (2 == i.length ? (d.isFalsy(i[0]) || d.isFalsy(i[1])) && r(new h.CometChatException(N.ERRORS.PARAMETER_MISSING)) : 1 == i.length ? d.isFalsy(i[0]) && r(new h.CometChatException(N.ERRORS.PARAMETER_MISSING)) : r(new h.CometChatException(N.ERRORS.PARAMETER_MISSING)), !d.isFalsy(o.getAppId())) return a.localStorage.get(\"user\").then(function (n) {\n              if (2 == i.length) {\n                a.isSecure = !1, a.apiKey = i[1];\n                var t = i[0];\n                null != n && n.uid !== i[0] ? o.messagesStore.clearStore().then(function () {\n                  a.userStore.clearStore().then(function () {\n                    a.localStorage.clearStore().then(function () {\n                      E.XMPPConnectionHelper.getInstance().XMPPDisconnect(), a.generateAuthToken(t).then(function (t) {\n                        a.user = new u.Me(t), a.setAuthToken(a.user.getAuthToken()), a.getLoggedinUser().then(function (t) {\n                          (a.user = new u.Me(t)).setAuthToken(a.authToken), a.setAuthToken(a.user.getAuthToken()), G.ExtensionController.hookOnLogin(a.user), a.XMPPLogin(a.user, s, r);\n                        }, function (t) {\n                          r(new h.CometChatException(t.error));\n                        });\n                      }, function (t) {\n                        r(new h.CometChatException(t));\n                      });\n                    });\n                  });\n                }) : d.isFalsy(a.authToken) ? d.isFalsy(t) || (d.isFalsy(a.apiKey) ? r(new h.CometChatException(N.LOGIN_ERROR.UNAUTHORISED)) : o.generateAuthToken(t).then(function (t) {\n                  o.user = new u.Me(t), o.setAuthToken(a.user.getAuthToken()), o.getLoggedinUser().then(function (t) {\n                    o.user = new u.Me(t), o.user.setAuthToken(a.authToken), o.setAuthToken(o.user.getAuthToken()), G.ExtensionController.hookOnLogin(a.user), E.XMPPConnectionHelper.getInstance().XMPPDisconnect(), o.XMPPLogin(o.user, s, r);\n                  }, function (t) {\n                    r(new h.CometChatException(t.error));\n                  });\n                }, function (t) {\n                  r(new h.CometChatException(t));\n                })) : (G.ExtensionController.hookOnLogin(a.user), s(o.user));\n              } else a.authToken = i[0], a.isSecure = !0, o.getLoggedinUser().then(function (t) {\n                if (t.authToken != i[0]) {\n                  var e = o;\n                  e.messagesStore.clearStore().then(function () {\n                    e.userStore.clearStore().then(function () {\n                      e.localStorage.clearStore().then(function () {\n                        E.XMPPConnectionHelper.getInstance().XMPPDisconnect(), e.getLoggedinUser().then(function (t) {\n                          a.XMPPLogin(new u.Me(t), s, r);\n                        }, function (t) {\n                          r(t);\n                        });\n                      });\n                    });\n                  });\n                } else n ? s(new u.Me(t)) : a.XMPPLogin(new u.Me(t), s, r);\n              }, function (t) {});\n            });\n            r(new h.CometChatException(N.LOGIN_ERROR.NOT_INITIALIZED));\n          });\n        }, a.sendMessage = function (s) {\n          return i(this, void 0, void 0, function () {\n            var e,\n                n,\n                o = this;\n            return c(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return s instanceof r.TextMessage || s instanceof f.MediaMessage || s instanceof w.CustomMessage || (s = s[m.MessageConstatnts.KEYS.ATTATCHMENT] ? (e = m.MessageConstatnts.TYPE.FILE, d.isImage(s[m.MessageConstatnts.KEYS.ATTATCHMENT]) ? e = m.MessageConstatnts.TYPE.IMAGE : d.isAudio(s[m.MessageConstatnts.KEYS.ATTATCHMENT]) ? e = m.MessageConstatnts.TYPE.AUDIO : d.isVideo(s[m.MessageConstatnts.KEYS.ATTATCHMENT]) && (e = m.MessageConstatnts.TYPE.VIDEO), new f.MediaMessage(s[m.MessageConstatnts.KEYS.RECEIVER], s[m.MessageConstatnts.KEYS.ATTATCHMENT], e, s[m.MessageConstatnts.KEYS.RECEIVER_TYPE])) : new r.TextMessage(s[m.MessageConstatnts.KEYS.RECEIVER], s[m.MessageConstatnts.KEYS.TEXT], m.MessageConstatnts.TYPE.TEXT, s[m.MessageConstatnts.KEYS.RECEIVER_TYPE])), [4, G.ExtensionController.hookBeforeMessageSent(s)];\n\n                case 1:\n                  return n = t.sent(), s = n, [2, new Promise(function (r, e) {\n                    return p.makeApiCall(\"sendMessage\", {}, s, s instanceof f.MediaMessage).then(function (s) {\n                      return i(o, void 0, void 0, function () {\n                        var e, n;\n                        return c(this, function (t) {\n                          switch (t.label) {\n                            case 0:\n                              return e = g.MessageController.trasformJSONMessge(s.data), [4, G.ExtensionController.hookAfterMessageSent(e)];\n\n                            case 1:\n                              return n = t.sent(), r(e = n), [2];\n                          }\n                        });\n                      });\n                    }, function (t) {\n                      e(new h.CometChatException(t.error));\n                    });\n                  })];\n              }\n            });\n          });\n        }, a.sendDirectMessage = function (t) {\n          return Object.assign(t, {\n            receiverType: m.MessageConstatnts.RECEIVER_TYPE.USER\n          }), this.sendMessage(t);\n        }, a.sendGroupMessage = function (t) {\n          return Object.assign(t, {\n            receiverType: m.MessageConstatnts.RECEIVER_TYPE.GROUP\n          }), this.sendMessage(t);\n        }, a.sendMediaMessage = function (t) {\n          return this.sendMessage(t);\n        }, a.sendCustomMessage = function (t) {\n          return this.sendMessage(t);\n        }, a.getLastDeliveredMessageId = function (t) {\n          return i(this, void 0, void 0, function () {\n            return c(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return [4, b.MessageListnerMaping.getInstance().get(\"all\")];\n\n                case 1:\n                  return [2, t.sent()];\n              }\n            });\n          });\n        }, a.startTyping = function (t) {\n          if (!d.isFalsy(t)) {\n            var e,\n                n = this.RECEIVER_TYPE.USER,\n                s = {};\n            if (t instanceof L.TypingIndicator) e = t.getReceiverId(), n = t.getReceiverType(), s = t.getMetadata();else {\n              if (!t.hasOwnProperty(m.TYPING_NOTIFICATION.RECEIVER_ID)) return;\n              e = t[m.TYPING_NOTIFICATION.RECEIVER_ID], t.hasOwnProperty(m.TYPING_NOTIFICATION.RECEIVER_TYPE) && (n = t[m.TYPING_NOTIFICATION.RECEIVER_TYPE]), t.hasOwnProperty(m.TYPING_NOTIFICATION.META) && (s = t[m.TYPING_NOTIFICATION.META]);\n            }\n            d.isFalsy(e) || (n = n == this.RECEIVER_TYPE.USER ? m.XMPP.CONVERSATION.TYPE.CHAT : m.XMPP.CONVERSATION.TYPE.GROUP_CHAT, (D.TypingNotificationController.getTypingStartedMap(e) && d.getCurrentTime() - D.TypingNotificationController.getTypingStartedMap(e) >= 1e3 * m.DEFAULT_VALUES.DEFAULT_MAX_TYPING_INDICATOR_LIMIT || null == D.TypingNotificationController.getTypingStartedMap(e)) && d.getAppSettings().then(function (t) {\n              switch (n) {\n                case m.XMPP.CONVERSATION.TYPE.CHAT:\n                  K.sendTypingStarted(d.format(m.XMPP.bare_jid_string, a.getAppId(), e, t[m.APP_SETTINGS.KEYS.CHAT_HOST]), n, s);\n                  break;\n\n                case m.XMPP.CONVERSATION.TYPE.GROUP_CHAT:\n                  K.sendTypingStarted(d.format(m.XMPP.muc_jid_string, a.getAppId(), e, t[m.APP_SETTINGS.KEYS.GROUP_SERVICE], t[m.APP_SETTINGS.KEYS.CHAT_HOST]), n, s);\n              }\n\n              D.TypingNotificationController.addTypingStarted(e);\n            }, function (t) {}));\n          }\n        }, a.endTyping = function (t) {\n          if (!d.isFalsy(t)) {\n            var e,\n                n = this.RECEIVER_TYPE.USER,\n                s = {};\n            if (t instanceof L.TypingIndicator) e = t.getReceiverId(), n = t.getReceiverType(), s = t.getMetadata();else {\n              if (!t.hasOwnProperty(m.TYPING_NOTIFICATION.RECEIVER_ID)) return;\n              e = t[m.TYPING_NOTIFICATION.RECEIVER_ID], t.hasOwnProperty(m.TYPING_NOTIFICATION.RECEIVER_TYPE) && (n = t[m.TYPING_NOTIFICATION.RECEIVER_TYPE]), n = n == this.RECEIVER_TYPE.USER ? m.XMPP.CONVERSATION.TYPE.CHAT : m.XMPP.CONVERSATION.TYPE.GROUP_CHAT, t.hasOwnProperty(m.TYPING_NOTIFICATION.META) && (s = t[m.TYPING_NOTIFICATION.META]);\n            }\n            if (d.isFalsy(e)) return;\n            n = n == this.RECEIVER_TYPE.USER ? m.XMPP.CONVERSATION.TYPE.CHAT : m.XMPP.CONVERSATION.TYPE.GROUP_CHAT, D.TypingNotificationController.getTypingStartedMap(e) && d.getCurrentTime() - D.TypingNotificationController.getTypingStartedMap(e) < 1e3 * m.DEFAULT_VALUES.DEFAULT_MAX_TYPING_INDICATOR_LIMIT && (D.TypingNotificationController.getTypingEndedMap(e) && d.getCurrentTime() - D.TypingNotificationController.getTypingEndedMap(e) >= 1e3 * m.DEFAULT_VALUES.DEFAULT_MAX_TYPING_INDICATOR_LIMIT || null == D.TypingNotificationController.getTypingEndedMap(e)) && d.getAppSettings().then(function (t) {\n              switch (n) {\n                case m.XMPP.CONVERSATION.TYPE.CHAT:\n                  K.sendTypingPaused(d.format(m.XMPP.bare_jid_string, a.getAppId(), e, t[m.APP_SETTINGS.KEYS.CHAT_HOST]), n, s);\n                  break;\n\n                case m.XMPP.CONVERSATION.TYPE.GROUP_CHAT:\n                  K.sendTypingPaused(d.format(m.XMPP.muc_jid_string, a.getAppId(), e, t[m.APP_SETTINGS.KEYS.GROUP_SERVICE], t[m.APP_SETTINGS.KEYS.CHAT_HOST]), n, s);\n              }\n\n              D.TypingNotificationController.addTypingEnded(e);\n            }, function (t) {});\n          }\n        }, a.markMessageAsRead = function (t) {\n          var e;\n          t instanceof Object ? (t.hasOwnProperty(m.READ_RECEIPTS.RECEIVER_ID) && t.hasOwnProperty(m.MessageConstatnts.KEYS.RECEIVER_TYPE) && e[m.MessageConstatnts.KEYS.RECEIVER_TYPE], t.hasOwnProperty(m.READ_RECEIPTS.MESSAGE_ID) && t[m.READ_RECEIPTS.MESSAGE_ID], e = t[m.READ_RECEIPTS.RECEIVER_ID]) : t = g.MessageController.trasformJSONMessge(t), t.getId(), t.getSender().getUid(), t.getReceiver(), t.getReceiverType();\n          var n = t.getSender().getUid(),\n              s = t.getSender().getUid();\n          t.getReceiverType() == m.MessageConstatnts.RECEIVER_TYPE.GROUP && (s = t.getReceiver()), E.XMPPConnectionHelper.getInstance().markAsRead(n, t.getReceiverType(), t.getId().toString(), s);\n        }, a.getMessageDetails = function (t) {\n          return new Promise(function (e, n) {\n            d.isFalsy(t) ? n(new h.CometChatException(N.ERRORS.PARAMETER_MISSING)) : p.makeApiCall(\"getMessageDetails\", {\n              messageId: t\n            }).then(function (t) {\n              e(g.MessageController.trasformJSONMessge(t.data));\n            }, function (t) {\n              d.Logger.error(\"CometChat:GetMessageDetails:\", t), n(t.error);\n            });\n          });\n        }, a.getMessageReceipts = function (t) {\n          return new Promise(function (e, n) {\n            d.isFalsy(t) ? n(new h.CometChatException(N.ERRORS.PARAMETER_MISSING)) : p.makeApiCall(\"getMessageDetails\", {\n              messageId: t\n            }).then(function (t) {\n              g.MessageController.getReceiptsFromJSON(t.data).then(function (t) {\n                e(t);\n              }, function (t) {\n                n(t);\n              });\n            }, function (t) {\n              d.Logger.error(\"CometChat:GetMessageDetails:\", t), n(t.error);\n            });\n          });\n        }, a.getUnreadMessageCount = function (t) {\n          void 0 === t && (t = !1);\n          var n = 0;\n          return t && (n = 1), new Promise(function (s, e) {\n            p.makeApiCall(\"getMessages\", {}, {\n              unread: 1,\n              count: 1,\n              hideMessagesFromBlockedUsers: n\n            }).then(function (t) {\n              var e = {},\n                  n = {};\n              t.data.map(function (t) {\n                t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE] == m.MessageConstatnts.RECEIVER_TYPE.GROUP ? n[t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT] : e[t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT];\n              }), s({\n                users: e,\n                groups: n\n              });\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.getUnreadMessageCountForAllUsers = function (t) {\n          void 0 === t && (t = !1);\n          var s = 0;\n          return t && (s = 1), new Promise(function (n, e) {\n            p.makeApiCall(\"getMessages\", {}, {\n              hideMessagesFromBlockedUsers: s,\n              receiverType: m.MessageConstatnts.RECEIVER_TYPE.USER,\n              unread: 1,\n              count: 1\n            }).then(function (t) {\n              var e = {};\n              t.data.map(function (t) {\n                e[t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT];\n              }), n(l({}, e));\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.getUnreadMessageCountForAllGroups = function (t) {\n          void 0 === t && (t = !1);\n          var s = 0;\n          return t && (s = 1), new Promise(function (n, e) {\n            p.makeApiCall(\"getMessages\", {}, {\n              hideMessagesFromBlockedUsers: s,\n              receiverType: m.MessageConstatnts.RECEIVER_TYPE.GROUP,\n              unread: 1,\n              count: 1\n            }).then(function (t) {\n              var e = {};\n              t.data.map(function (t) {\n                t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE] == m.MessageConstatnts.RECEIVER_TYPE.GROUP && (e[t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]);\n              }), n(l({}, e));\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.getUnreadMessageCountForUser = function (t, e) {\n          void 0 === e && (e = !1);\n          var s = 0;\n          return e && (s = 1), new Promise(function (n, e) {\n            d.isFalsy(t) ? e(new h.CometChatException(N.ERRORS.PARAMETER_MISSING)) : p.makeApiCall(\"getUserMessages\", {\n              listId: t\n            }, {\n              hideMessagesFromBlockedUsers: s,\n              unread: 1,\n              count: 1,\n              uid: t\n            }).then(function (t) {\n              var e = {};\n              t.data.map(function (t) {\n                e[t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT];\n              }), n(l({}, e));\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.getUnreadMessageCountForGroup = function (t, e) {\n          void 0 === e && (e = !1);\n          var s = 0;\n          return e && (s = 1), new Promise(function (n, e) {\n            d.isFalsy(t) ? e(new h.CometChatException(N.ERRORS.PARAMETER_MISSING)) : p.makeApiCall(\"getGroupMessages\", {\n              listId: t\n            }, {\n              hideMessagesFromBlockedUsers: s,\n              unread: 1,\n              count: 1,\n              guid: t\n            }).then(function (t) {\n              var e = {};\n              t.data.map(function (t) {\n                t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE] == m.MessageConstatnts.RECEIVER_TYPE.GROUP && (e[t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]);\n              }), n(l({}, e));\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.getUndeliveredMessageCount = function (t) {\n          void 0 === t && (t = !1);\n          var n = 0;\n          return t && (n = 1), new Promise(function (s, e) {\n            p.makeApiCall(\"getMessages\", {}, {\n              hideMessagesFromBlockedUsers: n,\n              undelivered: 1,\n              count: 1\n            }).then(function (t) {\n              var e = {},\n                  n = {};\n              t.data.map(function (t) {\n                t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE] == m.MessageConstatnts.RECEIVER_TYPE.GROUP ? n[t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT] : e[t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT];\n              }), s({\n                users: e,\n                groups: n\n              });\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.getUndeliveredMessageCountForAllUsers = function (t) {\n          void 0 === t && (t = !1);\n          var s = 0;\n          return t && (s = 1), new Promise(function (n, e) {\n            p.makeApiCall(\"getMessages\", {}, {\n              hideMessagesFromBlockedUsers: s,\n              unread: 1,\n              count: 1\n            }).then(function (t) {\n              var e = {};\n              t.data.map(function (t) {\n                e[t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT];\n              }), n(l({}, e));\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.getUndeliveredMessageCountForAllGroups = function (t) {\n          void 0 === t && (t = !1);\n          var s = 0;\n          return t && (s = 1), new Promise(function (n, e) {\n            p.makeApiCall(\"getMessages\", {}, {\n              hideMessagesFromBlockedUsers: s,\n              unread: 1,\n              count: 1\n            }).then(function (t) {\n              var e = {};\n              t.data.map(function (t) {\n                e[t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT];\n              }), n(l({}, e));\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.getUndeliveredMessageCountForUser = function (t, e) {\n          void 0 === e && (e = !1);\n          var s = 0;\n          return e && (s = 1), new Promise(function (n, e) {\n            d.isFalsy(t) ? e(new h.CometChatException(N.ERRORS.PARAMETER_MISSING)) : p.makeApiCall(\"getUserMessages\", {\n              listId: t\n            }, {\n              hideMessagesFromBlockedUsers: s,\n              undelivered: 1,\n              count: 1,\n              uid: t\n            }).then(function (t) {\n              var e = {};\n              t.data.map(function (t) {\n                e[t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT];\n              }), n(l({}, e));\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.getUndeliveredMessageCountForGroup = function (t, e) {\n          void 0 === e && (e = !1);\n          var s = 0;\n          return e && (s = 1), new Promise(function (n, e) {\n            d.isFalsy(t) ? e(new h.CometChatException(N.ERRORS.PARAMETER_MISSING)) : p.makeApiCall(\"getGroupMessages\", {\n              listId: t\n            }, {\n              hideMessagesFromBlockedUsers: s,\n              undelivered: 1,\n              count: 1,\n              uid: t\n            }).then(function (t) {\n              var e = {};\n              t.data.map(function (t) {\n                e[t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = t[m.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT];\n              }), n(l({}, e));\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.editMessage = function (t) {\n          return new Promise(function (e, n) {\n            d.isFalsy(t.getId()) ? n(new h.CometChatException(N.ERRORS.PARAMETER_MISSING)) : p.makeApiCall(\"updateMessage\", {\n              messageId: t.getId()\n            }, t).then(function (t) {\n              e(g.MessageController.trasformJSONMessge(t.data).getActionOn());\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.deleteMessage = function (t) {\n          return new Promise(function (e, n) {\n            d.isFalsy(t) ? n(new h.CometChatException(N.ERRORS.PARAMETER_MISSING)) : p.makeApiCall(\"deleteMessage\", {\n              messageId: t\n            }, {\n              id: t\n            }).then(function (t) {\n              e(g.MessageController.trasformJSONMessge(t.data).getActionOn());\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.getPreviousMessagesByTimestamp = function (t, s) {\n          return new Promise(function (e, n) {\n            d.isFalsy(s) ? n(new h.CometChatException(JSON.parse(d.format(JSON.stringify(m.PARAMETER_ERROR.PARAMETER_REQUIRED), \"TIMESTAMP\", \"TIMESTAMP\", \"timestamp\")))) : g.MessageController.getAllMessage(t, s, m.MessageConstatnts.PAGINATION.CURSOR_FILEDS.SENT_AT, m.MessageConstatnts.PAGINATION.AFFIX.PREPEND).then(function (t) {\n              return e(t);\n            }, function (t) {\n              return n(t);\n            });\n          });\n        }, a.getPreviousMessagesById = function (t, s) {\n          return new Promise(function (e, n) {\n            d.isFalsy(s) ? n(new h.CometChatException(JSON.parse(d.format(JSON.stringify(m.PARAMETER_ERROR.PARAMETER_REQUIRED), \"ID\", \"ID\", \"id\")))) : g.MessageController.getAllMessage(t, s, m.MessageConstatnts.PAGINATION.CURSOR_FILEDS.ID, m.MessageConstatnts.PAGINATION.AFFIX.PREPEND).then(function (t) {\n              return e(t);\n            }, function (t) {\n              return n(t);\n            });\n          });\n        }, a.getNextMessagesByTimestamp = function (t, s) {\n          return new Promise(function (e, n) {\n            d.isFalsy(s) ? n(new h.CometChatException(JSON.parse(d.format(JSON.stringify(m.PARAMETER_ERROR.PARAMETER_REQUIRED), \"TIMESTAMP\", \"TIMESTAMP\", \"timestamp\")))) : g.MessageController.getAllMessage(t, s, m.MessageConstatnts.PAGINATION.CURSOR_FILEDS.SENT_AT, m.MessageConstatnts.PAGINATION.AFFIX.APPEND).then(function (t) {\n              return e(t);\n            }, function (t) {\n              return n(t);\n            });\n          });\n        }, a.getNextMessagesById = function (t, s) {\n          return new Promise(function (e, n) {\n            d.isFalsy(s) ? n(new h.CometChatException(JSON.parse(d.format(JSON.stringify(m.PARAMETER_ERROR.PARAMETER_REQUIRED), \"ID\", \"ID\", \"id\")))) : g.MessageController.getAllMessage(t, s, m.MessageConstatnts.PAGINATION.CURSOR_FILEDS.ID, m.MessageConstatnts.PAGINATION.AFFIX.APPEND).then(function (t) {\n              return e(t);\n            }, function (t) {\n              return n(t);\n            });\n          });\n        }, a.getUser = function (t) {\n          return new Promise(function (n, e) {\n            \"object\" == typeof t && t.hasOwnProperty(\"uid\") && (t = t.uid), p.makeApiCall(\"user\", {\n              uid: t\n            }).then(function (t) {\n              var e = _.UsersController.trasformJSONUser(t.data);\n\n              n(e);\n            }).catch(function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.getLoggedinUser = function () {\n          return new Promise(function (e, n) {\n            a.localStorage.get(\"user\").then(function (t) {\n              t ? e(a.user = new u.Me(t)) : p.makeApiCall(\"getMyDetails\").then(function (t) {\n                e(t.data);\n              }, function (t) {\n                n(new h.CometChatException(t.error));\n              }).catch(function (t) {\n                n(t);\n              });\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.blockUsers = function (t) {\n          return new Promise(function (e, n) {\n            d.isFalsy(t) ? n(new h.CometChatException({})) : p.makeApiCall(\"blockUsers\", {}, {\n              blockedUids: t\n            }).then(function (t) {\n              e(t.data);\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.unblockUsers = function (t) {\n          return new Promise(function (e, n) {\n            d.isFalsy(t) ? n(new h.CometChatException({})) : p.makeApiCall(\"unblockUsers\", {}, {\n              blockedUids: t\n            }).then(function (t) {\n              e(t.data);\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.createGroup = function (s) {\n          return new Promise(function (e, n) {\n            if (!(s instanceof C.Group)) {\n              var t = void 0;\n              if (!s.hasOwnProperty(m.GroupConstants.KEYS.GUID)) return void n(new h.CometChatException(N.ERRORS.PARAMETER_MISSING));\n              if (!s.hasOwnProperty(m.GroupConstants.KEYS.NAME)) return void n(new h.CometChatException(N.ERRORS.PARAMETER_MISSING));\n              if (t = new C.Group(s[m.GroupConstants.KEYS.GUID], s[m.GroupConstants.KEYS.NAME], \"\"), s.hasOwnProperty(m.GroupConstants.KEYS.TYPE)) {\n                if (s[m.GroupConstants.KEYS.TYPE].toLocaleLowerCase() == m.GroupType.Password) {\n                  if (!s.hasOwnProperty(m.GroupConstants.KEYS.PASSWORD)) return void n(new h.CometChatException(N.GROUP_CREATION_ERRORS.EMPTY_PASSWORD));\n                  t.setType(m.GROUP_TYPE.PASSWORD), t.setPassword(s[m.GroupConstants.KEYS.PASSWORD]);\n                } else t.setType(s[m.GroupConstants.KEYS.TYPE]);\n              } else t.setType(m.GROUP_TYPE.PUBLIC);\n              s.hasOwnProperty(m.GroupConstants.KEYS.ICON) && t.setIcon(s[m.GroupConstants.KEYS.ICON]), s.hasOwnProperty(m.GroupConstants.KEYS.DESCRIPTION) && t.setDescription(s[m.GroupConstants.KEYS.DESCRIPTION]), s = t;\n            }\n\n            p.makeApiCall(\"createGroup\", {}, s).then(function (t) {\n              K.joinMuc(s), T.GroupsController.trasformJSONGroup(t.data).setHasJoined(!0), e(T.GroupsController.trasformJSONGroup(t.data));\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.getGroup = function (t) {\n          return \"object\" == typeof t && t.hasOwnProperty(\"guid\") && (t = t.guid), new Promise(function (e, n) {\n            p.makeApiCall(\"getGroup\", {\n              guid: t\n            }).then(function (t) {\n              e(T.GroupsController.trasformJSONGroup(t.data));\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.joinGroup = function (t, r, o) {\n          return void 0 === r && (r = m.GroupType.Public), void 0 === o && (o = \"\"), new Promise(function (n, e) {\n            var s;\n            \"object\" == typeof t && (t.hasOwnProperty(m.GroupConstants.KEYS.GUID) ? (t.hasOwnProperty(m.GroupConstants.KEYS.TYPE) && (r = t[m.GroupConstants.KEYS.TYPE], t[m.GroupConstants.KEYS.TYPE].toLocaleLowerCase() === m.GroupType.Password && t.hasOwnProperty(m.GroupConstants.KEYS.PASSWORD) && (o = t[m.GroupConstants.KEYS.PASSWORD])), t = t[m.GroupConstants.KEYS.GUID]) : e(new h.CometChatException(N.ERRORS.PARAMETER_MISSING))), s = d.isFalsy(o) ? new C.Group(t, \"name\", r) : new C.Group(t, \"name\", r, o), p.makeApiCall(\"joinGroup\", s, s).then(function (t) {\n              K.joinMuc(s);\n              var e = T.GroupsController.trasformJSONGroup(t.data[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA][m.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][m.ActionConstatnts.ACTION_KEYS.ENTITY]);\n              e.setHasJoined(!0), n(e);\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.updateGroup = function (s) {\n          return new Promise(function (e, n) {\n            if (!(s instanceof C.Group)) {\n              var t = void 0;\n              if (!s.hasOwnProperty(m.GroupConstants.KEYS.GUID)) return void n(new h.CometChatException(N.ERRORS.PARAMETER_MISSING));\n              t = new C.Group(m.GroupConstants.KEYS.GUID, \"\", \"\"), s.hasOwnProperty(m.GroupConstants.KEYS.TYPE) ? t.setType(s[m.GroupConstants.KEYS.TYPE]) : (s[m.GroupConstants.KEYS.TYPE] = m.GROUP_TYPE.PUBLIC, t.setType[m.GROUP_TYPE.PUBLIC]), s.hasOwnProperty(m.GroupConstants.KEYS.NAME) && t.setName(s[m.GroupConstants.KEYS.NAME]), s.hasOwnProperty(m.GroupConstants.KEYS.ICON) && t.setIcon(s[m.GroupConstants.KEYS.ICON]), s.hasOwnProperty(m.GroupConstants.KEYS.DESCRIPTION) && t.setDescription(s[m.GroupConstants.KEYS.DESCRIPTION]), s = t;\n            }\n\n            p.makeApiCall(\"updateGroup\", s, s).then(function (t) {\n              e(T.GroupsController.trasformJSONGroup(t.data));\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.deleteGroup = function (t) {\n          return new Promise(function (e, n) {\n            p.makeApiCall(\"deleteGroup\", {\n              guid: t\n            }).then(function (t) {\n              e(!0);\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.leaveGroup = function (s) {\n          return new Promise(function (e, n) {\n            p.makeApiCall(\"leaveGroup\", {\n              guid: s\n            }).then(function (t) {\n              K.leaveMuc(s), e(!0);\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.kickGroupMember = function (t, s) {\n          return new Promise(function (e, n) {\n            p.makeApiCall(\"kickGroupMembers\", {\n              guid: t,\n              uid: s\n            }).then(function (t) {\n              e(!0);\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.updateGroupMemberScope = function (t, s, r) {\n          return new Promise(function (e, n) {\n            p.makeApiCall(\"changeScopeOfMember\", {\n              guid: t,\n              uid: s\n            }, {\n              scope: r\n            }).then(function (t) {\n              e(!0);\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.banGroupMember = function (t, s) {\n          return new Promise(function (e, n) {\n            p.makeApiCall(\"banGroupMember\", {\n              guid: t,\n              uid: s\n            }).then(function (t) {\n              e(!0);\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.unbanGroupMember = function (t, s) {\n          return new Promise(function (e, n) {\n            p.makeApiCall(\"unbanGroupMember\", {\n              guid: t,\n              uid: s\n            }).then(function (t) {\n              e(!0);\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.addMembersToGroup = function (s, r, o) {\n          var i = [],\n              a = [],\n              c = [],\n              u = [];\n          return new Promise(function (t, e) {\n            d.isFalsy(r) && d.isFalsy(o) ? e(new h.CometChatException({})) : d.isFalsy(r) || d.isFalsy(o) ? d.isFalsy(r) ? o.map(function (t) {\n              u.push(t.getUid());\n            }) : (r.filter(function (t) {\n              if (t.getScope() == m.GROUP_MEMBER_SCOPE.ADMIN) return !0;\n            }).map(function (t) {\n              i.push(t.getUid());\n            }), r.filter(function (t) {\n              if (t.getScope() == m.GROUP_MEMBER_SCOPE.MODERATOR) return !0;\n            }).map(function (t) {\n              a.push(t.getUid());\n            }), r.filter(function (t) {\n              if (t.getScope() == m.GROUP_MEMBER_SCOPE.PARTICIPANT) return !0;\n            }).map(function (t) {\n              c.push(t.getUid());\n            })) : (r.filter(function (t) {\n              if (t.getScope() == m.GROUP_MEMBER_SCOPE.ADMIN) return !0;\n            }).map(function (t) {\n              i.push(t.getUid());\n            }), r.filter(function (t) {\n              if (t.getScope() == m.GROUP_MEMBER_SCOPE.MODERATOR) return !0;\n            }).map(function (t) {\n              a.push(t.getUid());\n            }), r.filter(function (t) {\n              if (t.getScope() == m.GROUP_MEMBER_SCOPE.PARTICIPANT) return !0;\n            }).map(function (t) {\n              c.push(t.getUid());\n            }), o.map(function (t) {\n              u.push(t.getUid());\n            }));\n            var n = {};\n            d.isFalsy(i) || (n = l({}, n, {\n              admins: i\n            })), d.isFalsy(c) || (n = l({}, n, {\n              participants: c\n            })), d.isFalsy(a) || (n = l({}, n, {\n              moderators: a\n            })), d.isFalsy(u) || (n = l({}, n, {\n              usersToBan: u\n            })), p.makeApiCall(\"addMemebersToGroup\", {\n              guid: s\n            }, n).then(function (e) {\n              var n = {};\n              Object.keys(e.data.admins).map(function (t) {\n                e.data.admins[t][m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS] ? n[t] = m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS : n[t] = e.data.admins[t][m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE];\n              }), Object.keys(e.data.participants).map(function (t) {\n                e.data.participants[t][m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS] ? n[t] = m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS : n[t] = e.data.participants[t][m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE];\n              }), Object.keys(e.data.moderators).map(function (t) {\n                e.data.moderators[t][m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS] ? n[t] = m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS : n[t] = e.data.moderators[t][m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE];\n              }), Object.keys(e.data.usersToBan).map(function (t) {\n                e.data.usersToBan[t][m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS] ? n[t] = m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS : n[t] = e.data.usersToBan[t][m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][m.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE];\n              }), t(n);\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.initiateCall = function (e) {\n          return new Promise(function (n, s) {\n            d.isFalsy(JSON.parse(JSON.stringify(e)).sender) ? d.isFalsy(y.CallController.getInstance().getActiveCall()) ? (e.setStatus(m.CallConstants.CALL_STATUS.INITIATED), p.makeApiCall(\"createCallSession\", {}, e).then(function (t) {\n              var e = g.MessageController.trasformJSONMessge(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);\n              y.CallController.getInstance().initiateCall(e).then(function (t) {\n                n(e);\n              }).catch(function (t) {\n                s(t);\n              });\n            }, function (t) {\n              s(new h.CometChatException(t.error));\n            })) : s(new h.CometChatException(m.CALL_ERROR.ERROR_IN_CALLING)) : y.CallController.getInstance().initiateCall(e).then(function (t) {\n              n(Object.assign(e));\n            }).catch(function (t) {\n              s(t);\n            });\n          });\n        }, a.acceptCall = function (s) {\n          return new Promise(function (n, e) {\n            var t = {};\n            t[m.CallConstants.CALL_KEYS.CALL_STATUS] = m.CallConstants.CALL_STATUS.ONGOING, p.makeApiCall(\"updateCallSession\", {\n              sessionid: s\n            }, t).then(function (t) {\n              var e = g.MessageController.trasformJSONMessge(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);\n              y.CallController.getInstance().onCallStarted(e), n(e);\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.rejectCall = function (t, e) {\n          switch (e) {\n            case m.CallConstants.CALL_STATUS.REJECTED:\n              return this.rejectIncomingCall(t);\n\n            case m.CallConstants.CALL_STATUS.CANCELLED:\n              return this.cancelCall(t);\n\n            case m.CallConstants.CALL_STATUS.BUSY:\n              return this.sendBusyResponse(t);\n\n            default:\n              return this.endCall(t);\n          }\n        }, a.endCall = function (s) {\n          return new Promise(function (n, t) {\n            var e = {};\n            e[m.CallConstants.CALL_KEYS.CALL_STATUS] = m.CallConstants.CALL_STATUS.ENDED, y.CallController.getInstance().getActiveCall().getJoinedAt() && (e[m.CallConstants.CALL_KEYS.CALL_JOINED_AT] = y.CallController.getInstance().getActiveCall().getJoinedAt()), p.makeApiCall(\"updateCallSession\", {\n              sessionid: s\n            }, e).then(function (t) {\n              var e = g.MessageController.trasformJSONMessge(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);\n              y.CallController.getInstance().endCall(), n(e);\n            }, function (t) {\n              d.Logger.log(\"calling Log\", {\n                error: t\n              });\n              var e = y.CallController.getInstance().getActiveCall();\n              e.setStatus(m.CallConstants.CALL_STATUS.ENDED), n(e), y.CallController.getInstance().endCall();\n            });\n          });\n        }, a.getActiveCall = function () {\n          return y.CallController.getInstance().getActiveCall();\n        }, a.startCall = function (t, e, n, s) {\n          y.CallController.getInstance().startCall(e, n, s);\n        }, a.toggleAudio = function () {\n          y.CallController.toggleAudio();\n        }, a.toggleVideo = function () {\n          y.CallController.toggleVideo();\n        }, a.leaveCall = function () {\n          y.CallController.leave();\n        }, a.createCallView = function (t) {\n          return {\n            prop1: this.makeCall,\n            onMessage: function (t) {\n              y.CallController.getInstance().getCallListner()._eventListener.onCallEnded(y.CallController.getInstance().getActiveCall()), a.endCall(y.CallController.getInstance().getActiveCall().getSessionId()).then(function (t) {}).catch(function (t) {});\n            }\n          };\n        }, a.makeCall = function (t, e) {\n          t.setState(function (t) {\n            return l({}, t, {\n              uri: e\n            });\n          });\n        }, a.rejectIncomingCall = function (s) {\n          return new Promise(function (n, e) {\n            var t = {};\n            t[m.CallConstants.CALL_KEYS.CALL_STATUS] = m.CallConstants.CALL_STATUS.REJECTED, p.makeApiCall(\"updateCallSession\", {\n              sessionid: s\n            }, t).then(function (t) {\n              var e = g.MessageController.trasformJSONMessge(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);\n              n(e);\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.cancelCall = function (s) {\n          return new Promise(function (n, e) {\n            var t = {};\n            t[m.CallConstants.CALL_KEYS.CALL_STATUS] = m.CallConstants.CALL_STATUS.CANCELLED, p.makeApiCall(\"updateCallSession\", {\n              sessionid: s\n            }, t).then(function (t) {\n              var e = g.MessageController.trasformJSONMessge(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);\n              y.CallController.getInstance().endCallSession(), n(e);\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.sendBusyResponse = function (s) {\n          return new Promise(function (n, e) {\n            var t = {};\n            t[m.CallConstants.CALL_KEYS.CALL_STATUS] = m.CallConstants.CALL_STATUS.BUSY, p.makeApiCall(\"updateCallSession\", {\n              sessionid: s\n            }, t).then(function (t) {\n              var e = g.MessageController.trasformJSONMessge(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);\n              n(e);\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.sendUnansweredResponse = function (s) {\n          return new Promise(function (n, e) {\n            var t = {};\n            t[m.CallConstants.CALL_KEYS.CALL_STATUS] = m.CallConstants.CALL_STATUS.UNANSWERED, p.makeApiCall(\"updateCallSession\", {\n              sessionid: s\n            }, t).then(function (t) {\n              var e = g.MessageController.trasformJSONMessge(t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);\n              E.XMPPConnectionHelper.getInstance().trigerMessageHandler(Object.assign(e, t[m.ResponseConstants.RESPONSE_KEYS.KEY_DATA])), n(e);\n            }, function (t) {\n              e(new h.CometChatException(t.error));\n            });\n          });\n        }, a.addMessageListener = function (t, e) {\n          K.addMessageEventListener(t, e);\n        }, a.removeMessageListener = function (t) {\n          K.removeMessageEventListener(t);\n        }, a.addCallListener = function (t, e) {\n          K.addCallEventListener(t, e);\n        }, a.removeCallListener = function (t) {\n          K.removeCallEventListener(t);\n        }, a.addUserListener = function (t, e) {\n          K.addUserEventListener(t, e);\n        }, a.removeUserListener = function (t) {\n          K.removeUserEventListener(t);\n        }, a.addGroupListener = function (t, e) {\n          K.addGroupEventListener(t, e);\n        }, a.removeGroupListener = function (t) {\n          K.removeGroupEventListener(t);\n        }, a.generateAuthToken = function (t) {\n          return new Promise(function (e, n) {\n            p.makeApiCall(\"authToken\", {\n              uid: t\n            }).then(function (t) {\n              e(t.data);\n            }).catch(function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.XMPPLogin = function (e, n, s) {\n          var r = this;\n          K.XMMPLogin(e.getUid(), e.getWsChannel().secret, function (t) {\n            switch (t) {\n              case o.Strophe.Status.CONNFAIL:\n                s(new h.CometChatException(N.LOGIN_ERROR.XMPP_CONNECTION_FAIL));\n                break;\n\n              case o.Strophe.Status.CONNECTING:\n                break;\n\n              case o.Strophe.Status.CONNECTED:\n                r.localStorage.set(\"user\", e), n(new u.User(e));\n                break;\n\n              case o.Strophe.Status.DISCONNECTED:\n                break;\n\n              case o.Strophe.Status.DISCONNECTING:\n                !1, d.Logger.info(\"Connection\", \"Disconnecting\");\n                break;\n\n              case o.Strophe.Status.AUTHFAIL:\n                s(new h.CometChatException(N.LOGIN_ERROR.XMPP_CONNECTION_FAIL));\n            }\n          });\n        }, a.getAppSettings = function () {\n          return new Promise(function (e, n) {\n            p.makeApiCall(\"appSettings\").then(function (t) {\n              s.LocalStorage.getInstance().set(\"app_settings\", t.data), e(t.data);\n            }, function (t) {\n              n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.logout = function () {\n          var s = this;\n          return new Promise(function (e, n) {\n            p.makeApiCall(\"userLogout\").then(function (t) {\n              s.clearCache(), s.apiKey = void 0, s.user = void 0, s.authToken = void 0, E.XMPPConnectionHelper.getInstance().XMPPDisconnect(), e(t.data);\n            }, function (t) {\n              s.clearCache(), s.apiKey = void 0, s.user = void 0, s.authToken = void 0, E.XMPPConnectionHelper.getInstance().XMPPDisconnect(), new h.CometChatException(t.error).code == N.SERVER_ERRORS.AUTH_ERR.code ? e({}) : n(new h.CometChatException(t.error));\n            });\n          });\n        }, a.isExtensionEnabled = function (n) {\n          return new Promise(function (e) {\n            G.ExtensionController.getExtensionList().then(function (t) {\n              Object.keys(t).map(function (t) {\n                t == n && e(!0);\n              }), e(!1);\n            }, function (t) {\n              d.Logger.log(\"error while fetching exntension list\", t), e(!1);\n            });\n          });\n        }, a.clearCache = function () {\n          this.messagesStore.clearStore(), this.userStore.clearStore(), this.localStorage.clearStore();\n        }, a.typingTimer = function () {\n          setInterval(function () {\n            D.TypingNotificationController.clearTimer();\n          }, 500);\n        }, a.initialzed = !1, a.isNative = !1, a.CometChatException = h.CometChatException, a.TextMessage = r.TextMessage, a.MediaMessage = f.MediaMessage, a.CustomMessage = w.CustomMessage, a.Action = R.Action, a.Call = I.Call, a.TypingIndicator = L.TypingIndicator, a.Group = C.Group, a.AppUser = u.User, a.User = u.User, a.GroupMember = U.GroupMember, a.USER_STATUS = {\n          ONLINE: m.PresenceConstatnts.STATUS.ONLINE,\n          OFFLINE: m.PresenceConstatnts.STATUS.OFFLINE\n        }, a.MessagesRequest = P.DefaultMessagesRequest, a.MessagesRequestBuilder = P.DefaultMessagesRequestBuilder, a.UsersRequest = O.UsersRequest, a.UsersRequestBuilder = O.UsersRequestBuilder, a.BlockedUsersRequest = F.BlockedUsersRequest, a.BlockedUsersRequestBuilder = F.BlockedUsersRequestBuilder, a.GroupsRequest = v.GroupsRequest, a.GroupsRequestBuilder = v.GroupsRequestBuilder, a.GroupMembersRequest = M.GroupMembersRequest, a.GroupMembersRequestBuilder = M.GroupMembersRequestBuilder, a.BannedMembersRequest = M.GroupMembersRequest, a.BannedMembersRequestBuilder = M.GroupOutCastMembersRequestBuilder, a.MessageListener = A.MessageEventListener, a.UserListener = A.UserEventListener, a.GroupListener = A.GroupEventListener, a.OngoingCallListener = A.UserCallEventListener, a.CallListener = A.CallEventListener, a.MESSAGE_TYPE = m.MessageConstatnts.TYPE, a.CATEGORY_MESSAGE = m.MessageConstatnts.CATEGORY.MESSAGE, a.CATEGORY_ACTION = m.MessageConstatnts.CATEGORY.ACTION, a.CATEGORY_CALL = m.MessageConstatnts.CATEGORY.CALL, a.ACTION_TYPE = m.ActionConstatnts.ACTIONS, a.CALL_TYPE = m.CallConstants.CALL_TYPE, a.RECEIVER_TYPE = m.MessageConstatnts.RECEIVER_TYPE, a.CALL_STATUS = m.CallConstants.CALL_STATUS, a.CallController = y.CallController, a.GROUP_MEMBER_SCOPE = m.GROUP_MEMBER_SCOPE, a.GROUP_TYPE = m.GROUP_TYPE, a.MESSAGE_REQUEST = m.MessageConstatnts.PAGINATION.CURSOR_FILEDS, a.CometChatExtension = Y.CometChatExtension, a.ExtensionManager = x.ExtensionManager, a.isCall = !1, a.endpointFactory = new t.EndpointFactory(), a.startTypingCount = 0, a.endTypingCount = 0, a;\n      }();\n\n      B.CometChat = a;\n    }).call(this, k(21));\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = function (t) {\n      this.code = t.code, this.name = t.name, this.message = t.message, this.details = t.details;\n    };\n\n    e.CometChatException = s;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n    var c = n(37),\n        u = n(2),\n        i = n(1);\n\n    function l(e, t, n, s, r) {\n      var o;\n      return void 0 === e && (e = \"\"), void 0 === t && (t = \"GET\"), void 0 === n && (n = {}), void 0 === s && (s = {}), n = i.isFalsy(n) ? void 0 : (\"GET\" == t && (e += \"?\", Object.keys(n).map(function (t) {\n        e = e + t + \"=\" + n[t] + \"&\";\n      }), n = void 0), r && (o = new FormData(), Object.keys(n).map(function (t) {\n        \"data\" != t ? o.append(t, n[t]) : o.append(t, JSON.stringify(n[t]));\n      })), JSON.stringify(n)), fetch(e, {\n        method: t,\n        mode: \"cors\",\n        cache: \"no-cache\",\n        headers: s,\n        redirect: \"follow\",\n        referrer: \"no-referrer\",\n        body: r ? o : n\n      });\n    }\n\n    e.makeApiCall = function (r, t, o, i) {\n      void 0 === r && (r = \"\"), void 0 === t && (t = {}), void 0 === o && (o = {});\n      var a = u.CometChat.getInstance();\n      return new Promise(function (n, s) {\n        c.getEndPoint(r, t).then(function (t) {\n          var e = {\n            appId: u.CometChat.getAppId(),\n            Accept: \"application/json\"\n          };\n          i || (e[\"Content-Type\"] = \"application/json\"), t.hasOwnProperty(\"isAdminApi\") && t.isAdminApi ? a.getApiKey() ? e.apiKey = a.getApiKey() : s({\n            error: {\n              code: \"API_KEY_NOT_SET\",\n              message: \"An apiKey is needed to use the \" + r + \" api.\",\n              name: \"API_KEY_NOT_SET\"\n            }\n          }) : a.getAuthToken() ? e.authToken = a.getAuthToken() : s({\n            error: {\n              code: \"USER_NOT_LOGED_IN\",\n              message: \"An authToken is need to use the \" + r + \" api.\",\n              name: \"user not logged in\"\n            }\n          }), l(t.endpoint, t.method, o, e, i).then(function (t) {\n            return t.json();\n          }).then(function (t) {\n            t.hasOwnProperty(\"data\") ? (t.data.hasOwnProperty(\"authToken\") && u.CometChat.setAuthToken(t.data.authToken), n(t)) : s(t);\n          }).catch(function (t) {\n            return s;\n          });\n        }).catch(function (t) {\n          return s;\n        });\n      });\n    }, e.makeAdminApiCall = function (r, t, o, i) {\n      void 0 === r && (r = \"\"), void 0 === t && (t = {}), void 0 === o && (o = {});\n      var a = u.CometChat.getInstance();\n      return new Promise(function (n, s) {\n        c.getEndPoint(r, t).then(function (t) {\n          var e = {\n            appId: u.CometChat.getAppId(),\n            Accept: \"application/json\"\n          };\n          i || (e[\"Content-Type\"] = \"application/json\"), t.hasOwnProperty(\"isAdminApi\") && t.isAdminApi ? a.getApiKey() ? e.apiKey = a.getApiKey() : s({\n            error: \"An apiKey is need to use the \" + r + \" api.\"\n          }) : a.getAuthToken() ? e.authToken = a.getAuthToken() : s({\n            error: \"An authToken is need to use the \" + r + \" api.\"\n          }), l(t.endpoint, t.method, o, e, i).then(function (t) {\n            return t.json();\n          }).then(function (t) {\n            t.hasOwnProperty(\"data\") ? (t.data.hasOwnProperty(\"authToken\") && u.CometChat.setAuthToken(t.data.authToken), n(t)) : s(t);\n          }).catch(function (t) {\n            return s;\n          });\n        }).catch(function (t) {\n          return s;\n        });\n      });\n    }, e.postData = l;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var s,\n        r = this && this.__extends || (s = function (t, e) {\n      return (s = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (t, e) {\n        t.__proto__ = e;\n      } || function (t, e) {\n        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n      })(t, e);\n    }, function (t, e) {\n      function n() {\n        this.constructor = t;\n      }\n\n      s(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n    });\n    e.__esModule = !0;\n\n    var o = function () {\n      function t(t) {\n        this.hasBlockedMe = !1, this.blockedByMe = !1, this.uid = t.uid, this.name = t.name, this.authToken = t.authToken, this.avatar = t.avatar, this.credits = t.credits, this.email = t.email, this.lastActiveAt = t.lastActiveAt, this.link = t.link, this.metadata = t.metadata, this.role = t.role, this.statusMessage = t.statusMessage;\n      }\n\n      return t.prototype.getUid = function () {\n        return this.uid;\n      }, t.prototype.setUid = function (t) {\n        this.uid = t;\n      }, t.prototype.getName = function () {\n        return this.name;\n      }, t.prototype.setName = function (t) {\n        this.name = t;\n      }, t.prototype.getAuthToken = function () {\n        return this.authToken;\n      }, t.prototype.setAuthToken = function (t) {\n        this.authToken = t;\n      }, t.prototype.getAvatar = function () {\n        return this.avatar;\n      }, t.prototype.setAvatar = function (t) {\n        this.avatar = t;\n      }, t.prototype.getCredits = function () {\n        return this.credits;\n      }, t.prototype.setCredits = function (t) {\n        this.credits = t;\n      }, t.prototype.getEmail = function () {\n        return this.email;\n      }, t.prototype.setEmail = function (t) {\n        this.email = t;\n      }, t.prototype.getLastActiveAt = function () {\n        return this.lastActiveAt;\n      }, t.prototype.setLastActiveAt = function (t) {\n        this.lastActiveAt = t;\n      }, t.prototype.getLink = function () {\n        return this.link;\n      }, t.prototype.setLink = function (t) {\n        return this.link = t;\n      }, t.prototype.getMetadata = function () {\n        return this.metadata;\n      }, t.prototype.setMetadata = function (t) {\n        this.metadata = t;\n      }, t.prototype.getRole = function () {\n        return this.role;\n      }, t.prototype.setRole = function (t) {\n        this.role = t;\n      }, t.prototype.getStatus = function () {\n        return this.status;\n      }, t.prototype.setStatus = function (t) {\n        this.status = t;\n      }, t.prototype.getStatusMessage = function () {\n        return this.statusMessage;\n      }, t.prototype.setStatusMessage = function (t) {\n        this.statusMessage = t;\n      }, t.prototype.setBlockedByMe = function (t) {\n        this.blockedByMe = t;\n      }, t.prototype.getBlockedByMe = function () {\n        return this.blockedByMe;\n      }, t.prototype.setJasBlockedMe = function (t) {\n        this.hasBlockedMe = t;\n      }, t.prototype.getHasBlockedMeMe = function () {\n        return this.hasBlockedMe;\n      }, t;\n    }(),\n        i = function (n) {\n      function t(t) {\n        var e = n.call(this, t) || this;\n        return e.wsChannel = t.wsChannel, e;\n      }\n\n      return r(t, n), t.prototype.getWsChannel = function () {\n        return this.wsChannel;\n      }, t;\n    }(e.User = o);\n\n    e.Me = i;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = n(1),\n        r = n(0),\n        o = n(11),\n        i = n(2),\n        a = function () {\n      function t(t) {\n        this.store = r.constants.DEFAULT_STORE, i.CometChat.isNative || (s.isFalsy(t) || (this.store = t), this.localStore = o.createInstance({\n          name: s.format(r.LOCAL_STORE.STORE_STRING, i.CometChat.getAppId(), r.LOCAL_STORE.COMMON_STORE)\n        }), this.localStore.setDriver([o.LOCALSTORAGE, o.INDEXEDDB, o.WEBSQL]));\n      }\n\n      return t.getInstance = function () {\n        return null == t.localStorage && (t.localStorage = new t()), t.localStorage;\n      }, t.prototype.set = function (t, e) {\n        return this.localStore.setItem(t, JSON.stringify(e));\n      }, t.prototype.remove = function (t) {\n        this.localStore.removeItem(t);\n      }, t.prototype.get = function (t) {\n        var s = this;\n        return new Promise(function (n, e) {\n          s.localStore.getItem(t).then(function (e) {\n            try {\n              n(JSON.parse(e));\n            } catch (t) {\n              n(e);\n            }\n          }, function (t) {\n            e(t);\n          });\n        });\n      }, t.prototype.clearStore = function () {\n        return this.localStore.clear();\n      }, t.prototype.clear = function (t) {}, t.prototype.selectStore = function (t) {\n        this.store = t;\n      }, t.localStorage = null, t;\n    }();\n\n    e.LocalStorage = a;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n    var s = n(0),\n        r = n(1),\n        o = n(2);\n    e.getUidFromJid = function (t) {\n      return t.substring(t.lastIndexOf(\"]\") + 1, t.lastIndexOf(\"@\"));\n    }, e.getappIdFromJid = function (t) {\n      return t.substring(t.lastIndexOf(\"[\") + 1, t.lastIndexOf(\"]\"));\n    }, e.getmessageIdFromStanzaId = function (t) {\n      return t ? t.substring(t.lastIndexOf(\"]\") + 1, t.length) : t;\n    }, e.parseHTML = function (e) {\n      try {\n        return e.textContent;\n      } catch (t) {\n        return e;\n      }\n    }, e.getJidFromUid = function (n) {\n      return new Promise(function (e, t) {\n        r.getAppSettings().then(function (t) {\n          e(r.format(s.XMPP.bare_jid_string, o.CometChat.getAppId(), n, t[s.APP_SETTINGS.KEYS.CHAT_HOST]));\n        }, function (t) {\n          e(r.format(s.XMPP.bare_jid_string, o.CometChat.getAppId(), n, s.XMPP.host));\n        });\n      });\n    }, e.getGUIDFromJID = function (t) {\n      return t.substring(t.indexOf(\"]\") + 1, t.indexOf(\"@\"));\n    }, e.getGroupJidFromGUID = function (n) {\n      return new Promise(function (e, t) {\n        r.getAppSettings().then(function (t) {\n          e(r.format(s.XMPP.muc_jid_string, o.CometChat.getAppId(), n, t[s.APP_SETTINGS.KEYS.GROUP_SERVICE], t[s.APP_SETTINGS.KEYS.CHAT_HOST]));\n        }, function (t) {\n          e(r.format(s.XMPP.muc_jid_string, o.CometChat.getAppId(), n, o.CometChat.getAppId(), s.XMPP.host));\n        });\n      });\n    }, e.getFullJidForGroup = function (t) {\n      return t.substring(t.indexOf(\"/\") + 1);\n    }, e.getGroupJidFullGroupJid = function (t) {\n      return t.substring(0, t.indexOf(\"/\"));\n    };\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var i = this && this.__awaiter || function (o, i, a, c) {\n      return new (a || (a = Promise))(function (t, e) {\n        function n(t) {\n          try {\n            r(c.next(t));\n          } catch (t) {\n            e(t);\n          }\n        }\n\n        function s(t) {\n          try {\n            r(c.throw(t));\n          } catch (t) {\n            e(t);\n          }\n        }\n\n        function r(e) {\n          e.done ? t(e.value) : new a(function (t) {\n            t(e.value);\n          }).then(n, s);\n        }\n\n        r((c = c.apply(o, i || [])).next());\n      });\n    },\n        u = this && this.__generator || function (n, s) {\n      var r,\n          o,\n          i,\n          t,\n          a = {\n        label: 0,\n        sent: function () {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return t = {\n        next: e(0),\n        throw: e(1),\n        return: e(2)\n      }, \"function\" == typeof Symbol && (t[Symbol.iterator] = function () {\n        return this;\n      }), t;\n\n      function e(e) {\n        return function (t) {\n          return function (e) {\n            if (r) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) try {\n              if (r = 1, o && (i = 2 & e[0] ? o.return : e[0] ? o.throw || ((i = o.return) && i.call(o), 0) : o.next) && !(i = i.call(o, e[1])).done) return i;\n\n              switch (o = 0, i && (e = [2 & e[0], i.value]), e[0]) {\n                case 0:\n                case 1:\n                  i = e;\n                  break;\n\n                case 4:\n                  return a.label++, {\n                    value: e[1],\n                    done: !1\n                  };\n\n                case 5:\n                  a.label++, o = e[1], e = [0];\n                  continue;\n\n                case 7:\n                  e = a.ops.pop(), a.trys.pop();\n                  continue;\n\n                default:\n                  if (!(i = 0 < (i = a.trys).length && i[i.length - 1]) && (6 === e[0] || 2 === e[0])) {\n                    a = 0;\n                    continue;\n                  }\n\n                  if (3 === e[0] && (!i || e[1] > i[0] && e[1] < i[3])) {\n                    a.label = e[1];\n                    break;\n                  }\n\n                  if (6 === e[0] && a.label < i[1]) {\n                    a.label = i[1], i = e;\n                    break;\n                  }\n\n                  if (i && a.label < i[2]) {\n                    a.label = i[2], a.ops.push(e);\n                    break;\n                  }\n\n                  i[2] && a.ops.pop(), a.trys.pop();\n                  continue;\n              }\n\n              e = s.call(n, a);\n            } catch (t) {\n              e = [6, t], o = 0;\n            } finally {\n              r = i = 0;\n            }\n\n            if (5 & e[0]) throw e[1];\n            return {\n              value: e[0] ? e[1] : void 0,\n              done: !0\n            };\n          }([e, t]);\n        };\n      }\n    };\n\n    e.__esModule = !0;\n\n    var l = n(1),\n        d = n(38),\n        h = n(2),\n        s = n(16),\n        p = n(9),\n        E = n(0),\n        r = n(26),\n        f = (n(42), n(43), n(18)),\n        g = n(7),\n        o = n(44),\n        _ = n(19),\n        a = n(27),\n        m = n(6),\n        C = n(28),\n        T = n(20),\n        S = n(29),\n        A = n(15),\n        c = function () {\n      function c() {\n        this.messageHandlers = [], this.userHandlers = [], this.callHandlers = [], this.groupHandlers = [], this.iqHandlers = [];\n      }\n\n      return c.getInstance = function () {\n        return null != this.xMPPConnectionHelper && null != this.xMPPConnectionHelper || (this.xMPPConnectionHelper = new c()), this.xMPPConnectionHelper;\n      }, c.prototype.XMPPConnect = function (n) {\n        var s = this;\n        return new Promise(function (e, t) {\n          l.isFalsy(n) && (n = c.XMPP_BIND_URL), m.LocalStorage.getInstance().get(E.APP_SETTINGS.APP_SETTINGS).then(function (t) {\n            l.isFalsy(t) ? l.getAppSettings().then(function (t) {\n              c.XMPP_BIND_URL = \"wss://\" + t[E.APP_SETTINGS.KEYS.CHAT_HOST] + \":\" + t[E.APP_SETTINGS.KEYS.CHAT_HTTPS_BIND_PORT] + E.XMPP.bind_url, s.connection = new d.Strophe.Connection(c.XMPP_BIND_URL), e(!0);\n            }) : (c.XMPP_BIND_URL = \"wss://\" + t[E.APP_SETTINGS.KEYS.CHAT_HOST] + \":\" + t[E.APP_SETTINGS.KEYS.CHAT_HTTPS_BIND_PORT] + E.XMPP.bind_url, s.connection = new d.Strophe.Connection(c.XMPP_BIND_URL), e(!0));\n          });\n        });\n      }, c.prototype.XMPPDisconnect = function () {\n        this.connection && (this.connection.flush(), this.connection.disconnect());\n      }, c.prototype.XMMPLogin = function (e, n, s) {\n        var a = this;\n        void 0 === n && (n = E.XMPP.deafult_password), this.XMPPConnect().then(function (t) {\n          a.connection.connected ? s(d.Strophe.Status.CONNECTED) : a.connection.connect(l.format(E.XMPP.jid_string, h.CometChat.getAppId(), e, c.XMPP_HOST, E.XMPP.xmpp_resource), n, function (t) {\n            l.isFalsy(s) || s(t), t == d.Strophe.Status.CONNECTED && (a.connection.sendPresence(d.$pres().c(\"priority\").t(\"1\").up().c(\"status\").t(\"online\")), a.connection.muc.init(a.connection), a.connection.vcard.init(a.connection), a.connection.chatstates.init(a.connection), a.connection.receipts.init(a.connection), a.connection.muc.join(l.format(E.XMPP.muc_jid_string, h.CometChat.getAppId(), \"somegroup\", \"call\", E.XMPP.host), a.connection.jid, null, null, null, null, 0, null), m.LocalStorage.getInstance().get(E.APP_SETTINGS.APP_SETTINGS).then(function (t) {\n              l.isFalsy(t) ? l.getAppSettings().then(function (t) {\n                a.connection.muc.listRooms(h.CometChat.getAppId() + \".\" + t[E.APP_SETTINGS.KEYS.CHAT_HOST], function (t) {\n                  var e = t.getElementsByTagName(\"item\");\n                  (e = Array.prototype.slice.call(e)).map(function (t) {\n                    a.connection.muc.join(t.getAttribute(\"jid\"), a.connection.jid);\n                  });\n                });\n              }) : a.connection.muc.listRooms(h.CometChat.getAppId() + \".\" + t[E.APP_SETTINGS.KEYS.CHAT_HOST], function (t) {\n                var e = t.getElementsByTagName(\"item\");\n                (e = Array.prototype.slice.call(e)).map(function (t) {\n                  a.connection.muc.join(t.getAttribute(\"jid\"), a.connection.jid, null, null, null, null, 0, null);\n                });\n              });\n            }), a.connection.send(d.$iq({\n              from: d.Strophe.getBareJidFromJid(a.connection.jid),\n              id: \"enable1\",\n              type: \"set\"\n            }).c(\"enable\", {\n              xmlns: \"urn:xmpp:carbons:2\"\n            })), a.connection.addHandler(function (t) {\n              if (!(0 < t.getElementsByTagName(\"x\").length)) {\n                var n = r.PresenceController.transformPresence(t);\n                a.getUsersVCard(n.getUid(), function (e) {\n                  l.isFalsy(e.getUid()) || a.userHandlers.map(function (t) {\n                    if (t) switch (e.setLastActiveAt(n.getLastActiveAt()), n.getStatus()) {\n                      case E.PresenceConstatnts.STATUS.ONLINE:\n                        e.setStatus(E.PresenceConstatnts.STATUS.ONLINE), l.isFalsy(t._eventListener.onUserOnline) || t._eventListener.onUserOnline(e);\n                        break;\n\n                      default:\n                        e.setStatus(E.PresenceConstatnts.STATUS.OFFLINE), l.isFalsy(t._eventListener.onUserOffline) || t._eventListener.onUserOffline(e);\n                    }\n                  });\n                });\n              }\n\n              return !0;\n            }, null, \"presence\"), a.connection.addHandler(function (t) {\n              var e = t.getElementsByTagName(\"presence\");\n              return 0 < (e = Array.prototype.slice.call(e)).length && a.iqHandlers.map(function (t) {\n                t._callback(r.PresenceController.transformPresences(e));\n              }), !0;\n            }, null, \"iq\"), a.connection.addHandler(function (o) {\n              var t;\n\n              try {\n                try {\n                  if (t = p.MessageController.trasformXMPPMessage(o), l.isFalsy(t)) {\n                    if (p.MessageController.isDeliveryReceipt(o)) o.getAttribute(E.MessageConstatnts.XMPP_KEYS.TYPE) == E.MessageConstatnts.XMPP_KEYS.TYPE_GROUP && g.getFullJidForGroup(o.getAttribute(E.MessageConstatnts.XMPP_KEYS.FROM)) == c.getInstance().connection.jid ? o = null : a.publishDeliveryReceipt(o);else {\n                      if (!p.MessageController.isReadRceipt(o)) return !0;\n                      o.getAttribute(E.MessageConstatnts.XMPP_KEYS.TYPE) == E.MessageConstatnts.XMPP_KEYS.TYPE_GROUP && g.getFullJidForGroup(o.getAttribute(E.MessageConstatnts.XMPP_KEYS.FROM)) == c.getInstance().connection.jid ? o = null : a.publishReadReceipt(o);\n                    }\n                  } else o.getAttribute(E.MessageConstatnts.XMPP_KEYS.TYPE) == E.MessageConstatnts.XMPP_KEYS.TYPE_GROUP && g.getFullJidForGroup(o.getAttribute(E.MessageConstatnts.XMPP_KEYS.FROM)) == c.getInstance().connection.jid ? o = null : p.MessageController.checkIfCabon(o) || a.connection.receipts._processReceipt(o, t.getId());\n                  o = o.getAttribute(E.MessageConstatnts.XMPP_KEYS.TYPE) == E.MessageConstatnts.XMPP_KEYS.TYPE_GROUP && g.getFullJidForGroup(o.getAttribute(E.MessageConstatnts.XMPP_KEYS.FROM)) == c.getInstance().connection.jid ? null : t;\n                } catch (t) {\n                  return l.Logger.error(\"Error in processing incoming message\", {\n                    e: t,\n                    message: o\n                  }), !0;\n                }\n\n                if (!l.isFalsy(o)) {\n                  try {\n                    T.MessageListnerMaping.getInstance().set(\"all\", o.id);\n                  } catch (t) {\n                    l.Logger.error(\"Error in storing  incoming message id\", {\n                      e: t\n                    });\n                  }\n\n                  a.messageHandlers.map(function (r) {\n                    return i(a, void 0, void 0, function () {\n                      var e, n, s;\n                      return u(this, function (t) {\n                        switch (t.label) {\n                          case 0:\n                            return t.trys.push([0, 5,, 6]), r ? o instanceof f.Action ? [3, 4] : [3, 1] : [3, 4];\n\n                          case 1:\n                            return o instanceof _.Call ? [3, 4] : [3, 2];\n\n                          case 2:\n                            e = o;\n\n                            try {\n                              T.MessageListnerMaping.getInstance().set(r._name, o.id);\n                            } catch (t) {}\n\n                            return n = p.MessageController.trasformJSONMessge(e), [4, A.ExtensionController.hookOnMessageReceived(n)];\n\n                          case 3:\n                            switch ((e = t.sent()).getType()) {\n                              case E.MessageConstatnts.TYPE.TEXT:\n                                l.isFalsy(r._eventListener.onTextMessageReceived) || r._eventListener.onTextMessageReceived(e);\n                                break;\n\n                              case E.MessageConstatnts.TYPE.CUSTOM:\n                                l.isFalsy(r._eventListener.onCustomMessageReceived) || r._eventListener.onCustomMessageReceived(e);\n                                break;\n\n                              default:\n                                e.getCategory() == E.MessageCategory.CUSTOM ? l.isFalsy(r._eventListener.onCustomMessageReceived) || r._eventListener.onCustomMessageReceived(o) : l.isFalsy(r._eventListener.onMediaMessageReceived) || r._eventListener.onMediaMessageReceived(o);\n                            }\n\n                            t.label = 4;\n\n                          case 4:\n                            return [3, 6];\n\n                          case 5:\n                            return s = t.sent(), l.Logger.error(\"Error in processing incoming message\", {\n                              e: s\n                            }), [3, 6];\n\n                          case 6:\n                            return [2];\n                        }\n                      });\n                    });\n                  }), o instanceof _.Call && (l.Logger.info(\"processing incoming call \", {\n                    message: o\n                  }), a.publishCallEvents(o)), o instanceof f.Action && (l.Logger.info(\"processing incoming group actions \", {\n                    message: o\n                  }), a.publishActionEvents(o));\n                }\n              } catch (t) {\n                l.Logger.info(\"Error in message processing\", {\n                  error: t\n                });\n              }\n\n              return !0;\n            }, null, \"message\"), a.connection.addHandler(function (t) {\n              try {\n                if (0 < t.getElementsByTagName(\"error\").length) return l.Logger.info(\"Processing incoming message\", t), !0;\n                var e,\n                    n = t.getElementsByTagName(\"composing\"),\n                    s = t.getElementsByTagName(\"paused\"),\n                    r = t.getAttribute(\"from\"),\n                    o = t.getAttribute(\"type\");\n                if (t.getElementsByTagName(\"body\")[0] && (e = unescape(g.parseHTML(t.getElementsByTagName(\"body\")[0])).trim().toString()), 0 < n.length || 0 < s.length) switch (o) {\n                  case E.XMPP.CONVERSATION.TYPE.CHAT:\n                    var i = new C.TypingIndicator(g.getUidFromJid(a.connection.jid), E.MessageConstatnts.RECEIVER_TYPE.USER);\n                    a.getUsersVCard(g.getUidFromJid(r), function (t) {\n                      i.setSender(t), e && i.setMetadata(e), 0 < n.length && S.TypingNotificationController.addIncomingTypingStarted(i), 0 < s.length && S.TypingNotificationController.removeIncomingTypingStarted(i), a.messageHandlers.map(function (t) {\n                        0 < n.length && t._eventListener.onTypingStarted && t._eventListener.onTypingStarted(i), 0 < s.length && t._eventListener.onTypingEnded && t._eventListener.onTypingEnded(i);\n                      });\n                    });\n                    break;\n\n                  case E.XMPP.CONVERSATION.TYPE.GROUP_CHAT:\n                    if (g.getFullJidForGroup(t.getAttribute(E.MessageConstatnts.XMPP_KEYS.FROM)) == c.getInstance().connection.jid) return !(t = null);\n                    i = new C.TypingIndicator(g.getGUIDFromJID(r), E.MessageConstatnts.RECEIVER_TYPE.GROUP), a.getUsersVCard(g.getUidFromJid(r), function (t) {\n                      i.setSender(t), e && i.setMetadata(e), 0 < n.length && S.TypingNotificationController.addIncomingTypingStarted(i), 0 < s.length && S.TypingNotificationController.removeIncomingTypingStarted(i), a.messageHandlers.map(function (t) {\n                        0 < n.length && t._eventListener.onTypingStarted && t._eventListener.onTypingStarted(i), 0 < s.length && t._eventListener.onTypingEnded && t._eventListener.onTypingEnded(i);\n                      });\n                    });\n                }\n              } catch (t) {\n                l.Logger.error(\"error in message processing\", {\n                  error: t\n                });\n              }\n\n              return !0;\n            }, d.Strophe.NS.CHATSTATES, \"message\"));\n          });\n        });\n      }, c.prototype.getPresenceInfo = function (n, e) {\n        var s = this,\n            t = \"somename\" + new Date().getTime();\n        this.addIqHandler(t, function (t) {\n          e(t);\n        }), l.getAppSettings().then(function (t) {\n          var e = d.$iq({\n            from: s.connection.jid,\n            id: \"CC^COMETCHAT-PRESENCE\",\n            type: \"get\",\n            to: t[E.APP_SETTINGS.KEYS.CHAT_HOST]\n          }).c(\"query\", {\n            xmlns: \"jabber:iq:presencereq\",\n            action: \"presence\"\n          }).t(JSON.stringify(n));\n          s.connection.send(e);\n        }, function (t) {\n          l.Logger.error(\"getPresenceInfo\", t);\n          var e = d.$iq({\n            from: s.connection.jid,\n            id: \"CC^COMETCHAT-PRESENCE\",\n            type: \"get\",\n            to: E.XMPP.host\n          }).c(\"query\", {\n            xmlns: \"jabber:iq:presencereq\",\n            action: \"presence\"\n          }).t(JSON.stringify(n));\n          s.connection.send(e);\n        });\n      }, c.prototype.sendTypingStarted = function (t, e, n) {\n        if (void 0 === e && (e = E.XMPP.CONVERSATION.TYPE.CHAT), t) {\n          switch (e) {\n            case E.XMPP.CONVERSATION.TYPE.CHAT:\n            case E.XMPP.CONVERSATION.TYPE.GROUP_CHAT:\n          }\n\n          this.connection.chatstates.sendComposing(t, e, n);\n        }\n      }, c.prototype.sendTypingPaused = function (t, e, n) {\n        if (void 0 === e && (e = E.XMPP.CONVERSATION.TYPE.CHAT), t) {\n          switch (e) {\n            case E.XMPP.CONVERSATION.TYPE.CHAT:\n            case E.XMPP.CONVERSATION.TYPE.GROUP_CHAT:\n          }\n\n          this.connection.chatstates.sendPaused(t, e, n);\n        }\n      }, c.prototype.addMessageEventListener = function (e, t) {\n        this.messageHandlers = this.messageHandlers.filter(function (t) {\n          return t._name != e;\n        }), this.messageHandlers = this.messageHandlers.concat([new s.MessageListener(e, t)]), T.MessageListnerMaping.getInstance().get(e).then(function (t) {\n          l.isFalsy(t) && T.MessageListnerMaping.getInstance().set(e, \"0\");\n        });\n      }, c.prototype.removeMessageEventListener = function (e) {\n        this.messageHandlers = this.messageHandlers.filter(function (t) {\n          return t._name !== e;\n        });\n      }, c.prototype.addCallEventListener = function (e, t) {\n        this.callHandlers = this.callHandlers.filter(function (t) {\n          return t._name != e;\n        }), this.callHandlers = this.callHandlers.concat([new s.CallListener(e, t)]);\n      }, c.prototype.removeCallEventListener = function (e) {\n        this.callHandlers = this.callHandlers.filter(function (t) {\n          return t._name !== e;\n        });\n      }, c.prototype.addUserEventListener = function (e, t) {\n        this.userHandlers = this.userHandlers.filter(function (t) {\n          return t._name != e;\n        }), this.userHandlers = this.userHandlers.concat([new s.UserListener(e, t)]);\n      }, c.prototype.removeUserEventListener = function (e) {\n        this.userHandlers = this.userHandlers.filter(function (t) {\n          return t._name !== e;\n        });\n      }, c.prototype.addGroupEventListener = function (t, e) {\n        this.groupHandlers = this.groupHandlers.filter(function (t) {\n          t._name;\n        }), this.groupHandlers = this.groupHandlers.concat([new s.GroupListener(t, e)]);\n      }, c.prototype.removeGroupEventListener = function (e) {\n        this.groupHandlers = this.groupHandlers.filter(function (t) {\n          return t._name !== e;\n        });\n      }, c.prototype.addIqHandler = function (t, e) {\n        this.iqHandlers = this.iqHandlers.concat([new s.Listener(t, e)]);\n      }, c.prototype.removeIqHandler = function (e) {\n        this.iqHandlers = this.iqHandlers.filter(function (t) {\n          return t._name !== e;\n        });\n      }, c.prototype.joinMuc = function (e) {\n        var n = this;\n        l.getAppSettings().then(function (t) {\n          n.connection.muc.join(l.format(E.XMPP.muc_jid_string, h.CometChat.getAppId(), e.getGuid(), h.CometChat.getAppId(), t[E.APP_SETTINGS.KEYS.CHAT_HOST]), n.connection.jid, null, null, null, null, 0);\n        });\n      }, c.prototype.leaveMuc = function (e) {\n        var n = this;\n        l.getAppSettings().then(function (t) {\n          n.connection.muc.leave(l.format(E.XMPP.muc_jid_string, h.CometChat.getAppId(), e, h.CometChat.getAppId(), t[E.APP_SETTINGS.KEYS.CHAT_HOST]), n.connection.jid);\n        });\n      }, c.prototype.getUsersVCard = function (t, e) {\n        var n = this;\n        g.getJidFromUid(t).then(function (t) {\n          n.connection.vcard.get(function (t) {\n            e(o.VCardController.transformVCard(t));\n          }, t);\n        });\n      }, c.prototype.trigerMessageHandler = function (n, t) {\n        if (l.isFalsy(t)) n = p.MessageController.trasformJSONMessge(n), this.messageHandlers.map(function (t) {\n          try {\n            if (t._eventListener) if (n instanceof f.Action) ;else if (n instanceof _.Call) ;else {\n              var e = n;\n\n              switch (e.getType()) {\n                case E.MessageConstatnts.TYPE.TEXT:\n                  l.isFalsy(t._eventListener.onTextMessageReceived) || t._eventListener.onTextMessageReceived(n);\n                  break;\n\n                case E.MessageConstatnts.TYPE.CUSTOM:\n                  l.isFalsy(t._eventListener.onCustomMessageReceived) || t._eventListener.onCustomMessageReceived(n);\n                  break;\n\n                default:\n                  e.getCategory() == E.MessageCategory.CUSTOM ? l.isFalsy(t._eventListener.onCustomMessageReceived) || t._eventListener.onCustomMessageReceived(n) : l.isFalsy(t._eventListener.onMediaMessageReceived) || t._eventListener.onMediaMessageReceived(n);\n              }\n            }\n          } catch (t) {\n            l.Logger.error(\"Error in `trigerMessageHandler`\", t);\n          }\n        }), n instanceof _.Call && this.publishCallEvents(n), n instanceof f.Action && this.publishActionEvents(n);else if (n = p.MessageController.trasformJSONMessge(n), this.messageHandlers[t]._eventListener) try {\n          if (this.messageHandlers[t]._eventListener) if (n instanceof f.Action) ;else if (n instanceof _.Call) ;else {\n            var e = n;\n\n            switch (e.getType()) {\n              case E.MessageConstatnts.TYPE.TEXT:\n                l.isFalsy(this.messageHandlers[t]._eventListener.onTextMessageReceived) || this.messageHandlers[t]._eventListener.onTextMessageReceived(n);\n                break;\n\n              case E.MessageConstatnts.TYPE.CUSTOM:\n                l.isFalsy(this.messageHandlers[t]._eventListener.onCustomMessageReceived) || this.messageHandlers[t]._eventListener.onCustomMessageReceived(n);\n                break;\n\n              default:\n                e.getCategory() == E.MessageCategory.CUSTOM ? l.isFalsy(this.messageHandlers[t]._eventListener.onCustomMessageReceived) || this.messageHandlers[t]._eventListener.onCustomMessageReceived(n) : l.isFalsy(this.messageHandlers[t]._eventListener.onMediaMessageReceived) || this.messageHandlers[t]._eventListener.onMediaMessageReceived(n);\n            }\n          }\n        } catch (t) {\n          l.Logger.error(\"Error in `trigerMessageHandler`\", t);\n        }\n      }, c.prototype.publishActionEvents = function (n) {\n        var s = this;\n\n        switch (n.getAction()) {\n          case E.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_JOINED:\n            this.groupHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onUserJoined) || t._eventListener.onUserJoined(n, n.getActionBy(), n.getActionFor());\n            });\n            break;\n\n          case E.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_INVITED:\n            this.groupHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onUserJoined) || t._eventListener.onUserJoined(n, n.getActionBy(), n.getActionFor());\n            });\n            break;\n\n          case E.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_LEFT:\n            this.groupHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onUserLeft) || t._eventListener.onUserLeft(n, n.getActionBy(), n.getActionFor());\n            });\n            break;\n\n          case E.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_BANNED:\n            this.groupHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onUserBanned) || t._eventListener.onUserBanned(n.getActionOn(), n.getActionBy(), n.getActionFor());\n            });\n            break;\n\n          case E.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_KICKED:\n            this.groupHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onUserKicked) || t._eventListener.onUserKicked(n, n.getActionOn(), n.getActionBy(), n.getActionFor());\n            });\n            break;\n\n          case E.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_UNBANNED:\n            this.groupHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onUserUnbanned) || t._eventListener.onUserUnbanned(n, n.getActionOn(), n.getActionBy(), n.getActionFor());\n            });\n            break;\n\n          case E.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_SCOPE_CHANGED:\n            this.groupHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onMemberScopeChanged) || t._eventListener.onMemberScopeChanged(n);\n            });\n            break;\n\n          case E.ActionConstatnts.ACTION_TYPE.TYPE_MESSAGE_EDITED:\n            this.messageHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onMessageEdited) || t._eventListener.onMessageEdited(n.getActionOn());\n            });\n            break;\n\n          case E.ActionConstatnts.ACTION_TYPE.TYPE_MESSAGE_DELETED:\n            this.messageHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onMessageDeleted) || t._eventListener.onMessageDeleted(n.getActionOn());\n            });\n            break;\n\n          case E.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_ADDED:\n            this.groupHandlers.map(function (e) {\n              var t = n.getActionOn();\n              g.getJidFromUid(t.getUid()).then(function (t) {\n                t == d.Strophe.getBareJidFromJid(s.connection.jid) && n.getReceiverType() == E.MessageConstatnts.RECEIVER_TYPE.USER ? (s.joinMuc(n.getActionFor()), l.isFalsy(e._eventListener.onAddedToGroup) || e._eventListener.onAddedToGroup(n, n.getActionBy(), n.getActionOn(), n.getActionFor())) : l.isFalsy(e._eventListener.onMemberAddedToGroup) || e._eventListener.onMemberAddedToGroup(n, n.getActionBy(), n.getActionOn(), n.getActionFor());\n              });\n            });\n        }\n      }, c.prototype.publishCallEvents = function (e) {\n        switch (e.getStatus()) {\n          case E.CallConstants.CALL_STATUS.INITIATED:\n            e.getReceiverType() == E.CallConstants.RECEIVER_TYPE_GROUP ? this.callHandlers.map(function (t) {\n              e.getCallInitiator().getUid().toLocaleLowerCase() != h.CometChat.user.getUid().toLocaleLowerCase() && (l.isFalsy(t._eventListener.onIncomingCallReceived) || t._eventListener.onIncomingCallReceived(e));\n            }) : this.callHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onIncomingCallReceived) || t._eventListener.onIncomingCallReceived(e);\n            });\n            break;\n\n          case E.CallConstants.CALL_STATUS.ONGOING:\n            e.getReceiverType() == E.CallConstants.RECEIVER_TYPE_GROUP ? e.getCallInitiator().getUid().toLocaleLowerCase() == h.CometChat.user.getUid().toLocaleLowerCase() && this.callHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onOutgoingCallAccepted) || t._eventListener.onOutgoingCallAccepted(e);\n            }) : this.callHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onOutgoingCallAccepted) || t._eventListener.onOutgoingCallAccepted(e);\n            });\n            break;\n\n          case E.CallConstants.CALL_STATUS.UNANSWERED:\n            if (e.getReceiverType() == E.CallConstants.RECEIVER_TYPE_GROUP) e.getCallInitiator().getUid().toLocaleLowerCase() == h.CometChat.user.getUid().toLocaleLowerCase() && this.callHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onIncomingCallCancelled) || t._eventListener.onIncomingCallCancelled(e);\n            });else {\n              try {\n                a.CallController.getInstance().endCall();\n              } catch (t) {\n                l.Logger.error(\"CallError\", t);\n              }\n\n              this.callHandlers.map(function (t) {\n                l.isFalsy(t._eventListener.onIncomingCallCancelled) || t._eventListener.onIncomingCallCancelled(e);\n              });\n            }\n            break;\n\n          case E.CallConstants.CALL_STATUS.REJECTED:\n            if (e.getReceiverType() == E.CallConstants.RECEIVER_TYPE_GROUP) e.getCallInitiator().getUid().toLocaleLowerCase() == h.CometChat.user.getUid().toLocaleLowerCase() && this.callHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onOutgoingCallRejected) || t._eventListener.onOutgoingCallRejected(e);\n            });else {\n              try {\n                a.CallController.getInstance().endCall();\n              } catch (t) {\n                l.Logger.error(\"CallError\", t);\n              }\n\n              this.callHandlers.map(function (t) {\n                l.isFalsy(t._eventListener.onOutgoingCallRejected) || t._eventListener.onOutgoingCallRejected(e);\n              });\n            }\n            break;\n\n          case E.CallConstants.CALL_STATUS.BUSY:\n            e.getReceiverType() == E.CallConstants.RECEIVER_TYPE_GROUP ? e.getCallInitiator().getUid().toLocaleLowerCase() == h.CometChat.user.getUid().toLocaleLowerCase() && this.callHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onOutgoingCallRejected) || t._eventListener.onOutgoingCallRejected(e);\n            }) : this.callHandlers.map(function (t) {\n              try {\n                a.CallController.getInstance().endCall();\n              } catch (t) {\n                l.Logger.error(\"CallError\", t);\n              }\n\n              l.isFalsy(t._eventListener.onOutgoingCallRejected) || t._eventListener.onOutgoingCallRejected(e);\n            });\n            break;\n\n          case E.CallConstants.CALL_STATUS.CANCELLED:\n            if (e.getReceiverType() == E.CallConstants.RECEIVER_TYPE_GROUP) e.getCallInitiator().getUid().toLocaleLowerCase() == h.CometChat.user.getUid().toLocaleLowerCase() && this.callHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onIncomingCallCancelled) || t._eventListener.onIncomingCallCancelled(e);\n            });else {\n              try {\n                a.CallController.getInstance().endCall();\n              } catch (t) {\n                l.Logger.error(\"CallError\", t);\n              }\n\n              this.callHandlers.map(function (t) {\n                l.isFalsy(t._eventListener.onIncomingCallCancelled) || t._eventListener.onIncomingCallCancelled(e);\n              });\n            }\n            break;\n\n          case E.CallConstants.CALL_STATUS.ENDED:\n            this.callHandlers.map(function (t) {\n              l.isFalsy(t._eventListener.onOutgoingCallRejected) || t._eventListener.onOutgoingCallRejected(e);\n            });\n\n            try {\n              a.CallController.getInstance().getCallListner() && a.CallController.getInstance().getCallListner()._eventListener.onCallEnded(e), a.CallController.getInstance().endCall();\n            } catch (t) {\n              l.Logger.error(\"CallError\", t);\n            }\n\n        }\n      }, c.prototype.publishTypinStatusNotification = function (e, t) {\n        switch (t) {\n          case E.TYPING_NOTIFICATION.ACTIONS.STARTED:\n            this.messageHandlers.map(function (t) {\n              t._eventListener.onTypingStarted && t._eventListener.onTypingStarted(e);\n            }), S.TypingNotificationController.addIncomingTypingStarted(e);\n            break;\n\n          case E.TYPING_NOTIFICATION.ACTIONS.ENDED:\n            this.messageHandlers.map(function (t) {\n              t._eventListener.onTypingEnded && t._eventListener.onTypingEnded(e);\n            }), S.TypingNotificationController.removeIncomingTypingStarted(e);\n        }\n      }, c.prototype.publishDeliveryReceipt = function (t) {\n        var n = this;\n        p.MessageController.processDeliveryReceipt(t).then(function (e) {\n          n.messageHandlers.map(function (t) {\n            t._eventListener.onMessageDelivered && t._eventListener.onMessageDelivered(e);\n          });\n        }, function (t) {\n          l.Logger.error(\"Error in publish delivery\", t);\n        });\n      }, c.prototype.publishReadReceipt = function (t) {\n        var n = this;\n        p.MessageController.processReadReceipt(t).then(function (e) {\n          n.messageHandlers.map(function (t) {\n            t._eventListener.onMessageRead && t._eventListener.onMessageRead(e);\n          });\n        }, function (t) {\n          l.Logger.error(\"Error in publish read\", t);\n        });\n      }, c.prototype.markAsRead = function (t, s, r, o) {\n        var i = this;\n        g.getJidFromUid(t).then(function (t) {\n          var e = d.$msg({\n            to: t,\n            from: i.connection.jid,\n            id: i.connection.getUniqueId(),\n            type: E.MessageConstatnts.XMPP_KEYS.TYPE_USER\n          }),\n              n = d.Strophe.xmlElement(\"read\", {\n            type: s,\n            receiverId: o,\n            xmlns: \"urn:xmpp:receipts\",\n            id: \"[\" + h.CometChat.getAppId() + \"]\" + r\n          });\n          e.tree().appendChild(n), i.connection.send(e);\n        });\n      }, c.XMPP_HOST = E.XMPP.host, c.XMPP_PORT = E.XMPP.port, c.xMPPConnectionHelper = new c(), c.XMPP_BIND_URL = \"wss://\" + c.XMPP_HOST + \":\" + c.XMPP_PORT + E.XMPP.bind_url, c;\n    }();\n\n    e.XMPPConnectionHelper = c;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var o = n(23),\n        i = n(7),\n        a = n(24),\n        u = n(4),\n        s = n(17),\n        l = n(1),\n        d = n(0),\n        h = n(8),\n        p = n(18),\n        E = n(19),\n        f = n(39),\n        g = n(40),\n        _ = n(25),\n        m = n(2),\n        C = n(14),\n        r = function () {\n      function c() {}\n\n      return c.trasformXMPPMessage = function (t) {\n        var e = {};\n\n        try {\n          var n = JSON.parse(unescape(i.parseHTML(t.getElementsByTagName(\"body\")[0])).trim().toString());\n          e = this.trasformJSONMessge(n);\n        } catch (t) {\n          l.Logger.error(\"MessageController:transformXMPPMessage\", {\n            e: t\n          });\n        }\n\n        return e;\n      }, c.checkIfCabon = function (t) {\n        return 0 < t.getElementsByTagName(\"forwarded\").length && t.getElementsByTagName(\"forwarded\")[0], 0 < t.getElementsByTagName(\"forwarded\").length;\n      }, c.trasformJSONMessge = function (n) {\n        var t;\n\n        switch (n[d.MessageConstatnts.KEYS.CATEGORY]) {\n          case d.MessageConstatnts.CATEGORY.ACTION:\n            t = p.Action.actionFromJSON(n);\n            break;\n\n          case d.MessageConstatnts.CATEGORY.CALL:\n            t = E.Call.callFromJSON(n);\n            break;\n\n          case d.MessageConstatnts.CATEGORY.MESSAGE:\n            switch (n[d.MessageConstatnts.KEYS.TYPE]) {\n              case d.MessageConstatnts.TYPE.TEXT:\n                t = new o.TextMessage(n[d.MessageConstatnts.KEYS.RECEIVER], n[d.MessageConstatnts.KEYS.DATA][d.MessageConstatnts.KEYS.TEXT], n[d.MessageConstatnts.KEYS.TYPE], n[d.MessageConstatnts.KEYS.RECEIVER_TYPE]);\n                break;\n\n              case d.MessageConstatnts.TYPE.CUSTOM:\n                t = new _.CustomMessage(n[d.MessageConstatnts.KEYS.RECEIVER], n[d.MessageConstatnts.KEYS.DATA][d.MessageConstatnts.KEYS.CUSTOM_DATA], n[d.MessageConstatnts.KEYS.RECEIVER_TYPE]);\n                break;\n\n              default:\n                if (t = new a.MediaMessage(n[d.MessageConstatnts.KEYS.RECEIVER], n[d.MessageConstatnts.KEYS.DATA][d.MessageConstatnts.KEYS.URL], n[d.MessageConstatnts.KEYS.TYPE], n[d.MessageConstatnts.KEYS.RECEIVER_TYPE]), n.hasOwnProperty(d.MessageConstatnts.KEYS.DATA)) {\n                  var e = n[d.MessageConstatnts.KEYS.DATA];\n\n                  if (e.hasOwnProperty(d.MessageConstatnts.KEYS.ATTATCHMENTS)) {\n                    var s,\n                        r = e[d.MessageConstatnts.KEYS.ATTATCHMENTS];\n                    new Array();\n                    r.map(function (t) {\n                      s = new g.Attachment(t);\n                    }), t.setAttachment(s);\n                  }\n\n                  e.hasOwnProperty(d.MessageConstatnts.KEYS.TEXT) && t.setCaption(e[d.MessageConstatnts.KEYS.TEXT]);\n                }\n\n            }\n\n            break;\n\n          case d.MessageConstatnts.CATEGORY.CUSTOM:\n            t = new _.CustomMessage(n[d.MessageConstatnts.KEYS.RECEIVER], n[d.MessageConstatnts.KEYS.DATA][d.MessageConstatnts.KEYS.CUSTOM_DATA], n[d.MessageConstatnts.KEYS.RECEIVER_TYPE], n.type);\n\n          default:\n            l.Logger.log(\"MessageConroller:trasformJSONMessge\", n);\n        }\n\n        n[d.MessageConstatnts.KEYS.MY_RECEIPTS] && (n[d.MessageConstatnts.KEYS.MY_RECEIPTS] = n[d.MessageConstatnts.KEYS.MY_RECEIPTS], Object.keys(n[d.MessageConstatnts.KEYS.MY_RECEIPTS]).map(function (t) {\n          var e = new f.MessageReceipt();\n          t == d.DELIVERY_RECEIPTS.DELIVERED_AT && (e.setReceiptType(e.RECEIPT_TYPE.DELIVERY_RECEIPT), e.setDeliveredAt(n[d.MessageConstatnts.KEYS.MY_RECEIPTS][d.DELIVERY_RECEIPTS.DELIVERED_AT]), l.isFalsy(n[d.MessageConstatnts.KEYS.MY_RECEIPTS][d.DELIVERY_RECEIPTS.RECIPIENT]) ? n[d.DELIVERY_RECEIPTS.DELIVERED_TO_ME_AT] = n[d.MessageConstatnts.KEYS.MY_RECEIPTS][d.DELIVERY_RECEIPTS.DELIVERED_AT] : e.setSender(n[d.MessageConstatnts.KEYS.MY_RECEIPTS][d.DELIVERY_RECEIPTS.RECIPIENT]), e.setReceiverType(n[d.MessageConstatnts.KEYS.RECEIVER_TYPE]), e.setReceiver(n[d.MessageConstatnts.KEYS.RECEIVER])), n[d.MessageConstatnts.KEYS.MY_RECEIPTS][d.READ_RECEIPTS.READ_AT] && (e.setReceiptType(e.RECEIPT_TYPE.READ_RECEIPT), e.setReadAt(n[d.MessageConstatnts.KEYS.MY_RECEIPTS][d.READ_RECEIPTS.READ_AT]), l.isFalsy(n[d.MessageConstatnts.KEYS.MY_RECEIPTS][d.READ_RECEIPTS.RECIPIENT]) ? n[d.READ_RECEIPTS.READ_BY_ME_AT] = n[d.MessageConstatnts.KEYS.MY_RECEIPTS][d.READ_RECEIPTS.READ_AT] : e.setSender(n[d.MessageConstatnts.KEYS.MY_RECEIPTS][d.READ_RECEIPTS.RECIPIENT]), e.setReceiverType(n[d.MessageConstatnts.KEYS.RECEIVER_TYPE]), e.setReceiver(n[d.MessageConstatnts.KEYS.RECEIVER]));\n        }));\n\n        try {\n          if (Object.assign(t, n), (n = t) instanceof o.TextMessage) n.setSender(n.getSender()), n.getData()[d.MessageConstatnts.KEYS.METADATA] && n.setMetadata(n.getData()[d.MessageConstatnts.KEYS.METADATA]);else if (n instanceof a.MediaMessage) n.getData()[d.MessageConstatnts.KEYS.METADATA] && n.setMetadata(n.getData()[d.MessageConstatnts.KEYS.METADATA]), n.setSender(n.getSender());else if (n instanceof p.Action) n.setSender(n.getSender()), n.setActionBy(n.getActionBy()), n.setActionOn(n.getActionOn()), n.setActionFor(n.getActionFor()), n.setMessage(n.getMessage());else if (n instanceof E.Call) {\n            try {\n              n.setSender(n.getSender());\n            } catch (t) {\n              l.Logger.error(\"MessageController:trasformJSONMessge:setSender\", t);\n            }\n\n            try {\n              n.setCallInitiator(n.getCallInitiator());\n            } catch (t) {\n              l.Logger.error(\"MessageController:trasformJSONMessge:setCallInitiator\", t);\n            }\n\n            try {\n              n.setCallReceiver(n.getCallReceiver());\n            } catch (t) {\n              l.Logger.error(\"MessageController:trasformJSONMessge:setCallreceiver\", t);\n            }\n\n            l.Logger.log(\"MessageController:transformJSONMessage\", n);\n          } else n instanceof _.CustomMessage && (n.getData()[d.MessageConstatnts.KEYS.METADATA] && n.setMetadata(n.getData()[d.MessageConstatnts.KEYS.METADATA]), n.setSubType(n.getData()[d.MessageConstatnts.KEYS.CUSTOM_SUB_TYPE]), n.setSender(n.getSender()));\n        } catch (t) {\n          l.Logger.error(\"MessageController:trasformJSONMessge:Main\", t), n = null;\n        }\n\n        return n;\n      }, c.getOfflineHistory = function (t, e) {\n        void 0 === t && (t = 1e3), void 0 === e && (e = 1);\n        s.MessagesStore.getInstance();\n        var n = [];\n        u.makeApiCall(\"getMessages\", {}, this.createData(t, e)).then(function (t) {\n          return l.isFalsy(t.data) || t.data.map(function (t) {\n            h.XMPPConnectionHelper.getInstance().trigerMessageHandler(t), n.push(c.trasformJSONMessge(t));\n          }), !0;\n        });\n      }, c.getAllMessage = function (n, s, r, o) {\n        var i = this;\n        void 0 === n && (n = 100);\n        var a = [];\n        return new Promise(function (e, t) {\n          u.makeApiCall(\"getMessages\", {}, i.createAllMessageData(n, s, r, o)).then(function (t) {\n            l.isFalsy(t.data) || (t.data.map(function (t) {\n              a.push(c.trasformJSONMessge(t));\n            }), e(a));\n          }, function (t) {\n            l.Logger.error(\"Error on fetching all message\", t), e([]);\n          });\n        });\n      }, c.createData = function (t, e) {\n        return void 0 === e && (e = 0), {\n          per_page: t,\n          cursorValue: e,\n          cursorField: d.MessageConstatnts.PAGINATION.CURSOR_FILEDS.ID,\n          cursorAffix: l.isFalsy(e) ? d.MessageConstatnts.PAGINATION.AFFIX.PREPEND : d.MessageConstatnts.PAGINATION.AFFIX.APPEND\n        };\n      }, c.createAllMessageData = function (t, e, n, s) {\n        return {\n          per_page: t,\n          cursorValue: e,\n          cursorField: n,\n          cursorAffix: s\n        };\n      }, c.isDeliveryReceipt = function (t) {\n        return 0 < t.getElementsByTagName(d.DELIVERY_RECEIPTS.RECEIVED).length;\n      }, c.isReadRceipt = function (t) {\n        return 0 < t.getElementsByTagName(d.READ_RECEIPTS.READ).length;\n      }, c.processDeliveryReceipt = function (o) {\n        return new Promise(function (n, e) {\n          try {\n            var s = o.getElementsByTagName(d.DELIVERY_RECEIPTS.RECEIVED)[0],\n                r = o.getElementsByTagName(d.DELIVERY_RECEIPTS.DELIVERED_AT)[0];\n            h.XMPPConnectionHelper.getInstance().getUsersVCard(i.getUidFromJid(o.getAttribute(d.MessageConstatnts.XMPP_KEYS.FROM)), function (t) {\n              var e = new f.MessageReceipt();\n              e.setSender(t), s.getAttribute(d.DELIVERY_RECEIPTS.RECEIVER_TYPE) == d.MessageConstatnts.RECEIVER_TYPE.GROUP ? (e.setReceiverType(d.MessageConstatnts.RECEIVER_TYPE.GROUP), e.setReceiver(s.getAttribute(d.DELIVERY_RECEIPTS.RECEIVER_ID))) : (e.setReceiverType(d.MessageConstatnts.RECEIVER_TYPE.USER), e.setReceiver(i.getUidFromJid(o.getAttribute(d.MessageConstatnts.XMPP_KEYS.TO)))), e.setReceiptType(e.RECEIPT_TYPE.DELIVERY_RECEIPT), e.setMessageId(i.getmessageIdFromStanzaId(s.getAttribute(d.DELIVERY_RECEIPTS.ID))), e.setTimestamp(r.getAttribute(d.DELIVERY_RECEIPTS.TIME)), e.setDeliveredAt(r.getAttribute(d.DELIVERY_RECEIPTS.TIME)), n(e);\n            });\n          } catch (t) {\n            e();\n          }\n        });\n      }, c.processReadReceipt = function (o) {\n        return new Promise(function (n, e) {\n          try {\n            var s = o.getElementsByTagName(d.READ_RECEIPTS.READ)[0],\n                r = o.getElementsByTagName(d.READ_RECEIPTS.READ_AT)[0];\n            h.XMPPConnectionHelper.getInstance().getUsersVCard(i.getUidFromJid(o.getAttribute(d.MessageConstatnts.XMPP_KEYS.FROM)), function (t) {\n              var e = new f.MessageReceipt();\n              e.setSender(t), s.getAttribute(d.READ_RECEIPTS.RECEIVER_TYPE) == d.MessageConstatnts.RECEIVER_TYPE.GROUP ? (e.setReceiverType(d.MessageConstatnts.RECEIVER_TYPE.GROUP), e.setReceiver(s.getAttribute(d.READ_RECEIPTS.RECEIVER_ID))) : (e.setReceiverType(d.MessageConstatnts.RECEIVER_TYPE.USER), e.setReceiver(i.getUidFromJid(o.getAttribute(d.MessageConstatnts.XMPP_KEYS.TO)))), e.setReceiptType(e.RECEIPT_TYPE.READ_RECEIPT), e.setMessageId(i.getmessageIdFromStanzaId(s.getAttribute(d.READ_RECEIPTS.ID))), e.setTimestamp(r.getAttribute(d.READ_RECEIPTS.TIME)), e.setReadAt(r.getAttribute(d.READ_RECEIPTS.TIME)), n(e);\n            });\n          } catch (t) {\n            e();\n          }\n        });\n      }, c.getReceiptsFromJSON = function (r) {\n        return new Promise(function (t, e) {\n          var s = [];\n          m.CometChat.getLoggedinUser().then(function (n) {\n            l.isFalsy(r.receipts) ? t([]) : (r.receipts.data.map(function (t) {\n              var e = new f.MessageReceipt();\n              t[d.DELIVERY_RECEIPTS.DELIVERED_AT] && (e.setReceiptType(e.RECEIPT_TYPE.DELIVERY_RECEIPT), e.setDeliveredAt(t[d.DELIVERY_RECEIPTS.DELIVERED_AT]), e.setTimestamp(t[d.DELIVERY_RECEIPTS.DELIVERED_AT]), l.isFalsy(t[d.DELIVERY_RECEIPTS.RECIPIENT]) ? e.setSender(n) : e.setSender(C.UsersController.trasformJSONUser(t[d.DELIVERY_RECEIPTS.RECIPIENT])), e.setReceiverType(r[d.MessageConstatnts.KEYS.RECEIVER_TYPE]), e.setReceiver(r[d.MessageConstatnts.KEYS.RECEIVER])), t[d.READ_RECEIPTS.READ_AT] && (e.setReceiptType(e.RECEIPT_TYPE.READ_RECEIPT), e.setReadAt(t[d.READ_RECEIPTS.READ_AT]), e.setTimestamp(t[t[d.READ_RECEIPTS.READ_AT]]), l.isFalsy(t[d.READ_RECEIPTS.RECIPIENT]) ? e.setSender(n) : e.setSender(C.UsersController.trasformJSONUser(t[d.READ_RECEIPTS.RECIPIENT])), e.setReceiverType(r[d.MessageConstatnts.KEYS.RECEIVER_TYPE]), e.setReceiver(r[d.MessageConstatnts.KEYS.RECEIVER])), s.push(e);\n            }), t(s));\n          });\n        });\n      }, c;\n    }();\n\n    e.MessageController = r;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = function () {\n      function t(t, e, n, s) {\n        this.receiver = t, this.type = e, this.receiverType = n, this.category = s;\n      }\n\n      return t.prototype.getId = function () {\n        return this.id;\n      }, t.prototype.setId = function (t) {\n        this.id = t;\n      }, t.prototype.getMuid = function () {\n        return this.muid;\n      }, t.prototype.setMuid = function (t) {\n        this.muid = t;\n      }, t.prototype.getSender = function () {\n        return this.sender;\n      }, t.prototype.setSender = function (t) {\n        this.sender = t;\n      }, t.prototype.getReceiver = function () {\n        return this.receiver;\n      }, t.prototype.setReceiver = function (t) {\n        this.receiver = t;\n      }, t.prototype.getType = function () {\n        return this.type;\n      }, t.prototype.setType = function (t) {\n        this.type = t;\n      }, t.prototype.get = function () {\n        return this.id;\n      }, t.prototype.setReceiverType = function (t) {\n        this.receiverType = t;\n      }, t.prototype.getReceiverType = function () {\n        return this.receiverType;\n      }, t.prototype.setSentAt = function (t) {\n        this.sentAt = t;\n      }, t.prototype.getSentAt = function () {\n        return this.sentAt;\n      }, t.prototype.getStatus = function () {\n        return this.status;\n      }, t.prototype.setStatus = function (t) {\n        this.status = t;\n      }, t.prototype.getDeliveredAt = function () {\n        return this.deliveredAt;\n      }, t.prototype.setDeliveredAt = function (t) {\n        this.deliveredAt = t;\n      }, t.prototype.getDeliveredToMeAt = function () {\n        return this.deliveredToMeAt;\n      }, t.prototype.setDeliveredToMeAt = function (t) {\n        this.deliveredToMeAt = t;\n      }, t.prototype.getReadAt = function () {\n        return this.readAt;\n      }, t.prototype.setReadAt = function (t) {\n        this.readAt = t;\n      }, t.prototype.getReadByMeAt = function () {\n        return this.readByMeAt;\n      }, t.prototype.setReadByMeAt = function (t) {\n        this.readByMeAt = t;\n      }, t.prototype.getCategory = function () {\n        return this.category;\n      }, t.prototype.setCategory = function (t) {\n        this.category = t;\n      }, t.prototype.setEditedAt = function (t) {\n        this.editedAt = t;\n      }, t.prototype.getEditedAt = function () {\n        return this.editedAt;\n      }, t.prototype.setEditedBy = function (t) {\n        this.editedBy = t;\n      }, t.prototype.getEditedBy = function () {\n        this.editedBy;\n      }, t.prototype.setDeletedAt = function () {\n        return this.deletedAt;\n      }, t;\n    }();\n\n    e.BaseMessage = s;\n  }, function (t, e, n) {\n    (function (s) {\n      t.exports = function r(o, i, a) {\n        function c(n, t) {\n          if (!i[n]) {\n            if (!o[n]) {\n              if (u) return u(n, !0);\n              var e = new Error(\"Cannot find module '\" + n + \"'\");\n              throw e.code = \"MODULE_NOT_FOUND\", e;\n            }\n\n            var s = i[n] = {\n              exports: {}\n            };\n            o[n][0].call(s.exports, function (t) {\n              var e = o[n][1][t];\n              return c(e || t);\n            }, s, s.exports, r, o, i, a);\n          }\n\n          return i[n].exports;\n        }\n\n        for (var u = !1, t = 0; t < a.length; t++) c(a[t]);\n\n        return c;\n      }({\n        1: [function (t, l, e) {\n          (function (e) {\n            \"use strict\";\n\n            var n,\n                s,\n                t = e.MutationObserver || e.WebKitMutationObserver;\n\n            if (t) {\n              var r = 0,\n                  o = new t(u),\n                  i = e.document.createTextNode(\"\");\n              o.observe(i, {\n                characterData: !0\n              }), n = function () {\n                i.data = r = ++r % 2;\n              };\n            } else if (e.setImmediate || void 0 === e.MessageChannel) n = \"document\" in e && \"onreadystatechange\" in e.document.createElement(\"script\") ? function () {\n              var t = e.document.createElement(\"script\");\n              t.onreadystatechange = function () {\n                u(), t.onreadystatechange = null, t.parentNode.removeChild(t), t = null;\n              }, e.document.documentElement.appendChild(t);\n            } : function () {\n              setTimeout(u, 0);\n            };else {\n              var a = new e.MessageChannel();\n              a.port1.onmessage = u, n = function () {\n                a.port2.postMessage(0);\n              };\n            }\n\n            var c = [];\n\n            function u() {\n              var t, e;\n              s = !0;\n\n              for (var n = c.length; n;) {\n                for (e = c, c = [], t = -1; ++t < n;) e[t]();\n\n                n = c.length;\n              }\n\n              s = !1;\n            }\n\n            l.exports = function (t) {\n              1 !== c.push(t) || s || n();\n            };\n          }).call(this, void 0 !== s ? s : \"undefined\" != typeof self ? self : \"undefined\" != typeof window ? window : {});\n        }, {}],\n        2: [function (t, e, n) {\n          \"use strict\";\n\n          var r = t(1);\n\n          function u() {}\n\n          var l = {},\n              o = [\"REJECTED\"],\n              i = [\"FULFILLED\"],\n              a = [\"PENDING\"];\n\n          function s(t) {\n            if (\"function\" != typeof t) throw new TypeError(\"resolver must be a function\");\n            this.state = a, this.queue = [], this.outcome = void 0, t !== u && p(this, t);\n          }\n\n          function c(t, e, n) {\n            this.promise = t, \"function\" == typeof e && (this.onFulfilled = e, this.callFulfilled = this.otherCallFulfilled), \"function\" == typeof n && (this.onRejected = n, this.callRejected = this.otherCallRejected);\n          }\n\n          function d(e, n, s) {\n            r(function () {\n              var t;\n\n              try {\n                t = n(s);\n              } catch (t) {\n                return l.reject(e, t);\n              }\n\n              t === e ? l.reject(e, new TypeError(\"Cannot resolve promise with itself\")) : l.resolve(e, t);\n            });\n          }\n\n          function h(t) {\n            var e = t && t.then;\n            if (t && (\"object\" == typeof t || \"function\" == typeof t) && \"function\" == typeof e) return function () {\n              e.apply(t, arguments);\n            };\n          }\n\n          function p(e, t) {\n            var n = !1;\n\n            function s(t) {\n              n || (n = !0, l.reject(e, t));\n            }\n\n            function r(t) {\n              n || (n = !0, l.resolve(e, t));\n            }\n\n            var o = E(function () {\n              t(r, s);\n            });\n            \"error\" === o.status && s(o.value);\n          }\n\n          function E(t, e) {\n            var n = {};\n\n            try {\n              n.value = t(e), n.status = \"success\";\n            } catch (t) {\n              n.status = \"error\", n.value = t;\n            }\n\n            return n;\n          }\n\n          (e.exports = s).prototype.catch = function (t) {\n            return this.then(null, t);\n          }, s.prototype.then = function (t, e) {\n            if (\"function\" != typeof t && this.state === i || \"function\" != typeof e && this.state === o) return this;\n            var n = new this.constructor(u);\n\n            if (this.state !== a) {\n              var s = this.state === i ? t : e;\n              d(n, s, this.outcome);\n            } else this.queue.push(new c(n, t, e));\n\n            return n;\n          }, c.prototype.callFulfilled = function (t) {\n            l.resolve(this.promise, t);\n          }, c.prototype.otherCallFulfilled = function (t) {\n            d(this.promise, this.onFulfilled, t);\n          }, c.prototype.callRejected = function (t) {\n            l.reject(this.promise, t);\n          }, c.prototype.otherCallRejected = function (t) {\n            d(this.promise, this.onRejected, t);\n          }, l.resolve = function (t, e) {\n            var n = E(h, e);\n            if (\"error\" === n.status) return l.reject(t, n.value);\n            var s = n.value;\n            if (s) p(t, s);else {\n              t.state = i, t.outcome = e;\n\n              for (var r = -1, o = t.queue.length; ++r < o;) t.queue[r].callFulfilled(e);\n            }\n            return t;\n          }, l.reject = function (t, e) {\n            t.state = o, t.outcome = e;\n\n            for (var n = -1, s = t.queue.length; ++n < s;) t.queue[n].callRejected(e);\n\n            return t;\n          }, s.resolve = function (t) {\n            return t instanceof this ? t : l.resolve(new this(u), t);\n          }, s.reject = function (t) {\n            var e = new this(u);\n            return l.reject(e, t);\n          }, s.all = function (t) {\n            var n = this;\n            if (\"[object Array]\" !== Object.prototype.toString.call(t)) return this.reject(new TypeError(\"must be an array\"));\n            var s = t.length,\n                r = !1;\n            if (!s) return this.resolve([]);\n\n            for (var o = new Array(s), i = 0, e = -1, a = new this(u); ++e < s;) c(t[e], e);\n\n            return a;\n\n            function c(t, e) {\n              n.resolve(t).then(function (t) {\n                o[e] = t, ++i !== s || r || (r = !0, l.resolve(a, o));\n              }, function (t) {\n                r || (r = !0, l.reject(a, t));\n              });\n            }\n          }, s.race = function (t) {\n            var e = this;\n            if (\"[object Array]\" !== Object.prototype.toString.call(t)) return this.reject(new TypeError(\"must be an array\"));\n            var n = t.length,\n                s = !1;\n            if (!n) return this.resolve([]);\n\n            for (var r, o = -1, i = new this(u); ++o < n;) r = t[o], e.resolve(r).then(function (t) {\n              s || (s = !0, l.resolve(i, t));\n            }, function (t) {\n              s || (s = !0, l.reject(i, t));\n            });\n\n            return i;\n          };\n        }, {\n          1: 1\n        }],\n        3: [function (e, t, n) {\n          (function (t) {\n            \"use strict\";\n\n            \"function\" != typeof t.Promise && (t.Promise = e(2));\n          }).call(this, void 0 !== s ? s : \"undefined\" != typeof self ? self : \"undefined\" != typeof window ? window : {});\n        }, {\n          2: 2\n        }],\n        4: [function (t, e, n) {\n          \"use strict\";\n\n          var s = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (t) {\n            return typeof t;\n          } : function (t) {\n            return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t;\n          },\n              c = function () {\n            try {\n              if (\"undefined\" != typeof indexedDB) return indexedDB;\n              if (\"undefined\" != typeof webkitIndexedDB) return webkitIndexedDB;\n              if (\"undefined\" != typeof mozIndexedDB) return mozIndexedDB;\n              if (\"undefined\" != typeof OIndexedDB) return OIndexedDB;\n              if (\"undefined\" != typeof msIndexedDB) return msIndexedDB;\n            } catch (t) {\n              return;\n            }\n          }();\n\n          function i(e, n) {\n            e = e || [], n = n || {};\n\n            try {\n              return new Blob(e, n);\n            } catch (t) {\n              if (\"TypeError\" !== t.name) throw t;\n\n              for (var s = \"undefined\" != typeof BlobBuilder ? BlobBuilder : \"undefined\" != typeof MSBlobBuilder ? MSBlobBuilder : \"undefined\" != typeof MozBlobBuilder ? MozBlobBuilder : WebKitBlobBuilder, r = new s(), o = 0; o < e.length; o += 1) r.append(e[o]);\n\n              return r.getBlob(n.type);\n            }\n          }\n\n          \"undefined\" == typeof Promise && t(3);\n          var d = Promise;\n\n          function h(t, e) {\n            e && t.then(function (t) {\n              e(null, t);\n            }, function (t) {\n              e(t);\n            });\n          }\n\n          function u(t, e, n) {\n            \"function\" == typeof e && t.then(e), \"function\" == typeof n && t.catch(n);\n          }\n\n          function l(t) {\n            return \"string\" != typeof t && (t = String(t)), t;\n          }\n\n          function o() {\n            if (arguments.length && \"function\" == typeof arguments[arguments.length - 1]) return arguments[arguments.length - 1];\n          }\n\n          var a = \"local-forage-detect-blob-support\",\n              r = void 0,\n              p = {},\n              E = Object.prototype.toString,\n              f = \"readonly\",\n              g = \"readwrite\";\n\n          function _(t) {\n            return \"boolean\" == typeof r ? d.resolve(r) : (s = t, new d(function (n) {\n              var t = s.transaction(a, g),\n                  e = i([\"\"]);\n              t.objectStore(a).put(e, \"key\"), t.onabort = function (t) {\n                t.preventDefault(), t.stopPropagation(), n(!1);\n              }, t.oncomplete = function () {\n                var t = navigator.userAgent.match(/Chrome\\/(\\d+)/),\n                    e = navigator.userAgent.match(/Edge\\//);\n                n(e || !t || 43 <= parseInt(t[1], 10));\n              };\n            }).catch(function () {\n              return !1;\n            })).then(function (t) {\n              return r = t;\n            });\n            var s;\n          }\n\n          function m(t) {\n            var e = p[t.name],\n                n = {};\n            n.promise = new d(function (t, e) {\n              n.resolve = t, n.reject = e;\n            }), e.deferredOperations.push(n), e.dbReady ? e.dbReady = e.dbReady.then(function () {\n              return n.promise;\n            }) : e.dbReady = n.promise;\n          }\n\n          function C(t) {\n            var e = p[t.name],\n                n = e.deferredOperations.pop();\n            if (n) return n.resolve(), n.promise;\n          }\n\n          function T(t, e) {\n            var n = p[t.name],\n                s = n.deferredOperations.pop();\n            if (s) return s.reject(e), s.promise;\n          }\n\n          function S(r, o) {\n            return new d(function (t, e) {\n              if (p[r.name] = p[r.name] || {\n                forages: [],\n                db: null,\n                dbReady: null,\n                deferredOperations: []\n              }, r.db) {\n                if (!o) return t(r.db);\n                m(r), r.db.close();\n              }\n\n              var n = [r.name];\n              o && n.push(r.version);\n              var s = c.open.apply(c, n);\n              o && (s.onupgradeneeded = function (t) {\n                var e = s.result;\n\n                try {\n                  e.createObjectStore(r.storeName), t.oldVersion <= 1 && e.createObjectStore(a);\n                } catch (t) {\n                  if (\"ConstraintError\" !== t.name) throw t;\n                }\n              }), s.onerror = function (t) {\n                t.preventDefault(), e(s.error);\n              }, s.onsuccess = function () {\n                t(s.result), C(r);\n              };\n            });\n          }\n\n          function A(t) {\n            return S(t, !1);\n          }\n\n          function I(t) {\n            return S(t, !0);\n          }\n\n          function y(t, e) {\n            if (!t.db) return !0;\n            var n = !t.db.objectStoreNames.contains(t.storeName),\n                s = t.version < t.db.version,\n                r = t.version > t.db.version;\n\n            if (s && (t.version, t.version = t.db.version), r || n) {\n              if (n) {\n                var o = t.db.version + 1;\n                o > t.version && (t.version = o);\n              }\n\n              return !0;\n            }\n\n            return !1;\n          }\n\n          function N(t) {\n            var e = function (t) {\n              for (var e = t.length, n = new ArrayBuffer(e), s = new Uint8Array(n), r = 0; r < e; r++) s[r] = t.charCodeAt(r);\n\n              return n;\n            }(atob(t.data));\n\n            return i([e], {\n              type: t.type\n            });\n          }\n\n          function R(t) {\n            return t && t.__local_forage_encoded_blob;\n          }\n\n          function v(t) {\n            var e = this,\n                n = e._initReady().then(function () {\n              var t = p[e._dbInfo.name];\n              if (t && t.dbReady) return t.dbReady;\n            });\n\n            return u(n, t, t), n;\n          }\n\n          function M(e, n, s, r) {\n            void 0 === r && (r = 1);\n\n            try {\n              var t = e.db.transaction(e.storeName, n);\n              s(null, t);\n            } catch (t) {\n              if (0 < r && (!e.db || \"InvalidStateError\" === t.name || \"NotFoundError\" === t.name)) return d.resolve().then(function () {\n                if (!e.db || \"NotFoundError\" === t.name && !e.db.objectStoreNames.contains(e.storeName) && e.version <= e.db.version) return e.db && (e.version = e.db.version + 1), I(e);\n              }).then(function () {\n                return function (n) {\n                  m(n);\n\n                  for (var s = p[n.name], r = s.forages, t = 0; t < r.length; t++) {\n                    var e = r[t];\n                    e._dbInfo.db && (e._dbInfo.db.close(), e._dbInfo.db = null);\n                  }\n\n                  return n.db = null, A(n).then(function (t) {\n                    return n.db = t, y(n) ? I(n) : t;\n                  }).then(function (t) {\n                    n.db = s.db = t;\n\n                    for (var e = 0; e < r.length; e++) r[e]._dbInfo.db = t;\n                  }).catch(function (t) {\n                    throw T(n, t), t;\n                  });\n                }(e).then(function () {\n                  M(e, n, s, r - 1);\n                });\n              }).catch(s);\n              s(t);\n            }\n          }\n\n          var O = {\n            _driver: \"asyncStorage\",\n            _initStorage: function (t) {\n              var s = this,\n                  r = {\n                db: null\n              };\n              if (t) for (var e in t) r[e] = t[e];\n              var o = p[r.name];\n              o || (o = {\n                forages: [],\n                db: null,\n                dbReady: null,\n                deferredOperations: []\n              }, p[r.name] = o), o.forages.push(s), s._initReady || (s._initReady = s.ready, s.ready = v);\n              var n = [];\n\n              function i() {\n                return d.resolve();\n              }\n\n              for (var a = 0; a < o.forages.length; a++) {\n                var c = o.forages[a];\n                c !== s && n.push(c._initReady().catch(i));\n              }\n\n              var u = o.forages.slice(0);\n              return d.all(n).then(function () {\n                return r.db = o.db, A(r);\n              }).then(function (t) {\n                return r.db = t, y(r, s._defaultConfig.version) ? I(r) : t;\n              }).then(function (t) {\n                r.db = o.db = t, s._dbInfo = r;\n\n                for (var e = 0; e < u.length; e++) {\n                  var n = u[e];\n                  n !== s && (n._dbInfo.db = r.db, n._dbInfo.version = r.version);\n                }\n              });\n            },\n            _support: function () {\n              try {\n                if (!c) return !1;\n                var t = \"undefined\" != typeof openDatabase && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform),\n                    e = \"function\" == typeof fetch && -1 !== fetch.toString().indexOf(\"[native code\");\n                return (!t || e) && \"undefined\" != typeof indexedDB && \"undefined\" != typeof IDBKeyRange;\n              } catch (t) {\n                return !1;\n              }\n            }(),\n            iterate: function (a, t) {\n              var c = this,\n                  e = new d(function (o, i) {\n                c.ready().then(function () {\n                  M(c._dbInfo, f, function (t, e) {\n                    if (t) return i(t);\n\n                    try {\n                      var n = e.objectStore(c._dbInfo.storeName),\n                          s = n.openCursor(),\n                          r = 1;\n                      s.onsuccess = function () {\n                        var t = s.result;\n\n                        if (t) {\n                          var e = t.value;\n                          R(e) && (e = N(e));\n                          var n = a(e, t.key, r++);\n                          void 0 !== n ? o(n) : t.continue();\n                        } else o();\n                      }, s.onerror = function () {\n                        i(s.error);\n                      };\n                    } catch (t) {\n                      i(t);\n                    }\n                  });\n                }).catch(i);\n              });\n              return h(e, t), e;\n            },\n            getItem: function (i, t) {\n              var a = this;\n              i = l(i);\n              var e = new d(function (r, o) {\n                a.ready().then(function () {\n                  M(a._dbInfo, f, function (t, e) {\n                    if (t) return o(t);\n\n                    try {\n                      var n = e.objectStore(a._dbInfo.storeName),\n                          s = n.get(i);\n                      s.onsuccess = function () {\n                        var t = s.result;\n                        void 0 === t && (t = null), R(t) && (t = N(t)), r(t);\n                      }, s.onerror = function () {\n                        o(s.error);\n                      };\n                    } catch (t) {\n                      o(t);\n                    }\n                  });\n                }).catch(o);\n              });\n              return h(e, t), e;\n            },\n            setItem: function (a, e, t) {\n              var c = this;\n              a = l(a);\n              var n = new d(function (o, i) {\n                var t;\n                c.ready().then(function () {\n                  return t = c._dbInfo, \"[object Blob]\" === E.call(e) ? _(t.db).then(function (t) {\n                    return t ? e : (s = e, new d(function (n, t) {\n                      var e = new FileReader();\n                      e.onerror = t, e.onloadend = function (t) {\n                        var e = btoa(t.target.result || \"\");\n                        n({\n                          __local_forage_encoded_blob: !0,\n                          data: e,\n                          type: s.type\n                        });\n                      }, e.readAsBinaryString(s);\n                    }));\n                    var s;\n                  }) : e;\n                }).then(function (r) {\n                  M(c._dbInfo, g, function (t, e) {\n                    if (t) return i(t);\n\n                    try {\n                      var n = e.objectStore(c._dbInfo.storeName);\n                      null === r && (r = void 0);\n                      var s = n.put(r, a);\n                      e.oncomplete = function () {\n                        void 0 === r && (r = null), o(r);\n                      }, e.onabort = e.onerror = function () {\n                        var t = s.error ? s.error : s.transaction.error;\n                        i(t);\n                      };\n                    } catch (t) {\n                      i(t);\n                    }\n                  });\n                }).catch(i);\n              });\n              return h(n, t), n;\n            },\n            removeItem: function (i, t) {\n              var a = this;\n              i = l(i);\n              var e = new d(function (r, o) {\n                a.ready().then(function () {\n                  M(a._dbInfo, g, function (t, e) {\n                    if (t) return o(t);\n\n                    try {\n                      var n = e.objectStore(a._dbInfo.storeName),\n                          s = n.delete(i);\n                      e.oncomplete = function () {\n                        r();\n                      }, e.onerror = function () {\n                        o(s.error);\n                      }, e.onabort = function () {\n                        var t = s.error ? s.error : s.transaction.error;\n                        o(t);\n                      };\n                    } catch (t) {\n                      o(t);\n                    }\n                  });\n                }).catch(o);\n              });\n              return h(e, t), e;\n            },\n            clear: function (t) {\n              var i = this,\n                  e = new d(function (r, o) {\n                i.ready().then(function () {\n                  M(i._dbInfo, g, function (t, e) {\n                    if (t) return o(t);\n\n                    try {\n                      var n = e.objectStore(i._dbInfo.storeName),\n                          s = n.clear();\n                      e.oncomplete = function () {\n                        r();\n                      }, e.onabort = e.onerror = function () {\n                        var t = s.error ? s.error : s.transaction.error;\n                        o(t);\n                      };\n                    } catch (t) {\n                      o(t);\n                    }\n                  });\n                }).catch(o);\n              });\n              return h(e, t), e;\n            },\n            length: function (t) {\n              var i = this,\n                  e = new d(function (r, o) {\n                i.ready().then(function () {\n                  M(i._dbInfo, f, function (t, e) {\n                    if (t) return o(t);\n\n                    try {\n                      var n = e.objectStore(i._dbInfo.storeName),\n                          s = n.count();\n                      s.onsuccess = function () {\n                        r(s.result);\n                      }, s.onerror = function () {\n                        o(s.error);\n                      };\n                    } catch (t) {\n                      o(t);\n                    }\n                  });\n                }).catch(o);\n              });\n              return h(e, t), e;\n            },\n            key: function (a, t) {\n              var c = this,\n                  e = new d(function (o, i) {\n                a < 0 ? o(null) : c.ready().then(function () {\n                  M(c._dbInfo, f, function (t, e) {\n                    if (t) return i(t);\n\n                    try {\n                      var n = e.objectStore(c._dbInfo.storeName),\n                          s = !1,\n                          r = n.openCursor();\n                      r.onsuccess = function () {\n                        var t = r.result;\n                        t ? 0 === a ? o(t.key) : s ? o(t.key) : (s = !0, t.advance(a)) : o(null);\n                      }, r.onerror = function () {\n                        i(r.error);\n                      };\n                    } catch (t) {\n                      i(t);\n                    }\n                  });\n                }).catch(i);\n              });\n              return h(e, t), e;\n            },\n            keys: function (t) {\n              var a = this,\n                  e = new d(function (o, i) {\n                a.ready().then(function () {\n                  M(a._dbInfo, f, function (t, e) {\n                    if (t) return i(t);\n\n                    try {\n                      var n = e.objectStore(a._dbInfo.storeName),\n                          s = n.openCursor(),\n                          r = [];\n                      s.onsuccess = function () {\n                        var t = s.result;\n                        t ? (r.push(t.key), t.continue()) : o(r);\n                      }, s.onerror = function () {\n                        i(s.error);\n                      };\n                    } catch (t) {\n                      i(t);\n                    }\n                  });\n                }).catch(i);\n              });\n              return h(e, t), e;\n            },\n            dropInstance: function (a, t) {\n              t = o.apply(this, arguments);\n              var e,\n                  n = this.config();\n\n              if ((a = \"function\" != typeof a && a || {}).name || (a.name = a.name || n.name, a.storeName = a.storeName || n.storeName), a.name) {\n                var s = a.name === n.name && this._dbInfo.db,\n                    r = s ? d.resolve(this._dbInfo.db) : A(a).then(function (t) {\n                  var e = p[a.name],\n                      n = e.forages;\n                  e.db = t;\n\n                  for (var s = 0; s < n.length; s++) n[s]._dbInfo.db = t;\n\n                  return t;\n                });\n                e = a.storeName ? r.then(function (t) {\n                  if (t.objectStoreNames.contains(a.storeName)) {\n                    var r = t.version + 1;\n                    m(a);\n                    var s = p[a.name],\n                        o = s.forages;\n                    t.close();\n\n                    for (var e = 0; e < o.length; e++) {\n                      var n = o[e];\n                      n._dbInfo.db = null, n._dbInfo.version = r;\n                    }\n\n                    var i = new d(function (e, n) {\n                      var s = c.open(a.name, r);\n                      s.onerror = function (t) {\n                        var e = s.result;\n                        e.close(), n(t);\n                      }, s.onupgradeneeded = function () {\n                        var t = s.result;\n                        t.deleteObjectStore(a.storeName);\n                      }, s.onsuccess = function () {\n                        var t = s.result;\n                        t.close(), e(t);\n                      };\n                    });\n                    return i.then(function (t) {\n                      s.db = t;\n\n                      for (var e = 0; e < o.length; e++) {\n                        var n = o[e];\n                        n._dbInfo.db = t, C(n._dbInfo);\n                      }\n                    }).catch(function (t) {\n                      throw (T(a, t) || d.resolve()).catch(function () {}), t;\n                    });\n                  }\n                }) : r.then(function (t) {\n                  m(a);\n                  var s = p[a.name],\n                      r = s.forages;\n                  t.close();\n\n                  for (var e = 0; e < r.length; e++) {\n                    var n = r[e];\n                    n._dbInfo.db = null;\n                  }\n\n                  var o = new d(function (e, n) {\n                    var s = c.deleteDatabase(a.name);\n                    s.onerror = s.onblocked = function (t) {\n                      var e = s.result;\n                      e && e.close(), n(t);\n                    }, s.onsuccess = function () {\n                      var t = s.result;\n                      t && t.close(), e(t);\n                    };\n                  });\n                  return o.then(function (t) {\n                    s.db = t;\n\n                    for (var e = 0; e < r.length; e++) {\n                      var n = r[e];\n                      C(n._dbInfo);\n                    }\n                  }).catch(function (t) {\n                    throw (T(a, t) || d.resolve()).catch(function () {}), t;\n                  });\n                });\n              } else e = d.reject(\"Invalid arguments\");\n\n              return h(e, t), e;\n            }\n          },\n              P = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",\n              b = /^~~local_forage_type~([^~]+)~/,\n              L = \"__lfsc__:\",\n              D = L.length,\n              w = \"arbf\",\n              U = \"blob\",\n              Y = D + w.length,\n              x = Object.prototype.toString;\n\n          function G(t) {\n            var e,\n                n,\n                s,\n                r,\n                o,\n                i = .75 * t.length,\n                a = t.length,\n                c = 0;\n            \"=\" === t[t.length - 1] && (i--, \"=\" === t[t.length - 2] && i--);\n            var u = new ArrayBuffer(i),\n                l = new Uint8Array(u);\n\n            for (e = 0; e < a; e += 4) n = P.indexOf(t[e]), s = P.indexOf(t[e + 1]), r = P.indexOf(t[e + 2]), o = P.indexOf(t[e + 3]), l[c++] = n << 2 | s >> 4, l[c++] = (15 & s) << 4 | r >> 2, l[c++] = (3 & r) << 6 | 63 & o;\n\n            return u;\n          }\n\n          function F(t) {\n            var e,\n                n = new Uint8Array(t),\n                s = \"\";\n\n            for (e = 0; e < n.length; e += 3) s += P[n[e] >> 2], s += P[(3 & n[e]) << 4 | n[e + 1] >> 4], s += P[(15 & n[e + 1]) << 2 | n[e + 2] >> 6], s += P[63 & n[e + 2]];\n\n            return n.length % 3 == 2 ? s = s.substring(0, s.length - 1) + \"=\" : n.length % 3 == 1 && (s = s.substring(0, s.length - 2) + \"==\"), s;\n          }\n\n          var K = {\n            serialize: function (e, n) {\n              var t = \"\";\n\n              if (e && (t = x.call(e)), e && (\"[object ArrayBuffer]\" === t || e.buffer && \"[object ArrayBuffer]\" === x.call(e.buffer))) {\n                var s,\n                    r = L;\n                e instanceof ArrayBuffer ? (s = e, r += w) : (s = e.buffer, \"[object Int8Array]\" === t ? r += \"si08\" : \"[object Uint8Array]\" === t ? r += \"ui08\" : \"[object Uint8ClampedArray]\" === t ? r += \"uic8\" : \"[object Int16Array]\" === t ? r += \"si16\" : \"[object Uint16Array]\" === t ? r += \"ur16\" : \"[object Int32Array]\" === t ? r += \"si32\" : \"[object Uint32Array]\" === t ? r += \"ui32\" : \"[object Float32Array]\" === t ? r += \"fl32\" : \"[object Float64Array]\" === t ? r += \"fl64\" : n(new Error(\"Failed to get type for BinaryArray\"))), n(r + F(s));\n              } else if (\"[object Blob]\" === t) {\n                var o = new FileReader();\n                o.onload = function () {\n                  var t = \"~~local_forage_type~\" + e.type + \"~\" + F(this.result);\n                  n(L + U + t);\n                }, o.readAsArrayBuffer(e);\n              } else try {\n                n(JSON.stringify(e));\n              } catch (t) {\n                n(null, t);\n              }\n            },\n            deserialize: function (t) {\n              if (t.substring(0, D) !== L) return JSON.parse(t);\n              var e,\n                  n = t.substring(Y),\n                  s = t.substring(D, Y);\n\n              if (s === U && b.test(n)) {\n                var r = n.match(b);\n                e = r[1], n = n.substring(r[0].length);\n              }\n\n              var o = G(n);\n\n              switch (s) {\n                case w:\n                  return o;\n\n                case U:\n                  return i([o], {\n                    type: e\n                  });\n\n                case \"si08\":\n                  return new Int8Array(o);\n\n                case \"ui08\":\n                  return new Uint8Array(o);\n\n                case \"uic8\":\n                  return new Uint8ClampedArray(o);\n\n                case \"si16\":\n                  return new Int16Array(o);\n\n                case \"ur16\":\n                  return new Uint16Array(o);\n\n                case \"si32\":\n                  return new Int32Array(o);\n\n                case \"ui32\":\n                  return new Uint32Array(o);\n\n                case \"fl32\":\n                  return new Float32Array(o);\n\n                case \"fl64\":\n                  return new Float64Array(o);\n\n                default:\n                  throw new Error(\"Unkown type: \" + s);\n              }\n            },\n            stringToBuffer: G,\n            bufferToString: F\n          };\n\n          function B(t, e, n, s) {\n            t.executeSql(\"CREATE TABLE IF NOT EXISTS \" + e.storeName + \" (id INTEGER PRIMARY KEY, key unique, value)\", [], n, s);\n          }\n\n          function k(t, s, r, o, i, a) {\n            t.executeSql(r, o, i, function (t, n) {\n              n.code === n.SYNTAX_ERR ? t.executeSql(\"SELECT name FROM sqlite_master WHERE type='table' AND name = ?\", [s.storeName], function (t, e) {\n                e.rows.length ? a(t, n) : B(t, s, function () {\n                  t.executeSql(r, o, i, a);\n                }, a);\n              }, a) : a(t, n);\n            }, a);\n          }\n\n          function H(i, t, a, c) {\n            var u = this;\n            i = l(i);\n            var e = new d(function (r, o) {\n              u.ready().then(function () {\n                void 0 === t && (t = null);\n                var n = t,\n                    s = u._dbInfo;\n                s.serializer.serialize(t, function (e, t) {\n                  t ? o(t) : s.db.transaction(function (t) {\n                    k(t, s, \"INSERT OR REPLACE INTO \" + s.storeName + \" (key, value) VALUES (?, ?)\", [i, e], function () {\n                      r(n);\n                    }, function (t, e) {\n                      o(e);\n                    });\n                  }, function (t) {\n                    if (t.code === t.QUOTA_ERR) {\n                      if (0 < c) return void r(H.apply(u, [i, n, a, c - 1]));\n                      o(t);\n                    }\n                  });\n                });\n              }).catch(o);\n            });\n            return h(e, a), e;\n          }\n\n          var j = {\n            _driver: \"webSQLStorage\",\n            _initStorage: function (t) {\n              var s = this,\n                  r = {\n                db: null\n              };\n              if (t) for (var e in t) r[e] = \"string\" != typeof t[e] ? t[e].toString() : t[e];\n              var n = new d(function (e, n) {\n                try {\n                  r.db = openDatabase(r.name, String(r.version), r.description, r.size);\n                } catch (t) {\n                  return n(t);\n                }\n\n                r.db.transaction(function (t) {\n                  B(t, r, function () {\n                    s._dbInfo = r, e();\n                  }, function (t, e) {\n                    n(e);\n                  });\n                }, n);\n              });\n              return r.serializer = K, n;\n            },\n            _support: \"function\" == typeof openDatabase,\n            iterate: function (u, t) {\n              var e = this,\n                  n = new d(function (c, n) {\n                e.ready().then(function () {\n                  var a = e._dbInfo;\n                  a.db.transaction(function (t) {\n                    k(t, a, \"SELECT * FROM \" + a.storeName, [], function (t, e) {\n                      for (var n = e.rows, s = n.length, r = 0; r < s; r++) {\n                        var o = n.item(r),\n                            i = o.value;\n                        if (i && (i = a.serializer.deserialize(i)), void 0 !== (i = u(i, o.key, r + 1))) return void c(i);\n                      }\n\n                      c();\n                    }, function (t, e) {\n                      n(e);\n                    });\n                  });\n                }).catch(n);\n              });\n              return h(n, t), n;\n            },\n            getItem: function (e, t) {\n              var o = this;\n              e = l(e);\n              var n = new d(function (r, n) {\n                o.ready().then(function () {\n                  var s = o._dbInfo;\n                  s.db.transaction(function (t) {\n                    k(t, s, \"SELECT * FROM \" + s.storeName + \" WHERE key = ? LIMIT 1\", [e], function (t, e) {\n                      var n = e.rows.length ? e.rows.item(0).value : null;\n                      n && (n = s.serializer.deserialize(n)), r(n);\n                    }, function (t, e) {\n                      n(e);\n                    });\n                  });\n                }).catch(n);\n              });\n              return h(n, t), n;\n            },\n            setItem: function (t, e, n) {\n              return H.apply(this, [t, e, n, 1]);\n            },\n            removeItem: function (r, t) {\n              var o = this;\n              r = l(r);\n              var e = new d(function (n, s) {\n                o.ready().then(function () {\n                  var e = o._dbInfo;\n                  e.db.transaction(function (t) {\n                    k(t, e, \"DELETE FROM \" + e.storeName + \" WHERE key = ?\", [r], function () {\n                      n();\n                    }, function (t, e) {\n                      s(e);\n                    });\n                  });\n                }).catch(s);\n              });\n              return h(e, t), e;\n            },\n            clear: function (t) {\n              var r = this,\n                  e = new d(function (n, s) {\n                r.ready().then(function () {\n                  var e = r._dbInfo;\n                  e.db.transaction(function (t) {\n                    k(t, e, \"DELETE FROM \" + e.storeName, [], function () {\n                      n();\n                    }, function (t, e) {\n                      s(e);\n                    });\n                  });\n                }).catch(s);\n              });\n              return h(e, t), e;\n            },\n            length: function (t) {\n              var r = this,\n                  e = new d(function (s, n) {\n                r.ready().then(function () {\n                  var e = r._dbInfo;\n                  e.db.transaction(function (t) {\n                    k(t, e, \"SELECT COUNT(key) as c FROM \" + e.storeName, [], function (t, e) {\n                      var n = e.rows.item(0).c;\n                      s(n);\n                    }, function (t, e) {\n                      n(e);\n                    });\n                  });\n                }).catch(n);\n              });\n              return h(e, t), e;\n            },\n            key: function (r, t) {\n              var o = this,\n                  e = new d(function (s, n) {\n                o.ready().then(function () {\n                  var e = o._dbInfo;\n                  e.db.transaction(function (t) {\n                    k(t, e, \"SELECT key FROM \" + e.storeName + \" WHERE id = ? LIMIT 1\", [r + 1], function (t, e) {\n                      var n = e.rows.length ? e.rows.item(0).key : null;\n                      s(n);\n                    }, function (t, e) {\n                      n(e);\n                    });\n                  });\n                }).catch(n);\n              });\n              return h(e, t), e;\n            },\n            keys: function (t) {\n              var s = this,\n                  e = new d(function (r, n) {\n                s.ready().then(function () {\n                  var e = s._dbInfo;\n                  e.db.transaction(function (t) {\n                    k(t, e, \"SELECT key FROM \" + e.storeName, [], function (t, e) {\n                      for (var n = [], s = 0; s < e.rows.length; s++) n.push(e.rows.item(s).key);\n\n                      r(n);\n                    }, function (t, e) {\n                      n(e);\n                    });\n                  });\n                }).catch(n);\n              });\n              return h(e, t), e;\n            },\n            dropInstance: function (n, t) {\n              t = o.apply(this, arguments);\n              var s = this.config();\n              (n = \"function\" != typeof n && n || {}).name || (n.name = n.name || s.name, n.storeName = n.storeName || s.storeName);\n              var e,\n                  r = this;\n              return h(e = n.name ? new d(function (t) {\n                var e, o;\n                e = n.name === s.name ? r._dbInfo.db : openDatabase(n.name, \"\", \"\", 0), n.storeName ? t({\n                  db: e,\n                  storeNames: [n.storeName]\n                }) : t((o = e, new d(function (r, n) {\n                  o.transaction(function (t) {\n                    t.executeSql(\"SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'\", [], function (t, e) {\n                      for (var n = [], s = 0; s < e.rows.length; s++) n.push(e.rows.item(s).name);\n\n                      r({\n                        db: o,\n                        storeNames: n\n                      });\n                    }, function (t, e) {\n                      n(e);\n                    });\n                  }, function (t) {\n                    n(t);\n                  });\n                })));\n              }).then(function (a) {\n                return new d(function (o, i) {\n                  a.db.transaction(function (s) {\n                    function t(e) {\n                      return new d(function (t, n) {\n                        s.executeSql(\"DROP TABLE IF EXISTS \" + e, [], function () {\n                          t();\n                        }, function (t, e) {\n                          n(e);\n                        });\n                      });\n                    }\n\n                    for (var e = [], n = 0, r = a.storeNames.length; n < r; n++) e.push(t(a.storeNames[n]));\n\n                    d.all(e).then(function () {\n                      o();\n                    }).catch(function (t) {\n                      i(t);\n                    });\n                  }, function (t) {\n                    i(t);\n                  });\n                });\n              }) : d.reject(\"Invalid arguments\"), t), e;\n            }\n          };\n\n          function V(t, e) {\n            var n = t.name + \"/\";\n            return t.storeName !== e.storeName && (n += t.storeName + \"/\"), n;\n          }\n\n          function q() {\n            return !function () {\n              var t = \"_localforage_support_test\";\n\n              try {\n                return localStorage.setItem(t, !0), localStorage.removeItem(t), !1;\n              } catch (t) {\n                return !0;\n              }\n            }() || 0 < localStorage.length;\n          }\n\n          var X = {\n            _driver: \"localStorageWrapper\",\n            _initStorage: function (t) {\n              var e = {};\n              if (t) for (var n in t) e[n] = t[n];\n              return e.keyPrefix = V(t, this._defaultConfig), q() ? ((this._dbInfo = e).serializer = K, d.resolve()) : d.reject();\n            },\n            _support: function () {\n              try {\n                return \"undefined\" != typeof localStorage && \"setItem\" in localStorage && !!localStorage.setItem;\n              } catch (t) {\n                return !1;\n              }\n            }(),\n            iterate: function (c, t) {\n              var u = this,\n                  e = u.ready().then(function () {\n                for (var t = u._dbInfo, e = t.keyPrefix, n = e.length, s = localStorage.length, r = 1, o = 0; o < s; o++) {\n                  var i = localStorage.key(o);\n\n                  if (0 === i.indexOf(e)) {\n                    var a = localStorage.getItem(i);\n                    if (a && (a = t.serializer.deserialize(a)), void 0 !== (a = c(a, i.substring(n), r++))) return a;\n                  }\n                }\n              });\n              return h(e, t), e;\n            },\n            getItem: function (n, t) {\n              var s = this;\n              n = l(n);\n              var e = s.ready().then(function () {\n                var t = s._dbInfo,\n                    e = localStorage.getItem(t.keyPrefix + n);\n                return e && (e = t.serializer.deserialize(e)), e;\n              });\n              return h(e, t), e;\n            },\n            setItem: function (i, t, e) {\n              var a = this;\n              i = l(i);\n              var n = a.ready().then(function () {\n                void 0 === t && (t = null);\n                var o = t;\n                return new d(function (n, s) {\n                  var r = a._dbInfo;\n                  r.serializer.serialize(t, function (t, e) {\n                    if (e) s(e);else try {\n                      localStorage.setItem(r.keyPrefix + i, t), n(o);\n                    } catch (t) {\n                      \"QuotaExceededError\" !== t.name && \"NS_ERROR_DOM_QUOTA_REACHED\" !== t.name || s(t), s(t);\n                    }\n                  });\n                });\n              });\n              return h(n, e), n;\n            },\n            removeItem: function (e, t) {\n              var n = this;\n              e = l(e);\n              var s = n.ready().then(function () {\n                var t = n._dbInfo;\n                localStorage.removeItem(t.keyPrefix + e);\n              });\n              return h(s, t), s;\n            },\n            clear: function (t) {\n              var s = this,\n                  e = s.ready().then(function () {\n                for (var t = s._dbInfo.keyPrefix, e = localStorage.length - 1; 0 <= e; e--) {\n                  var n = localStorage.key(e);\n                  0 === n.indexOf(t) && localStorage.removeItem(n);\n                }\n              });\n              return h(e, t), e;\n            },\n            length: function (t) {\n              var e = this.keys().then(function (t) {\n                return t.length;\n              });\n              return h(e, t), e;\n            },\n            key: function (n, t) {\n              var s = this,\n                  e = s.ready().then(function () {\n                var e,\n                    t = s._dbInfo;\n\n                try {\n                  e = localStorage.key(n);\n                } catch (t) {\n                  e = null;\n                }\n\n                return e && (e = e.substring(t.keyPrefix.length)), e;\n              });\n              return h(e, t), e;\n            },\n            keys: function (t) {\n              var o = this,\n                  e = o.ready().then(function () {\n                for (var t = o._dbInfo, e = localStorage.length, n = [], s = 0; s < e; s++) {\n                  var r = localStorage.key(s);\n                  0 === r.indexOf(t.keyPrefix) && n.push(r.substring(t.keyPrefix.length));\n                }\n\n                return n;\n              });\n              return h(e, t), e;\n            },\n            dropInstance: function (e, t) {\n              if (t = o.apply(this, arguments), !(e = \"function\" != typeof e && e || {}).name) {\n                var n = this.config();\n                e.name = e.name || n.name, e.storeName = e.storeName || n.storeName;\n              }\n\n              var s,\n                  r = this;\n              return h(s = e.name ? new d(function (t) {\n                e.storeName ? t(V(e, r._defaultConfig)) : t(e.name + \"/\");\n              }).then(function (t) {\n                for (var e = localStorage.length - 1; 0 <= e; e--) {\n                  var n = localStorage.key(e);\n                  0 === n.indexOf(t) && localStorage.removeItem(n);\n                }\n              }) : d.reject(\"Invalid arguments\"), t), s;\n            }\n          },\n              J = function (t, e) {\n            for (var n = t.length, s = 0; s < n;) {\n              if ((r = t[s]) === (o = e) || \"number\" == typeof r && \"number\" == typeof o && isNaN(r) && isNaN(o)) return !0;\n              s++;\n            }\n\n            var r, o;\n            return !1;\n          },\n              W = Array.isArray || function (t) {\n            return \"[object Array]\" === Object.prototype.toString.call(t);\n          },\n              $ = {},\n              Q = {},\n              z = {\n            INDEXEDDB: O,\n            WEBSQL: j,\n            LOCALSTORAGE: X\n          },\n              Z = [z.INDEXEDDB._driver, z.WEBSQL._driver, z.LOCALSTORAGE._driver],\n              tt = [\"dropInstance\"],\n              et = [\"clear\", \"getItem\", \"iterate\", \"key\", \"keys\", \"length\", \"removeItem\", \"setItem\"].concat(tt),\n              nt = {\n            description: \"\",\n            driver: Z.slice(),\n            name: \"localforage\",\n            size: 4980736,\n            storeName: \"keyvaluepairs\",\n            version: 1\n          };\n\n          function st(e, n) {\n            e[n] = function () {\n              var t = arguments;\n              return e.ready().then(function () {\n                return e[n].apply(e, t);\n              });\n            };\n          }\n\n          function rt() {\n            for (var t = 1; t < arguments.length; t++) {\n              var e = arguments[t];\n              if (e) for (var n in e) e.hasOwnProperty(n) && (W(e[n]) ? arguments[0][n] = e[n].slice() : arguments[0][n] = e[n]);\n            }\n\n            return arguments[0];\n          }\n\n          var ot = function () {\n            function r(t) {\n              for (var e in function (t, e) {\n                if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n              }(this, r), z) if (z.hasOwnProperty(e)) {\n                var n = z[e],\n                    s = n._driver;\n                this[e] = s, $[s] || this.defineDriver(n);\n              }\n\n              this._defaultConfig = rt({}, nt), this._config = rt({}, this._defaultConfig, t), this._driverSet = null, this._initDriver = null, this._ready = !1, this._dbInfo = null, this._wrapLibraryMethodsWithReady(), this.setDriver(this._config.driver).catch(function () {});\n            }\n\n            return r.prototype.config = function (t) {\n              if (\"object\" !== (void 0 === t ? \"undefined\" : s(t))) return \"string\" == typeof t ? this._config[t] : this._config;\n              if (this._ready) return new Error(\"Can't call config() after localforage has been used.\");\n\n              for (var e in t) {\n                if (\"storeName\" === e && (t[e] = t[e].replace(/\\W/g, \"_\")), \"version\" === e && \"number\" != typeof t[e]) return new Error(\"Database version must be a number.\");\n                this._config[e] = t[e];\n              }\n\n              return !(\"driver\" in t && t.driver) || this.setDriver(this._config.driver);\n            }, r.prototype.defineDriver = function (l, t, e) {\n              var n = new d(function (e, n) {\n                try {\n                  var s = l._driver,\n                      t = new Error(\"Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver\");\n                  if (!l._driver) return void n(t);\n\n                  for (var r = et.concat(\"_initStorage\"), o = 0, i = r.length; o < i; o++) {\n                    var a = r[o],\n                        c = !J(tt, a);\n                    if ((c || l[a]) && \"function\" != typeof l[a]) return void n(t);\n                  }\n\n                  !function () {\n                    for (var t = function (n) {\n                      return function () {\n                        var t = new Error(\"Method \" + n + \" is not implemented by the current driver\"),\n                            e = d.reject(t);\n                        return h(e, arguments[arguments.length - 1]), e;\n                      };\n                    }, e = 0, n = tt.length; e < n; e++) {\n                      var s = tt[e];\n                      l[s] || (l[s] = t(s));\n                    }\n                  }();\n\n                  var u = function (t) {\n                    $[s], $[s] = l, Q[s] = t, e();\n                  };\n\n                  \"_support\" in l ? l._support && \"function\" == typeof l._support ? l._support().then(u, n) : u(!!l._support) : u(!0);\n                } catch (t) {\n                  n(t);\n                }\n              });\n              return u(n, t, e), n;\n            }, r.prototype.driver = function () {\n              return this._driver || null;\n            }, r.prototype.getDriver = function (t, e, n) {\n              var s = $[t] ? d.resolve($[t]) : d.reject(new Error(\"Driver not found.\"));\n              return u(s, e, n), s;\n            }, r.prototype.getSerializer = function (t) {\n              var e = d.resolve(K);\n              return u(e, t), e;\n            }, r.prototype.ready = function (t) {\n              var e = this,\n                  n = e._driverSet.then(function () {\n                return null === e._ready && (e._ready = e._initDriver()), e._ready;\n              });\n\n              return u(n, t, t), n;\n            }, r.prototype.setDriver = function (t, e, n) {\n              var o = this;\n              W(t) || (t = [t]);\n\n              var s = this._getSupportedDrivers(t);\n\n              function i() {\n                o._config.driver = o.driver();\n              }\n\n              function a(t) {\n                return o._extend(t), i(), o._ready = o._initStorage(o._config), o._ready;\n              }\n\n              var r = null !== this._driverSet ? this._driverSet.catch(function () {\n                return d.resolve();\n              }) : d.resolve();\n              return this._driverSet = r.then(function () {\n                var t = s[0];\n                return o._dbInfo = null, o._ready = null, o.getDriver(t).then(function (t) {\n                  var r;\n                  o._driver = t._driver, i(), o._wrapLibraryMethodsWithReady(), o._initDriver = (r = s, function () {\n                    var n = 0;\n\n                    function s() {\n                      for (; n < r.length;) {\n                        var t = r[n];\n                        return n++, o._dbInfo = null, o._ready = null, o.getDriver(t).then(a).catch(s);\n                      }\n\n                      i();\n                      var e = new Error(\"No available storage method found.\");\n                      return o._driverSet = d.reject(e), o._driverSet;\n                    }\n\n                    return s();\n                  });\n                });\n              }).catch(function () {\n                i();\n                var t = new Error(\"No available storage method found.\");\n                return o._driverSet = d.reject(t), o._driverSet;\n              }), u(this._driverSet, e, n), this._driverSet;\n            }, r.prototype.supports = function (t) {\n              return !!Q[t];\n            }, r.prototype._extend = function (t) {\n              rt(this, t);\n            }, r.prototype._getSupportedDrivers = function (t) {\n              for (var e = [], n = 0, s = t.length; n < s; n++) {\n                var r = t[n];\n                this.supports(r) && e.push(r);\n              }\n\n              return e;\n            }, r.prototype._wrapLibraryMethodsWithReady = function () {\n              for (var t = 0, e = et.length; t < e; t++) st(this, et[t]);\n            }, r.prototype.createInstance = function (t) {\n              return new r(t);\n            }, r;\n          }(),\n              it = new ot();\n\n          e.exports = it;\n        }, {\n          3: 3\n        }]\n      }, {}, [4])(4);\n    }).call(this, n(21));\n  }, function (t, e, n) {\n    var s;\n    window, s = function () {\n      return function (n) {\n        var s = {};\n\n        function r(t) {\n          if (s[t]) return s[t].exports;\n          var e = s[t] = {\n            i: t,\n            l: !1,\n            exports: {}\n          };\n          return n[t].call(e.exports, e, e.exports, r), e.l = !0, e.exports;\n        }\n\n        return r.m = n, r.c = s, r.d = function (t, e, n) {\n          r.o(t, e) || Object.defineProperty(t, e, {\n            enumerable: !0,\n            get: n\n          });\n        }, r.r = function (t) {\n          \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {\n            value: \"Module\"\n          }), Object.defineProperty(t, \"__esModule\", {\n            value: !0\n          });\n        }, r.t = function (e, t) {\n          if (1 & t && (e = r(e)), 8 & t) return e;\n          if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n          var n = Object.create(null);\n          if (r.r(n), Object.defineProperty(n, \"default\", {\n            enumerable: !0,\n            value: e\n          }), 2 & t && \"string\" != typeof e) for (var s in e) r.d(n, s, function (t) {\n            return e[t];\n          }.bind(null, s));\n          return n;\n        }, r.n = function (t) {\n          var e = t && t.__esModule ? function () {\n            return t.default;\n          } : function () {\n            return t;\n          };\n          return r.d(e, \"a\", e), e;\n        }, r.o = function (t, e) {\n          return Object.prototype.hasOwnProperty.call(t, e);\n        }, r.p = \"\", r(r.s = \"./src/strophe.js\");\n      }({\n        \"./src/bosh.js\": function (t, e, n) {\n          \"use strict\";\n\n          n.r(e);\n          var s = n(\"./src/core.js\"),\n              d = s.default.Strophe,\n              r = s.default.$build;\n          d.Request = function (t, e, n, s) {\n            this.id = ++d._requestId, this.xmlData = t, this.data = d.serialize(t), this.origFunc = e, this.func = e, this.rid = n, this.date = NaN, this.sends = s || 0, this.abort = !1, this.dead = null, this.age = function () {\n              return this.date ? (new Date() - this.date) / 1e3 : 0;\n            }, this.timeDead = function () {\n              return this.dead ? (new Date() - this.dead) / 1e3 : 0;\n            }, this.xhr = this._newXHR();\n          }, d.Request.prototype = {\n            getResponse: function () {\n              var t = null;\n\n              if (this.xhr.responseXML && this.xhr.responseXML.documentElement) {\n                if (\"parsererror\" === (t = this.xhr.responseXML.documentElement).tagName) throw d.error(\"invalid response received\"), d.error(\"responseText: \" + this.xhr.responseText), d.error(\"responseXML: \" + d.serialize(this.xhr.responseXML)), new Error(\"parsererror\");\n              } else if (this.xhr.responseText) {\n                if (d.debug(\"Got responseText but no responseXML; attempting to parse it with DOMParser...\"), !(t = new DOMParser().parseFromString(this.xhr.responseText, \"application/xml\").documentElement)) throw new Error(\"Parsing produced null node\");\n\n                if (t.querySelector(\"parsererror\")) {\n                  d.error(\"invalid response received: \" + t.querySelector(\"parsererror\").textContent), d.error(\"responseText: \" + this.xhr.responseText);\n                  var e = new Error();\n                  throw e.name = d.ErrorCondition.BAD_FORMAT, e;\n                }\n              }\n\n              return t;\n            },\n            _newXHR: function () {\n              var t = null;\n              return window.XMLHttpRequest ? (t = new XMLHttpRequest()).overrideMimeType && t.overrideMimeType(\"text/xml; charset=utf-8\") : window.ActiveXObject && (t = new ActiveXObject(\"Microsoft.XMLHTTP\")), t.onreadystatechange = this.func.bind(null, this), t;\n            }\n          }, d.Bosh = function (t) {\n            this._conn = t, this.rid = Math.floor(4294967295 * Math.random()), this.sid = null, this.hold = 1, this.wait = 60, this.window = 5, this.errors = 0, this.inactivity = null, this.lastResponseHeaders = null, this._requests = [];\n          }, d.Bosh.prototype = {\n            strip: null,\n            _buildBody: function () {\n              var t = r(\"body\", {\n                rid: this.rid++,\n                xmlns: d.NS.HTTPBIND\n              });\n              return null !== this.sid && t.attrs({\n                sid: this.sid\n              }), this._conn.options.keepalive && this._conn._sessionCachingSupported() && this._cacheSession(), t;\n            },\n            _reset: function () {\n              this.rid = Math.floor(4294967295 * Math.random()), this.sid = null, this.errors = 0, this._conn._sessionCachingSupported() && window.sessionStorage.removeItem(\"strophe-bosh-session\"), this._conn.nextValidRid(this.rid);\n            },\n            _connect: function (t, e, n) {\n              this.wait = t || this.wait, this.hold = e || this.hold, this.errors = 0;\n\n              var s = this._buildBody().attrs({\n                to: this._conn.domain,\n                \"xml:lang\": \"en\",\n                wait: this.wait,\n                hold: this.hold,\n                content: \"text/xml; charset=utf-8\",\n                ver: \"1.6\",\n                \"xmpp:version\": \"1.0\",\n                \"xmlns:xmpp\": d.NS.BOSH\n              });\n\n              n && s.attrs({\n                route: n\n              });\n              var r = this._conn._connect_cb;\n              this._requests.push(new d.Request(s.tree(), this._onRequestStateChange.bind(this, r.bind(this._conn)), s.tree().getAttribute(\"rid\"))), this._throttledRequestHandler();\n            },\n            _attach: function (t, e, n, s, r, o, i) {\n              this._conn.jid = t, this.sid = e, this.rid = n, this._conn.connect_callback = s, this._conn.domain = d.getDomainFromJid(this._conn.jid), this._conn.authenticated = !0, this._conn.connected = !0, this.wait = r || this.wait, this.hold = o || this.hold, this.window = i || this.window, this._conn._changeConnectStatus(d.Status.ATTACHED, null);\n            },\n            _restore: function (t, e, n, s, r) {\n              var o = JSON.parse(window.sessionStorage.getItem(\"strophe-bosh-session\"));\n\n              if (!(null != o && o.rid && o.sid && o.jid && (null == t || d.getBareJidFromJid(o.jid) === d.getBareJidFromJid(t) || null === d.getNodeFromJid(t) && d.getDomainFromJid(o.jid) === t))) {\n                var i = new Error(\"_restore: no restoreable session.\");\n                throw i.name = \"StropheSessionError\", i;\n              }\n\n              this._conn.restored = !0, this._attach(o.jid, o.sid, o.rid, e, n, s, r);\n            },\n            _cacheSession: function () {\n              this._conn.authenticated ? this._conn.jid && this.rid && this.sid && window.sessionStorage.setItem(\"strophe-bosh-session\", JSON.stringify({\n                jid: this._conn.jid,\n                rid: this.rid,\n                sid: this.sid\n              })) : window.sessionStorage.removeItem(\"strophe-bosh-session\");\n            },\n            _connect_cb: function (t) {\n              var e = t.getAttribute(\"type\");\n\n              if (null !== e && \"terminate\" === e) {\n                var n = t.getAttribute(\"condition\");\n                d.error(\"BOSH-Connection failed: \" + n);\n                var s = t.getElementsByTagName(\"conflict\");\n                return null !== n ? (\"remote-stream-error\" === n && 0 < s.length && (n = \"conflict\"), this._conn._changeConnectStatus(d.Status.CONNFAIL, n)) : this._conn._changeConnectStatus(d.Status.CONNFAIL, \"unknown\"), this._conn._doDisconnect(n), d.Status.CONNFAIL;\n              }\n\n              this.sid || (this.sid = t.getAttribute(\"sid\"));\n              var r = t.getAttribute(\"requests\");\n              r && (this.window = parseInt(r, 10));\n              var o = t.getAttribute(\"hold\");\n              o && (this.hold = parseInt(o, 10));\n              var i = t.getAttribute(\"wait\");\n              i && (this.wait = parseInt(i, 10));\n              var a = t.getAttribute(\"inactivity\");\n              a && (this.inactivity = parseInt(a, 10));\n            },\n            _disconnect: function (t) {\n              this._sendTerminate(t);\n            },\n            _doDisconnect: function () {\n              this.sid = null, this.rid = Math.floor(4294967295 * Math.random()), this._conn._sessionCachingSupported() && window.sessionStorage.removeItem(\"strophe-bosh-session\"), this._conn.nextValidRid(this.rid);\n            },\n            _emptyQueue: function () {\n              return 0 === this._requests.length;\n            },\n            _callProtocolErrorHandlers: function (t) {\n              var e = this._getRequestStatus(t),\n                  n = this._conn.protocolErrorHandlers.HTTP[e];\n\n              n && n.call(this, e);\n            },\n            _hitError: function (t) {\n              this.errors++, d.warn(\"request errored, status: \" + t + \", number of errors: \" + this.errors), 4 < this.errors && this._conn._onDisconnectTimeout();\n            },\n            _no_auth_received: function (t) {\n              d.warn(\"Server did not yet offer a supported authentication mechanism. Sending a blank poll request.\"), t = t ? t.bind(this._conn) : this._conn._connect_cb.bind(this._conn);\n\n              var e = this._buildBody();\n\n              this._requests.push(new d.Request(e.tree(), this._onRequestStateChange.bind(this, t), e.tree().getAttribute(\"rid\"))), this._throttledRequestHandler();\n            },\n            _onDisconnectTimeout: function () {\n              this._abortAllRequests();\n            },\n            _abortAllRequests: function () {\n              for (; 0 < this._requests.length;) {\n                var t = this._requests.pop();\n\n                t.abort = !0, t.xhr.abort(), t.xhr.onreadystatechange = function () {};\n              }\n            },\n            _onIdle: function () {\n              var t = this._conn._data;\n\n              if (this._conn.authenticated && 0 === this._requests.length && 0 === t.length && !this._conn.disconnecting && (d.info(\"no requests during idle cycle, sending blank request\"), t.push(null)), !this._conn.paused) {\n                if (this._requests.length < 2 && 0 < t.length) {\n                  for (var e = this._buildBody(), n = 0; n < t.length; n++) null !== t[n] && (\"restart\" === t[n] ? e.attrs({\n                    to: this._conn.domain,\n                    \"xml:lang\": \"en\",\n                    \"xmpp:restart\": \"true\",\n                    \"xmlns:xmpp\": d.NS.BOSH\n                  }) : e.cnode(t[n]).up());\n\n                  delete this._conn._data, this._conn._data = [], this._requests.push(new d.Request(e.tree(), this._onRequestStateChange.bind(this, this._conn._dataRecv.bind(this._conn)), e.tree().getAttribute(\"rid\"))), this._throttledRequestHandler();\n                }\n\n                if (0 < this._requests.length) {\n                  var s = this._requests[0].age();\n\n                  null !== this._requests[0].dead && this._requests[0].timeDead() > Math.floor(d.SECONDARY_TIMEOUT * this.wait) && this._throttledRequestHandler(), s > Math.floor(d.TIMEOUT * this.wait) && (d.warn(\"Request \" + this._requests[0].id + \" timed out, over \" + Math.floor(d.TIMEOUT * this.wait) + \" seconds since last activity\"), this._throttledRequestHandler());\n                }\n              }\n            },\n            _getRequestStatus: function (t, e) {\n              var n;\n              if (4 === t.xhr.readyState) try {\n                n = t.xhr.status;\n              } catch (t) {\n                d.error(\"Caught an error while retrieving a request's status, reqStatus: \" + n);\n              }\n              return void 0 === n && (n = \"number\" == typeof e ? e : 0), n;\n            },\n            _onRequestStateChange: function (t, e) {\n              if (d.debug(\"request id \" + e.id + \".\" + e.sends + \" state changed to \" + e.xhr.readyState), e.abort) e.abort = !1;else if (4 === e.xhr.readyState) {\n                var n = this._getRequestStatus(e);\n\n                if (this.lastResponseHeaders = e.xhr.getAllResponseHeaders(), this.disconnecting && 400 <= n) return this._hitError(n), void this._callProtocolErrorHandlers(e);\n                var s = 0 < n && n < 500,\n                    r = e.sends > this._conn.maxRetries;\n\n                if ((s || r) && (this._removeRequest(e), d.debug(\"request id \" + e.id + \" should now be removed\")), 200 === n) {\n                  var o = this._requests[0] === e;\n                  (this._requests[1] === e || o && 0 < this._requests.length && this._requests[0].age() > Math.floor(d.SECONDARY_TIMEOUT * this.wait)) && this._restartRequest(0), this._conn.nextValidRid(Number(e.rid) + 1), d.debug(\"request id \" + e.id + \".\" + e.sends + \" got 200\"), t(e), this.errors = 0;\n                } else 0 === n || 400 <= n && n < 600 || 12e3 <= n ? (d.error(\"request id \" + e.id + \".\" + e.sends + \" error \" + n + \" happened\"), this._hitError(n), this._callProtocolErrorHandlers(e), 400 <= n && n < 500 && (this._conn._changeConnectStatus(d.Status.DISCONNECTING, null), this._conn._doDisconnect())) : d.error(\"request id \" + e.id + \".\" + e.sends + \" error \" + n + \" happened\");\n\n                s || r ? r && !this._conn.connected && this._conn._changeConnectStatus(d.Status.CONNFAIL, \"giving-up\") : this._throttledRequestHandler();\n              }\n            },\n            _processRequest: function (t) {\n              var n = this,\n                  s = this._requests[t],\n                  e = this._getRequestStatus(s, -1);\n\n              if (s.sends > this._conn.maxRetries) this._conn._onDisconnectTimeout();else {\n                var r = s.age(),\n                    o = !isNaN(r) && r > Math.floor(d.TIMEOUT * this.wait),\n                    i = null !== s.dead && s.timeDead() > Math.floor(d.SECONDARY_TIMEOUT * this.wait),\n                    a = 4 === s.xhr.readyState && (e < 1 || 500 <= e);\n\n                if ((o || i || a) && (i && d.error(\"Request \".concat(this._requests[t].id, \" timed out (secondary), restarting\")), s.abort = !0, s.xhr.abort(), s.xhr.onreadystatechange = function () {}, this._requests[t] = new d.Request(s.xmlData, s.origFunc, s.rid, s.sends), s = this._requests[t]), 0 === s.xhr.readyState) {\n                  d.debug(\"request id \" + s.id + \".\" + s.sends + \" posting\");\n\n                  try {\n                    var c = this._conn.options.contentType || \"text/xml; charset=utf-8\";\n                    s.xhr.open(\"POST\", this._conn.service, !this._conn.options.sync), void 0 !== s.xhr.setRequestHeader && s.xhr.setRequestHeader(\"Content-Type\", c), this._conn.options.withCredentials && (s.xhr.withCredentials = !0);\n                  } catch (t) {\n                    return d.error(\"XHR open failed: \" + t.toString()), this._conn.connected || this._conn._changeConnectStatus(d.Status.CONNFAIL, \"bad-service\"), void this._conn.disconnect();\n                  }\n\n                  var u = function () {\n                    if (s.date = new Date(), n._conn.options.customHeaders) {\n                      var t = n._conn.options.customHeaders;\n\n                      for (var e in t) Object.prototype.hasOwnProperty.call(t, e) && s.xhr.setRequestHeader(e, t[e]);\n                    }\n\n                    s.xhr.send(s.data);\n                  };\n\n                  if (1 < s.sends) {\n                    var l = 1e3 * Math.min(Math.floor(d.TIMEOUT * this.wait), Math.pow(s.sends, 3));\n                    setTimeout(function () {\n                      u();\n                    }, l);\n                  } else u();\n\n                  s.sends++, this._conn.xmlOutput !== d.Connection.prototype.xmlOutput && (s.xmlData.nodeName === this.strip && s.xmlData.childNodes.length ? this._conn.xmlOutput(s.xmlData.childNodes[0]) : this._conn.xmlOutput(s.xmlData)), this._conn.rawOutput !== d.Connection.prototype.rawOutput && this._conn.rawOutput(s.data);\n                } else d.debug(\"_processRequest: \" + (0 === t ? \"first\" : \"second\") + \" request has readyState of \" + s.xhr.readyState);\n              }\n            },\n            _removeRequest: function (t) {\n              d.debug(\"removing request\");\n\n              for (var e = this._requests.length - 1; 0 <= e; e--) t === this._requests[e] && this._requests.splice(e, 1);\n\n              t.xhr.onreadystatechange = function () {}, this._throttledRequestHandler();\n            },\n            _restartRequest: function (t) {\n              var e = this._requests[t];\n              null === e.dead && (e.dead = new Date()), this._processRequest(t);\n            },\n            _reqToData: function (t) {\n              try {\n                return t.getResponse();\n              } catch (t) {\n                if (\"parsererror\" !== t.message) throw t;\n\n                this._conn.disconnect(\"strophe-parsererror\");\n              }\n            },\n            _sendTerminate: function (t) {\n              d.info(\"_sendTerminate was called\");\n\n              var e = this._buildBody().attrs({\n                type: \"terminate\"\n              });\n\n              t && e.cnode(t.tree());\n              var n = new d.Request(e.tree(), this._onRequestStateChange.bind(this, this._conn._dataRecv.bind(this._conn)), e.tree().getAttribute(\"rid\"));\n              this._requests.push(n), this._throttledRequestHandler();\n            },\n            _send: function () {\n              var t = this;\n              clearTimeout(this._conn._idleTimeout), this._throttledRequestHandler(), this._conn._idleTimeout = setTimeout(function () {\n                return t._conn._onIdle();\n              }, 100);\n            },\n            _sendRestart: function () {\n              this._throttledRequestHandler(), clearTimeout(this._conn._idleTimeout);\n            },\n            _throttledRequestHandler: function () {\n              this._requests ? d.debug(\"_throttledRequestHandler called with \" + this._requests.length + \" requests\") : d.debug(\"_throttledRequestHandler called with undefined requests\"), this._requests && 0 !== this._requests.length && (0 < this._requests.length && this._processRequest(0), 1 < this._requests.length && Math.abs(this._requests[0].rid - this._requests[1].rid) < this.window && this._processRequest(1));\n            }\n          };\n        },\n        \"./src/core.js\": function (t, e, n) {\n          \"use strict\";\n\n          n.r(e);\n          var E = n(\"./src/md5.js\"),\n              C = n(\"./src/sha1.js\"),\n              T = n(\"./src/utils.js\");\n\n          function o(t) {\n            return function (t) {\n              if (Array.isArray(t)) {\n                for (var e = 0, n = new Array(t.length); e < t.length; e++) n[e] = t[e];\n\n                return n;\n              }\n            }(t) || function (t) {\n              if (Symbol.iterator in Object(t) || \"[object Arguments]\" === Object.prototype.toString.call(t)) return Array.from(t);\n            }(t) || function () {\n              throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n            }();\n          }\n\n          function f(t) {\n            return (f = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (t) {\n              return typeof t;\n            } : function (t) {\n              return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t;\n            })(t);\n          }\n\n          function i(t, e) {\n            return new g.Builder(t, e);\n          }\n\n          function r(t) {\n            return new g.Builder(\"iq\", t);\n          }\n\n          function s(t) {\n            return new g.Builder(\"presence\", t);\n          }\n\n          var g = {\n            VERSION: \"1.3.0\",\n            NS: {\n              HTTPBIND: \"http://jabber.org/protocol/httpbind\",\n              BOSH: \"urn:xmpp:xbosh\",\n              CLIENT: \"jabber:client\",\n              AUTH: \"jabber:iq:auth\",\n              ROSTER: \"jabber:iq:roster\",\n              PROFILE: \"jabber:iq:profile\",\n              DISCO_INFO: \"http://jabber.org/protocol/disco#info\",\n              DISCO_ITEMS: \"http://jabber.org/protocol/disco#items\",\n              MUC: \"http://jabber.org/protocol/muc\",\n              SASL: \"urn:ietf:params:xml:ns:xmpp-sasl\",\n              STREAM: \"http://etherx.jabber.org/streams\",\n              FRAMING: \"urn:ietf:params:xml:ns:xmpp-framing\",\n              BIND: \"urn:ietf:params:xml:ns:xmpp-bind\",\n              SESSION: \"urn:ietf:params:xml:ns:xmpp-session\",\n              VERSION: \"jabber:iq:version\",\n              STANZAS: \"urn:ietf:params:xml:ns:xmpp-stanzas\",\n              XHTML_IM: \"http://jabber.org/protocol/xhtml-im\",\n              XHTML: \"http://www.w3.org/1999/xhtml\"\n            },\n            XHTML: {\n              tags: [\"a\", \"blockquote\", \"br\", \"cite\", \"em\", \"img\", \"li\", \"ol\", \"p\", \"span\", \"strong\", \"ul\", \"body\"],\n              attributes: {\n                a: [\"href\"],\n                blockquote: [\"style\"],\n                br: [],\n                cite: [\"style\"],\n                em: [],\n                img: [\"src\", \"alt\", \"style\", \"height\", \"width\"],\n                li: [\"style\"],\n                ol: [\"style\"],\n                p: [\"style\"],\n                span: [\"style\"],\n                strong: [],\n                ul: [\"style\"],\n                body: []\n              },\n              css: [\"background-color\", \"color\", \"font-family\", \"font-size\", \"font-style\", \"font-weight\", \"margin-left\", \"margin-right\", \"text-align\", \"text-decoration\"],\n              validTag: function (t) {\n                for (var e = 0; e < g.XHTML.tags.length; e++) if (t === g.XHTML.tags[e]) return !0;\n\n                return !1;\n              },\n              validAttribute: function (t, e) {\n                if (void 0 !== g.XHTML.attributes[t] && 0 < g.XHTML.attributes[t].length) for (var n = 0; n < g.XHTML.attributes[t].length; n++) if (e === g.XHTML.attributes[t][n]) return !0;\n                return !1;\n              },\n              validCSS: function (t) {\n                for (var e = 0; e < g.XHTML.css.length; e++) if (t === g.XHTML.css[e]) return !0;\n\n                return !1;\n              }\n            },\n            Status: {\n              ERROR: 0,\n              CONNECTING: 1,\n              CONNFAIL: 2,\n              AUTHENTICATING: 3,\n              AUTHFAIL: 4,\n              CONNECTED: 5,\n              DISCONNECTED: 6,\n              DISCONNECTING: 7,\n              ATTACHED: 8,\n              REDIRECT: 9,\n              CONNTIMEOUT: 10\n            },\n            ErrorCondition: {\n              BAD_FORMAT: \"bad-format\",\n              CONFLICT: \"conflict\",\n              MISSING_JID_NODE: \"x-strophe-bad-non-anon-jid\",\n              NO_AUTH_MECH: \"no-auth-mech\",\n              UNKNOWN_REASON: \"unknown\"\n            },\n            LogLevel: {\n              DEBUG: 0,\n              INFO: 1,\n              WARN: 2,\n              ERROR: 3,\n              FATAL: 4\n            },\n            ElementType: {\n              NORMAL: 1,\n              TEXT: 3,\n              CDATA: 4,\n              FRAGMENT: 11\n            },\n            TIMEOUT: 1.1,\n            SECONDARY_TIMEOUT: .1,\n            addNamespace: function (t, e) {\n              g.NS[t] = e;\n            },\n            forEachChild: function (t, e, n) {\n              for (var s = 0; s < t.childNodes.length; s++) {\n                var r = t.childNodes[s];\n                r.nodeType !== g.ElementType.NORMAL || e && !this.isTagEqual(r, e) || n(r);\n              }\n            },\n            isTagEqual: function (t, e) {\n              return t.tagName === e;\n            },\n            _xmlGenerator: null,\n            _makeGenerator: function () {\n              var t;\n              return void 0 === document.implementation.createDocument || document.implementation.createDocument && document.documentMode && document.documentMode < 10 ? (t = this._getIEXmlDom()).appendChild(t.createElement(\"strophe\")) : t = document.implementation.createDocument(\"jabber:client\", \"strophe\", null), t;\n            },\n            xmlGenerator: function () {\n              return g._xmlGenerator || (g._xmlGenerator = g._makeGenerator()), g._xmlGenerator;\n            },\n            _getIEXmlDom: function () {\n              for (var e = null, t = [\"Msxml2.DOMDocument.6.0\", \"Msxml2.DOMDocument.5.0\", \"Msxml2.DOMDocument.4.0\", \"MSXML2.DOMDocument.3.0\", \"MSXML2.DOMDocument\", \"MSXML.DOMDocument\", \"Microsoft.XMLDOM\"], n = 0; n < t.length && null === e; n++) try {\n                e = new ActiveXObject(t[n]);\n              } catch (t) {\n                e = null;\n              }\n\n              return e;\n            },\n            xmlElement: function (t) {\n              if (!t) return null;\n\n              for (var e = g.xmlGenerator().createElement(t), n = 1; n < arguments.length; n++) {\n                var s = arguments[n];\n                if (s) if (\"string\" == typeof s || \"number\" == typeof s) e.appendChild(g.xmlTextNode(s));else if (\"object\" === f(s) && \"function\" == typeof s.sort) for (var r = 0; r < s.length; r++) {\n                  var o = s[r];\n                  \"object\" === f(o) && \"function\" == typeof o.sort && void 0 !== o[1] && null !== o[1] && e.setAttribute(o[0], o[1]);\n                } else if (\"object\" === f(s)) for (var i in s) Object.prototype.hasOwnProperty.call(s, i) && void 0 !== s[i] && null !== s[i] && e.setAttribute(i, s[i]);\n              }\n\n              return e;\n            },\n            xmlescape: function (t) {\n              return t = (t = (t = (t = (t = t.replace(/\\&/g, \"&amp;\")).replace(/</g, \"&lt;\")).replace(/>/g, \"&gt;\")).replace(/'/g, \"&apos;\")).replace(/\"/g, \"&quot;\");\n            },\n            xmlunescape: function (t) {\n              return t = (t = (t = (t = (t = t.replace(/\\&amp;/g, \"&\")).replace(/&lt;/g, \"<\")).replace(/&gt;/g, \">\")).replace(/&apos;/g, \"'\")).replace(/&quot;/g, '\"');\n            },\n            xmlTextNode: function (t) {\n              return g.xmlGenerator().createTextNode(t);\n            },\n            xmlHtmlNode: function (t) {\n              var e;\n              DOMParser ? e = new DOMParser().parseFromString(t, \"text/xml\") : ((e = new ActiveXObject(\"Microsoft.XMLDOM\")).async = \"false\", e.loadXML(t));\n              return e;\n            },\n            getText: function (t) {\n              if (!t) return null;\n              var e = \"\";\n              0 === t.childNodes.length && t.nodeType === g.ElementType.TEXT && (e += t.nodeValue);\n\n              for (var n = 0; n < t.childNodes.length; n++) t.childNodes[n].nodeType === g.ElementType.TEXT && (e += t.childNodes[n].nodeValue);\n\n              return g.xmlescape(e);\n            },\n            copyElement: function (t) {\n              var e;\n\n              if (t.nodeType === g.ElementType.NORMAL) {\n                e = g.xmlElement(t.tagName);\n\n                for (var n = 0; n < t.attributes.length; n++) e.setAttribute(t.attributes[n].nodeName, t.attributes[n].value);\n\n                for (var s = 0; s < t.childNodes.length; s++) e.appendChild(g.copyElement(t.childNodes[s]));\n              } else t.nodeType === g.ElementType.TEXT && (e = g.xmlGenerator().createTextNode(t.nodeValue));\n\n              return e;\n            },\n            createHtml: function (t) {\n              var e;\n\n              if (t.nodeType === g.ElementType.NORMAL) {\n                var n = t.nodeName.toLowerCase();\n                if (g.XHTML.validTag(n)) try {\n                  e = g.xmlElement(n);\n\n                  for (var s = 0; s < g.XHTML.attributes[n].length; s++) {\n                    var r = g.XHTML.attributes[n][s],\n                        o = t.getAttribute(r);\n                    if (null != o && \"\" !== o && !1 !== o && 0 !== o) if (\"style\" === r && \"object\" === f(o) && void 0 !== o.cssText && (o = o.cssText), \"style\" === r) {\n                      for (var i = [], a = o.split(\";\"), c = 0; c < a.length; c++) {\n                        var u = a[c].split(\":\"),\n                            l = u[0].replace(/^\\s*/, \"\").replace(/\\s*$/, \"\").toLowerCase();\n\n                        if (g.XHTML.validCSS(l)) {\n                          var d = u[1].replace(/^\\s*/, \"\").replace(/\\s*$/, \"\");\n                          i.push(l + \": \" + d);\n                        }\n                      }\n\n                      0 < i.length && (o = i.join(\"; \"), e.setAttribute(r, o));\n                    } else e.setAttribute(r, o);\n                  }\n\n                  for (var h = 0; h < t.childNodes.length; h++) e.appendChild(g.createHtml(t.childNodes[h]));\n                } catch (t) {\n                  e = g.xmlTextNode(\"\");\n                } else {\n                  e = g.xmlGenerator().createDocumentFragment();\n\n                  for (var p = 0; p < t.childNodes.length; p++) e.appendChild(g.createHtml(t.childNodes[p]));\n                }\n              } else if (t.nodeType === g.ElementType.FRAGMENT) {\n                e = g.xmlGenerator().createDocumentFragment();\n\n                for (var E = 0; E < t.childNodes.length; E++) e.appendChild(g.createHtml(t.childNodes[E]));\n              } else t.nodeType === g.ElementType.TEXT && (e = g.xmlTextNode(t.nodeValue));\n\n              return e;\n            },\n            escapeNode: function (t) {\n              return \"string\" != typeof t ? t : t.replace(/^\\s+|\\s+$/g, \"\").replace(/\\\\/g, \"\\\\5c\").replace(/ /g, \"\\\\20\").replace(/\\\"/g, \"\\\\22\").replace(/\\&/g, \"\\\\26\").replace(/\\'/g, \"\\\\27\").replace(/\\//g, \"\\\\2f\").replace(/:/g, \"\\\\3a\").replace(/</g, \"\\\\3c\").replace(/>/g, \"\\\\3e\").replace(/@/g, \"\\\\40\");\n            },\n            unescapeNode: function (t) {\n              return \"string\" != typeof t ? t : t.replace(/\\\\20/g, \" \").replace(/\\\\22/g, '\"').replace(/\\\\26/g, \"&\").replace(/\\\\27/g, \"'\").replace(/\\\\2f/g, \"/\").replace(/\\\\3a/g, \":\").replace(/\\\\3c/g, \"<\").replace(/\\\\3e/g, \">\").replace(/\\\\40/g, \"@\").replace(/\\\\5c/g, \"\\\\\");\n            },\n            getNodeFromJid: function (t) {\n              return t.indexOf(\"@\") < 0 ? null : t.split(\"@\")[0];\n            },\n            getDomainFromJid: function (t) {\n              var e = g.getBareJidFromJid(t);\n              if (e.indexOf(\"@\") < 0) return e;\n              var n = e.split(\"@\");\n              return n.splice(0, 1), n.join(\"@\");\n            },\n            getResourceFromJid: function (t) {\n              var e = t.split(\"/\");\n              return e.length < 2 ? null : (e.splice(0, 1), e.join(\"/\"));\n            },\n            getBareJidFromJid: function (t) {\n              return t ? t.split(\"/\")[0] : null;\n            },\n            _handleError: function (t) {\n              void 0 !== t.stack && g.fatal(t.stack), t.sourceURL ? g.fatal(\"error: \" + this.handler + \" \" + t.sourceURL + \":\" + t.line + \" - \" + t.name + \": \" + t.message) : t.fileName ? g.fatal(\"error: \" + this.handler + \" \" + t.fileName + \":\" + t.lineNumber + \" - \" + t.name + \": \" + t.message) : g.fatal(\"error: \" + t.message);\n            },\n            log: function (t, e) {\n              t === this.LogLevel.FATAL && \"object\" === f(window.console) && \"function\" == typeof window.console.error && window.console.error(e);\n            },\n            debug: function (t) {\n              this.log(this.LogLevel.DEBUG, t);\n            },\n            info: function (t) {\n              this.log(this.LogLevel.INFO, t);\n            },\n            warn: function (t) {\n              this.log(this.LogLevel.WARN, t);\n            },\n            error: function (t) {\n              this.log(this.LogLevel.ERROR, t);\n            },\n            fatal: function (t) {\n              this.log(this.LogLevel.FATAL, t);\n            },\n            serialize: function (n) {\n              if (!n) return null;\n              \"function\" == typeof n.tree && (n = n.tree());\n              var t = o(Array(n.attributes.length).keys()).map(function (t) {\n                return n.attributes[t].nodeName;\n              });\n              t.sort();\n              var e = t.reduce(function (t, e) {\n                return \"\".concat(t, \" \").concat(e, '=\"').concat(g.xmlescape(n.attributes.getNamedItem(e).value), '\"');\n              }, \"<\".concat(n.nodeName));\n\n              if (0 < n.childNodes.length) {\n                e += \">\";\n\n                for (var s = 0; s < n.childNodes.length; s++) {\n                  var r = n.childNodes[s];\n\n                  switch (r.nodeType) {\n                    case g.ElementType.NORMAL:\n                      e += g.serialize(r);\n                      break;\n\n                    case g.ElementType.TEXT:\n                      e += g.xmlescape(r.nodeValue);\n                      break;\n\n                    case g.ElementType.CDATA:\n                      e += \"<![CDATA[\" + r.nodeValue + \"]]>\";\n                  }\n                }\n\n                e += \"</\" + n.nodeName + \">\";\n              } else e += \"/>\";\n\n              return e;\n            },\n            _requestId: 0,\n            _connectionPlugins: {},\n            addConnectionPlugin: function (t, e) {\n              g._connectionPlugins[t] = e;\n            },\n            Builder: function (t, e) {\n              \"presence\" !== t && \"message\" !== t && \"iq\" !== t || (e && !e.xmlns ? e.xmlns = g.NS.CLIENT : e || (e = {\n                xmlns: g.NS.CLIENT\n              })), this.nodeTree = g.xmlElement(t, e), this.node = this.nodeTree;\n            }\n          };\n          g.Builder.prototype = {\n            tree: function () {\n              return this.nodeTree;\n            },\n            toString: function () {\n              return g.serialize(this.nodeTree);\n            },\n            up: function () {\n              return this.node = this.node.parentNode, this;\n            },\n            root: function () {\n              return this.node = this.nodeTree, this;\n            },\n            attrs: function (t) {\n              for (var e in t) Object.prototype.hasOwnProperty.call(t, e) && (void 0 === t[e] ? this.node.removeAttribute(e) : this.node.setAttribute(e, t[e]));\n\n              return this;\n            },\n            c: function (t, e, n) {\n              var s = g.xmlElement(t, e, n);\n              return this.node.appendChild(s), \"string\" != typeof n && \"number\" != typeof n && (this.node = s), this;\n            },\n            cnode: function (t) {\n              var e,\n                  n = g.xmlGenerator();\n\n              try {\n                e = void 0 !== n.importNode;\n              } catch (t) {\n                e = !1;\n              }\n\n              var s = e ? n.importNode(t, !0) : g.copyElement(t);\n              return this.node.appendChild(s), this.node = s, this;\n            },\n            t: function (t) {\n              var e = g.xmlTextNode(t);\n              return this.node.appendChild(e), this;\n            },\n            h: function (t) {\n              var e = document.createElement(\"body\");\n              e.innerHTML = t;\n\n              for (var n = g.createHtml(e); 0 < n.childNodes.length;) this.node.appendChild(n.childNodes[0]);\n\n              return this;\n            }\n          }, g.Handler = function (t, e, n, s, r, o, i) {\n            this.handler = t, this.ns = e, this.name = n, this.type = s, this.id = r, this.options = i || {\n              matchBareFromJid: !1,\n              ignoreNamespaceFragment: !1\n            }, this.options.matchBare && (g.warn('The \"matchBare\" option is deprecated, use \"matchBareFromJid\" instead.'), this.options.matchBareFromJid = this.options.matchBare, delete this.options.matchBare), this.options.matchBareFromJid ? this.from = o ? g.getBareJidFromJid(o) : null : this.from = o, this.user = !0;\n          }, g.Handler.prototype = {\n            getNamespace: function (t) {\n              var e = t.getAttribute(\"xmlns\");\n              return e && this.options.ignoreNamespaceFragment && (e = e.split(\"#\")[0]), e;\n            },\n            namespaceMatch: function (t) {\n              var e = this,\n                  n = !1;\n              return !this.ns || (g.forEachChild(t, null, function (t) {\n                e.getNamespace(t) === e.ns && (n = !0);\n              }), n || this.getNamespace(t) === this.ns);\n            },\n            isMatch: function (t) {\n              var e = t.getAttribute(\"from\");\n              this.options.matchBareFromJid && (e = g.getBareJidFromJid(e));\n              var n = t.getAttribute(\"type\");\n              return !(!this.namespaceMatch(t) || this.name && !g.isTagEqual(t, this.name) || this.type && (Array.isArray(this.type) ? -1 === this.type.indexOf(n) : n !== this.type) || this.id && t.getAttribute(\"id\") !== this.id || this.from && e !== this.from);\n            },\n            run: function (t) {\n              var e = null;\n\n              try {\n                e = this.handler(t);\n              } catch (t) {\n                throw g._handleError(t), t;\n              }\n\n              return e;\n            },\n            toString: function () {\n              return \"{Handler: \" + this.handler + \"(\" + this.name + \",\" + this.id + \",\" + this.ns + \")}\";\n            }\n          }, g.TimedHandler = function (t, e) {\n            this.period = t, this.handler = e, this.lastCalled = new Date().getTime(), this.user = !0;\n          }, g.TimedHandler.prototype = {\n            run: function () {\n              return this.lastCalled = new Date().getTime(), this.handler();\n            },\n            reset: function () {\n              this.lastCalled = new Date().getTime();\n            },\n            toString: function () {\n              return \"{TimedHandler: \" + this.handler + \"(\" + this.period + \")}\";\n            }\n          }, g.Connection = function (t, e) {\n            var n = this;\n            this.service = t, this.options = e || {};\n            var s = this.options.protocol || \"\";\n\n            for (var r in 0 === t.indexOf(\"ws:\") || 0 === t.indexOf(\"wss:\") || 0 === s.indexOf(\"ws\") ? this._proto = new g.Websocket(this) : this._proto = new g.Bosh(this), this.jid = \"\", this.domain = null, this.features = null, this._sasl_data = {}, this.do_session = !1, this.do_bind = !1, this.timedHandlers = [], this.handlers = [], this.removeTimeds = [], this.removeHandlers = [], this.addTimeds = [], this.addHandlers = [], this.protocolErrorHandlers = {\n              HTTP: {},\n              websocket: {}\n            }, this._idleTimeout = null, this._disconnectTimeout = null, this.authenticated = !1, this.connected = !1, this.disconnecting = !1, this.do_authentication = !0, this.paused = !1, this.restored = !1, this._data = [], this._uniqueId = 0, this._sasl_success_handler = null, this._sasl_failure_handler = null, this._sasl_challenge_handler = null, this.maxRetries = 5, this._idleTimeout = setTimeout(function () {\n              return n._onIdle();\n            }, 100), T.default.addCookies(this.options.cookies), this.registerSASLMechanisms(this.options.mechanisms), g._connectionPlugins) if (Object.prototype.hasOwnProperty.call(g._connectionPlugins, r)) {\n              var o = function () {};\n\n              o.prototype = g._connectionPlugins[r], this[r] = new o(), this[r].init(this);\n            }\n          }, g.Connection.prototype = {\n            reset: function () {\n              this._proto._reset(), this.do_session = !1, this.do_bind = !1, this.timedHandlers = [], this.handlers = [], this.removeTimeds = [], this.removeHandlers = [], this.addTimeds = [], this.addHandlers = [], this.authenticated = !1, this.connected = !1, this.disconnecting = !1, this.restored = !1, this._data = [], this._requests = [], this._uniqueId = 0;\n            },\n            pause: function () {\n              this.paused = !0;\n            },\n            resume: function () {\n              this.paused = !1;\n            },\n            getUniqueId: function (t) {\n              var e = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (t) {\n                var e = 16 * Math.random() | 0;\n                return (\"x\" === t ? e : 3 & e | 8).toString(16);\n              });\n              return \"string\" == typeof t || \"number\" == typeof t ? e + \":\" + t : e + \"\";\n            },\n            addProtocolErrorHandler: function (t, e, n) {\n              this.protocolErrorHandlers[t][e] = n;\n            },\n            connect: function (t, e, n, s, r, o, i) {\n              this.jid = t, this.authzid = g.getBareJidFromJid(this.jid), this.authcid = i || g.getNodeFromJid(this.jid), this.pass = e, this.servtype = \"xmpp\", this.connect_callback = n, this.disconnecting = !1, this.connected = !1, this.authenticated = !1, this.restored = !1, this.domain = g.getDomainFromJid(this.jid), this._changeConnectStatus(g.Status.CONNECTING, null), this._proto._connect(s, r, o);\n            },\n            attach: function (t, e, n, s, r, o, i) {\n              if (!(this._proto instanceof g.Bosh)) {\n                var a = new Error('The \"attach\" method can only be used with a BOSH connection.');\n                throw a.name = \"StropheSessionError\", a;\n              }\n\n              this._proto._attach(t, e, n, s, r, o, i);\n            },\n            restore: function (t, e, n, s, r) {\n              if (!this._sessionCachingSupported()) {\n                var o = new Error('The \"restore\" method can only be used with a BOSH connection.');\n                throw o.name = \"StropheSessionError\", o;\n              }\n\n              this._proto._restore(t, e, n, s, r);\n            },\n            _sessionCachingSupported: function () {\n              if (this._proto instanceof g.Bosh) {\n                if (!JSON) return !1;\n\n                try {\n                  sessionStorage.setItem(\"_strophe_\", \"_strophe_\"), sessionStorage.removeItem(\"_strophe_\");\n                } catch (t) {\n                  return !1;\n                }\n\n                return !0;\n              }\n\n              return !1;\n            },\n            xmlInput: function (t) {},\n            xmlOutput: function (t) {},\n            rawInput: function (t) {},\n            rawOutput: function (t) {},\n            nextValidRid: function (t) {},\n            send: function (t) {\n              if (null !== t) {\n                if (\"function\" == typeof t.sort) for (var e = 0; e < t.length; e++) this._queueData(t[e]);else \"function\" == typeof t.tree ? this._queueData(t.tree()) : this._queueData(t);\n\n                this._proto._send();\n              }\n            },\n            flush: function () {\n              clearTimeout(this._idleTimeout), this._onIdle();\n            },\n            sendPresence: function (t, e, n, s) {\n              var r = this,\n                  o = null;\n              \"function\" == typeof t.tree && (t = t.tree());\n              var i = t.getAttribute(\"id\");\n\n              if (i || (i = this.getUniqueId(\"sendPresence\"), t.setAttribute(\"id\", i)), \"function\" == typeof e || \"function\" == typeof n) {\n                var a = this.addHandler(function (t) {\n                  o && r.deleteTimedHandler(o), \"error\" === t.getAttribute(\"type\") ? n && n(t) : e && e(t);\n                }, null, \"presence\", null, i);\n                s && (o = this.addTimedHandler(s, function () {\n                  return r.deleteHandler(a), n && n(null), !1;\n                }));\n              }\n\n              return this.send(t), i;\n            },\n            sendIQ: function (t, s, r, e) {\n              var o = this,\n                  i = null;\n              \"function\" == typeof t.tree && (t = t.tree());\n              var n = t.getAttribute(\"id\");\n\n              if (n || (n = this.getUniqueId(\"sendIQ\"), t.setAttribute(\"id\", n)), \"function\" == typeof s || \"function\" == typeof r) {\n                var a = this.addHandler(function (t) {\n                  i && o.deleteTimedHandler(i);\n                  var e = t.getAttribute(\"type\");\n                  if (\"result\" === e) s && s(t);else {\n                    if (\"error\" !== e) {\n                      var n = new Error(\"Got bad IQ type of \".concat(e));\n                      throw n.name = \"StropheError\", n;\n                    }\n\n                    r && r(t);\n                  }\n                }, null, \"iq\", [\"error\", \"result\"], n);\n                e && (i = this.addTimedHandler(e, function () {\n                  return o.deleteHandler(a), r && r(null), !1;\n                }));\n              }\n\n              return this.send(t), n;\n            },\n            _queueData: function (t) {\n              if (null === t || !t.tagName || !t.childNodes) {\n                var e = new Error(\"Cannot queue non-DOMElement.\");\n                throw e.name = \"StropheError\", e;\n              }\n\n              this._data.push(t);\n            },\n            _sendRestart: function () {\n              var t = this;\n              this._data.push(\"restart\"), this._proto._sendRestart(), this._idleTimeout = setTimeout(function () {\n                return t._onIdle();\n              }, 100);\n            },\n            addTimedHandler: function (t, e) {\n              var n = new g.TimedHandler(t, e);\n              return this.addTimeds.push(n), n;\n            },\n            deleteTimedHandler: function (t) {\n              this.removeTimeds.push(t);\n            },\n            addHandler: function (t, e, n, s, r, o, i) {\n              var a = new g.Handler(t, e, n, s, r, o, i);\n              return this.addHandlers.push(a), a;\n            },\n            deleteHandler: function (t) {\n              this.removeHandlers.push(t);\n              var e = this.addHandlers.indexOf(t);\n              0 <= e && this.addHandlers.splice(e, 1);\n            },\n            registerSASLMechanisms: function (t) {\n              this.mechanisms = {}, (t = t || [g.SASLAnonymous, g.SASLExternal, g.SASLMD5, g.SASLOAuthBearer, g.SASLXOAuth2, g.SASLPlain, g.SASLSHA1]).forEach(this.registerSASLMechanism.bind(this));\n            },\n            registerSASLMechanism: function (t) {\n              this.mechanisms[t.prototype.name] = t;\n            },\n            disconnect: function (t) {\n              if (this._changeConnectStatus(g.Status.DISCONNECTING, t), g.info(\"Disconnect was called because: \" + t), this.connected) {\n                var e = !1;\n                this.disconnecting = !0, this.authenticated && (e = s({\n                  xmlns: g.NS.CLIENT,\n                  type: \"unavailable\"\n                })), this._disconnectTimeout = this._addSysTimedHandler(3e3, this._onDisconnectTimeout.bind(this)), this._proto._disconnect(e);\n              } else g.info(\"Disconnect was called before Strophe connected to the server\"), this._proto._abortAllRequests(), this._doDisconnect();\n            },\n            _changeConnectStatus: function (t, e, n) {\n              for (var s in g._connectionPlugins) if (Object.prototype.hasOwnProperty.call(g._connectionPlugins, s)) {\n                var r = this[s];\n                if (r.statusChanged) try {\n                  r.statusChanged(t, e);\n                } catch (t) {\n                  g.error(\"\".concat(s, \" plugin caused an exception changing status: \").concat(t));\n                }\n              }\n\n              if (this.connect_callback) try {\n                this.connect_callback(t, e, n);\n              } catch (t) {\n                g._handleError(t), g.error(\"User connection callback caused an exception: \".concat(t));\n              }\n            },\n            _doDisconnect: function (t) {\n              \"number\" == typeof this._idleTimeout && clearTimeout(this._idleTimeout), null !== this._disconnectTimeout && (this.deleteTimedHandler(this._disconnectTimeout), this._disconnectTimeout = null), g.info(\"_doDisconnect was called\"), this._proto._doDisconnect(), this.authenticated = !1, this.disconnecting = !1, this.restored = !1, this.handlers = [], this.timedHandlers = [], this.removeTimeds = [], this.removeHandlers = [], this.addTimeds = [], this.addHandlers = [], this._changeConnectStatus(g.Status.DISCONNECTED, t), this.connected = !1;\n            },\n            _dataRecv: function (t, e) {\n              var r = this;\n              g.info(\"_dataRecv called\");\n\n              var n = this._proto._reqToData(t);\n\n              if (null !== n) {\n                for (this.xmlInput !== g.Connection.prototype.xmlInput && (n.nodeName === this._proto.strip && n.childNodes.length ? this.xmlInput(n.childNodes[0]) : this.xmlInput(n)), this.rawInput !== g.Connection.prototype.rawInput && (e ? this.rawInput(e) : this.rawInput(g.serialize(n))); 0 < this.removeHandlers.length;) {\n                  var s = this.removeHandlers.pop(),\n                      o = this.handlers.indexOf(s);\n                  0 <= o && this.handlers.splice(o, 1);\n                }\n\n                for (; 0 < this.addHandlers.length;) this.handlers.push(this.addHandlers.pop());\n\n                if (this.disconnecting && this._proto._emptyQueue()) this._doDisconnect();else {\n                  var i = n.getAttribute(\"type\");\n\n                  if (null !== i && \"terminate\" === i) {\n                    if (this.disconnecting) return;\n                    var a = n.getAttribute(\"condition\"),\n                        c = n.getElementsByTagName(\"conflict\");\n                    return null !== a ? (\"remote-stream-error\" === a && 0 < c.length && (a = \"conflict\"), this._changeConnectStatus(g.Status.CONNFAIL, a)) : this._changeConnectStatus(g.Status.CONNFAIL, g.ErrorCondition.UNKOWN_REASON), void this._doDisconnect(a);\n                  }\n\n                  g.forEachChild(n, null, function (t) {\n                    var e = r.handlers;\n                    r.handlers = [];\n\n                    for (var n = 0; n < e.length; n++) {\n                      var s = e[n];\n\n                      try {\n                        !s.isMatch(t) || !r.authenticated && s.user ? r.handlers.push(s) : s.run(t) && r.handlers.push(s);\n                      } catch (t) {\n                        g.warn(\"Removing Strophe handlers due to uncaught exception: \" + t.message);\n                      }\n                    }\n                  });\n                }\n              }\n            },\n            mechanisms: {},\n            _connect_cb: function (t, e, n) {\n              var s;\n              g.info(\"_connect_cb was called\"), this.connected = !0;\n\n              try {\n                s = this._proto._reqToData(t);\n              } catch (t) {\n                if (t.name !== g.ErrorCondition.BAD_FORMAT) throw t;\n                this._changeConnectStatus(g.Status.CONNFAIL, g.ErrorCondition.BAD_FORMAT), this._doDisconnect(g.ErrorCondition.BAD_FORMAT);\n              }\n\n              if (s && (this.xmlInput !== g.Connection.prototype.xmlInput && (s.nodeName === this._proto.strip && s.childNodes.length ? this.xmlInput(s.childNodes[0]) : this.xmlInput(s)), this.rawInput !== g.Connection.prototype.rawInput && (n ? this.rawInput(n) : this.rawInput(g.serialize(s))), this._proto._connect_cb(s) !== g.Status.CONNFAIL)) if (s.getElementsByTagNameNS ? 0 < s.getElementsByTagNameNS(g.NS.STREAM, \"features\").length : 0 < s.getElementsByTagName(\"stream:features\").length || 0 < s.getElementsByTagName(\"features\").length) {\n                var r = [],\n                    o = s.getElementsByTagName(\"mechanism\");\n                if (0 < o.length) for (var i = 0; i < o.length; i++) {\n                  var a = g.getText(o[i]);\n                  this.mechanisms[a] && r.push(this.mechanisms[a]);\n                }\n                0 !== r.length || 0 !== s.getElementsByTagName(\"auth\").length ? !1 !== this.do_authentication && this.authenticate(r) : this._proto._no_auth_received(e);\n              } else this._proto._no_auth_received(e);\n            },\n            sortMechanismsByPriority: function (t) {\n              for (var e = 0; e < t.length - 1; ++e) {\n                for (var n = e, s = e + 1; s < t.length; ++s) t[s].prototype.priority > t[n].prototype.priority && (n = s);\n\n                if (n !== e) {\n                  var r = t[e];\n                  t[e] = t[n], t[n] = r;\n                }\n              }\n\n              return t;\n            },\n            _attemptSASLAuth: function (t) {\n              t = this.sortMechanismsByPriority(t || []);\n\n              for (var e = !1, n = 0; n < t.length; ++n) if (t[n].prototype.test(this)) {\n                this._sasl_success_handler = this._addSysHandler(this._sasl_success_cb.bind(this), null, \"success\", null, null), this._sasl_failure_handler = this._addSysHandler(this._sasl_failure_cb.bind(this), null, \"failure\", null, null), this._sasl_challenge_handler = this._addSysHandler(this._sasl_challenge_cb.bind(this), null, \"challenge\", null, null), this._sasl_mechanism = new t[n](), this._sasl_mechanism.onStart(this);\n                var s = i(\"auth\", {\n                  xmlns: g.NS.SASL,\n                  mechanism: this._sasl_mechanism.name\n                });\n\n                if (this._sasl_mechanism.isClientFirst) {\n                  var r = this._sasl_mechanism.onChallenge(this, null);\n\n                  s.t(btoa(r));\n                }\n\n                this.send(s.tree()), e = !0;\n                break;\n              }\n\n              return e;\n            },\n            _attemptLegacyAuth: function () {\n              null === g.getNodeFromJid(this.jid) ? (this._changeConnectStatus(g.Status.CONNFAIL, g.ErrorCondition.MISSING_JID_NODE), this.disconnect(g.ErrorCondition.MISSING_JID_NODE)) : (this._changeConnectStatus(g.Status.AUTHENTICATING, null), this._addSysHandler(this._auth1_cb.bind(this), null, null, null, \"_auth_1\"), this.send(r({\n                type: \"get\",\n                to: this.domain,\n                id: \"_auth_1\"\n              }).c(\"query\", {\n                xmlns: g.NS.AUTH\n              }).c(\"username\", {}).t(g.getNodeFromJid(this.jid)).tree()));\n            },\n            authenticate: function (t) {\n              this._attemptSASLAuth(t) || this._attemptLegacyAuth();\n            },\n            _sasl_challenge_cb: function (t) {\n              var e = atob(g.getText(t)),\n                  n = this._sasl_mechanism.onChallenge(this, e),\n                  s = i(\"response\", {\n                xmlns: g.NS.SASL\n              });\n\n              return \"\" !== n && s.t(btoa(n)), this.send(s.tree()), !0;\n            },\n            _auth1_cb: function (t) {\n              var e = r({\n                type: \"set\",\n                id: \"_auth_2\"\n              }).c(\"query\", {\n                xmlns: g.NS.AUTH\n              }).c(\"username\", {}).t(g.getNodeFromJid(this.jid)).up().c(\"password\").t(this.pass);\n              return g.getResourceFromJid(this.jid) || (this.jid = g.getBareJidFromJid(this.jid) + \"/strophe\"), e.up().c(\"resource\", {}).t(g.getResourceFromJid(this.jid)), this._addSysHandler(this._auth2_cb.bind(this), null, null, null, \"_auth_2\"), this.send(e.tree()), !1;\n            },\n            _sasl_success_cb: function (t) {\n              var n = this;\n\n              if (this._sasl_data[\"server-signature\"]) {\n                var e,\n                    s = atob(g.getText(t)).match(/([a-z]+)=([^,]+)(,|$)/);\n                if (\"v\" === s[1] && (e = s[2]), e !== this._sasl_data[\"server-signature\"]) return this.deleteHandler(this._sasl_failure_handler), this._sasl_failure_handler = null, this._sasl_challenge_handler && (this.deleteHandler(this._sasl_challenge_handler), this._sasl_challenge_handler = null), this._sasl_data = {}, this._sasl_failure_cb(null);\n              }\n\n              g.info(\"SASL authentication succeeded.\"), this._sasl_mechanism && this._sasl_mechanism.onSuccess(), this.deleteHandler(this._sasl_failure_handler), this._sasl_failure_handler = null, this._sasl_challenge_handler && (this.deleteHandler(this._sasl_challenge_handler), this._sasl_challenge_handler = null);\n\n              var r = [],\n                  o = function (t, e) {\n                for (; t.length;) n.deleteHandler(t.pop());\n\n                return n._sasl_auth1_cb(e), !1;\n              };\n\n              return r.push(this._addSysHandler(function (t) {\n                return o(r, t);\n              }, null, \"stream:features\", null, null)), r.push(this._addSysHandler(function (t) {\n                return o(r, t);\n              }, g.NS.STREAM, \"features\", null, null)), this._sendRestart(), !1;\n            },\n            _sasl_auth1_cb: function (t) {\n              this.features = t;\n\n              for (var e = 0; e < t.childNodes.length; e++) {\n                var n = t.childNodes[e];\n                \"bind\" === n.nodeName && (this.do_bind = !0), \"session\" === n.nodeName && (this.do_session = !0);\n              }\n\n              if (!this.do_bind) return this._changeConnectStatus(g.Status.AUTHFAIL, null), !1;\n\n              this._addSysHandler(this._sasl_bind_cb.bind(this), null, null, null, \"_bind_auth_2\");\n\n              var s = g.getResourceFromJid(this.jid);\n              return s ? this.send(r({\n                type: \"set\",\n                id: \"_bind_auth_2\"\n              }).c(\"bind\", {\n                xmlns: g.NS.BIND\n              }).c(\"resource\", {}).t(s).tree()) : this.send(r({\n                type: \"set\",\n                id: \"_bind_auth_2\"\n              }).c(\"bind\", {\n                xmlns: g.NS.BIND\n              }).tree()), !1;\n            },\n            _sasl_bind_cb: function (t) {\n              var e;\n              if (\"error\" === t.getAttribute(\"type\")) return g.info(\"SASL binding failed.\"), 0 < t.getElementsByTagName(\"conflict\").length && (e = g.ErrorCondition.CONFLICT), this._changeConnectStatus(g.Status.AUTHFAIL, e, t), !1;\n              var n = t.getElementsByTagName(\"bind\");\n              if (!(0 < n.length)) return g.info(\"SASL binding failed.\"), this._changeConnectStatus(g.Status.AUTHFAIL, null, t), !1;\n              var s = n[0].getElementsByTagName(\"jid\");\n              0 < s.length && (this.jid = g.getText(s[0]), this.do_session ? (this._addSysHandler(this._sasl_session_cb.bind(this), null, null, null, \"_session_auth_2\"), this.send(r({\n                type: \"set\",\n                id: \"_session_auth_2\"\n              }).c(\"session\", {\n                xmlns: g.NS.SESSION\n              }).tree())) : (this.authenticated = !0, this._changeConnectStatus(g.Status.CONNECTED, null)));\n            },\n            _sasl_session_cb: function (t) {\n              if (\"result\" === t.getAttribute(\"type\")) this.authenticated = !0, this._changeConnectStatus(g.Status.CONNECTED, null);else if (\"error\" === t.getAttribute(\"type\")) return g.info(\"Session creation failed.\"), this._changeConnectStatus(g.Status.AUTHFAIL, null, t), !1;\n              return !1;\n            },\n            _sasl_failure_cb: function (t) {\n              return this._sasl_success_handler && (this.deleteHandler(this._sasl_success_handler), this._sasl_success_handler = null), this._sasl_challenge_handler && (this.deleteHandler(this._sasl_challenge_handler), this._sasl_challenge_handler = null), this._sasl_mechanism && this._sasl_mechanism.onFailure(), this._changeConnectStatus(g.Status.AUTHFAIL, null, t), !1;\n            },\n            _auth2_cb: function (t) {\n              return \"result\" === t.getAttribute(\"type\") ? (this.authenticated = !0, this._changeConnectStatus(g.Status.CONNECTED, null)) : \"error\" === t.getAttribute(\"type\") && (this._changeConnectStatus(g.Status.AUTHFAIL, null, t), this.disconnect(\"authentication failed\")), !1;\n            },\n            _addSysTimedHandler: function (t, e) {\n              var n = new g.TimedHandler(t, e);\n              return n.user = !1, this.addTimeds.push(n), n;\n            },\n            _addSysHandler: function (t, e, n, s, r) {\n              var o = new g.Handler(t, e, n, s, r);\n              return o.user = !1, this.addHandlers.push(o), o;\n            },\n            _onDisconnectTimeout: function () {\n              return g.info(\"_onDisconnectTimeout was called\"), this._changeConnectStatus(g.Status.CONNTIMEOUT, null), this._proto._onDisconnectTimeout(), this._doDisconnect(), !1;\n            },\n            _onIdle: function () {\n              for (var t = this; 0 < this.addTimeds.length;) this.timedHandlers.push(this.addTimeds.pop());\n\n              for (; 0 < this.removeTimeds.length;) {\n                var e = this.removeTimeds.pop(),\n                    n = this.timedHandlers.indexOf(e);\n                0 <= n && this.timedHandlers.splice(n, 1);\n              }\n\n              for (var s = new Date().getTime(), r = [], o = 0; o < this.timedHandlers.length; o++) {\n                var i = this.timedHandlers[o];\n                if (this.authenticated || !i.user) i.lastCalled + i.period - s <= 0 ? i.run() && r.push(i) : r.push(i);\n              }\n\n              this.timedHandlers = r, clearTimeout(this._idleTimeout), this._proto._onIdle(), this.connected && (this._idleTimeout = setTimeout(function () {\n                return t._onIdle();\n              }, 100));\n            }\n          }, g.SASLMechanism = function (t, e, n) {\n            this.name = t, this.isClientFirst = e, this.priority = n;\n          }, g.SASLMechanism.prototype = {\n            test: function (t) {\n              return !0;\n            },\n            onStart: function (t) {\n              this._connection = t;\n            },\n            onChallenge: function (t, e) {\n              throw new Error(\"You should implement challenge handling!\");\n            },\n            onFailure: function () {\n              this._connection = null;\n            },\n            onSuccess: function () {\n              this._connection = null;\n            }\n          }, g.SASLAnonymous = function () {}, g.SASLAnonymous.prototype = new g.SASLMechanism(\"ANONYMOUS\", !1, 20), g.SASLAnonymous.prototype.test = function (t) {\n            return null === t.authcid;\n          }, g.SASLPlain = function () {}, g.SASLPlain.prototype = new g.SASLMechanism(\"PLAIN\", !0, 50), g.SASLPlain.prototype.test = function (t) {\n            return null !== t.authcid;\n          }, g.SASLPlain.prototype.onChallenge = function (t) {\n            var e = t.authzid;\n            return e += \"\\0\", e += t.authcid, e += \"\\0\", e += t.pass, T.default.utf16to8(e);\n          }, g.SASLSHA1 = function () {}, g.SASLSHA1.prototype = new g.SASLMechanism(\"SCRAM-SHA-1\", !0, 70), g.SASLSHA1.prototype.test = function (t) {\n            return null !== t.authcid;\n          }, g.SASLSHA1.prototype.onChallenge = function (t, e, n) {\n            var s = n || E.default.hexdigest(1234567890 * Math.random()),\n                r = \"n=\" + T.default.utf16to8(t.authcid);\n            return r += \",r=\", r += s, t._sasl_data.cnonce = s, r = \"n,,\" + (t._sasl_data[\"client-first-message-bare\"] = r), this.onChallenge = function (t, e) {\n              for (var n, s, r, o, i, a, c, u, l = \"c=biws,\", d = \"\".concat(t._sasl_data[\"client-first-message-bare\"], \",\").concat(e, \",\"), h = t._sasl_data.cnonce, p = /([a-z]+)=([^,]+)(,|$)/; e.match(p);) {\n                var E = e.match(p);\n\n                switch (e = e.replace(E[0], \"\"), E[1]) {\n                  case \"r\":\n                    n = E[2];\n                    break;\n\n                  case \"s\":\n                    s = E[2];\n                    break;\n\n                  case \"i\":\n                    r = E[2];\n                }\n              }\n\n              if (n.substr(0, h.length) !== h) return t._sasl_data = {}, t._sasl_failure_cb();\n              d += l += \"r=\" + n, s = atob(s), s += \"\\0\\0\\0\u0001\";\n              var f = T.default.utf16to8(t.pass);\n\n              for (o = a = C.default.core_hmac_sha1(f, s), c = 1; c < r; c++) {\n                for (i = C.default.core_hmac_sha1(f, C.default.binb2str(a)), u = 0; u < 5; u++) o[u] ^= i[u];\n\n                a = i;\n              }\n\n              o = C.default.binb2str(o);\n\n              var g = C.default.core_hmac_sha1(o, \"Client Key\"),\n                  _ = C.default.str_hmac_sha1(o, \"Server Key\"),\n                  m = C.default.core_hmac_sha1(C.default.str_sha1(C.default.binb2str(g)), d);\n\n              for (t._sasl_data[\"server-signature\"] = C.default.b64_hmac_sha1(_, d), u = 0; u < 5; u++) g[u] ^= m[u];\n\n              return l += \",p=\" + btoa(C.default.binb2str(g));\n            }, r;\n          }, g.SASLMD5 = function () {}, g.SASLMD5.prototype = new g.SASLMechanism(\"DIGEST-MD5\", !1, 60), g.SASLMD5.prototype.test = function (t) {\n            return null !== t.authcid;\n          }, g.SASLMD5.prototype._quote = function (t) {\n            return '\"' + t.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"') + '\"';\n          }, g.SASLMD5.prototype.onChallenge = function (t, e, n) {\n            for (var s = /([a-z]+)=(\"[^\"]+\"|[^,\"]+)(?:,|$)/, r = n || E.default.hexdigest(\"\" + 1234567890 * Math.random()), o = \"\", i = null, a = \"\"; e.match(s);) {\n              var c = e.match(s);\n\n              switch (e = e.replace(c[0], \"\"), c[2] = c[2].replace(/^\"(.+)\"$/, \"$1\"), c[1]) {\n                case \"realm\":\n                  o = c[2];\n                  break;\n\n                case \"nonce\":\n                  a = c[2];\n                  break;\n\n                case \"qop\":\n                  c[2];\n                  break;\n\n                case \"host\":\n                  i = c[2];\n              }\n            }\n\n            var u = t.servtype + \"/\" + t.domain;\n            null !== i && (u = u + \"/\" + i);\n            var l = T.default.utf16to8(t.authcid + \":\" + o + \":\" + this._connection.pass),\n                d = E.default.hash(l) + \":\" + a + \":\" + r,\n                h = \"AUTHENTICATE:\" + u,\n                p = \"\";\n            return p += \"charset=utf-8,\", p += \"username=\" + this._quote(T.default.utf16to8(t.authcid)) + \",\", p += \"realm=\" + this._quote(o) + \",\", p += \"nonce=\" + this._quote(a) + \",\", p += \"nc=00000001,\", p += \"cnonce=\" + this._quote(r) + \",\", p += \"digest-uri=\" + this._quote(u) + \",\", p += \"response=\" + E.default.hexdigest(E.default.hexdigest(d) + \":\" + a + \":00000001:\" + r + \":auth:\" + E.default.hexdigest(h)) + \",\", p += \"qop=auth\", this.onChallenge = function () {\n              return \"\";\n            }, p;\n          }, g.SASLOAuthBearer = function () {}, g.SASLOAuthBearer.prototype = new g.SASLMechanism(\"OAUTHBEARER\", !0, 40), g.SASLOAuthBearer.prototype.test = function (t) {\n            return null !== t.pass;\n          }, g.SASLOAuthBearer.prototype.onChallenge = function (t) {\n            var e = \"n,\";\n            return null !== t.authcid && (e = e + \"a=\" + t.authzid), e += \",\", e += \"\u0001\", e += \"auth=Bearer \", e += t.pass, e += \"\u0001\", e += \"\u0001\", T.default.utf16to8(e);\n          }, g.SASLExternal = function () {}, g.SASLExternal.prototype = new g.SASLMechanism(\"EXTERNAL\", !0, 10), g.SASLExternal.prototype.onChallenge = function (t) {\n            return t.authcid === t.authzid ? \"\" : t.authzid;\n          }, g.SASLXOAuth2 = function () {}, g.SASLXOAuth2.prototype = new g.SASLMechanism(\"X-OAUTH2\", !0, 30), g.SASLXOAuth2.prototype.test = function (t) {\n            return null !== t.pass;\n          }, g.SASLXOAuth2.prototype.onChallenge = function (t) {\n            var e = \"\\0\";\n            return null !== t.authcid && (e += t.authzid), e += \"\\0\", e += t.pass, T.default.utf16to8(e);\n          }, e.default = {\n            Strophe: g,\n            $build: i,\n            $iq: r,\n            $msg: function (t) {\n              return new g.Builder(\"message\", t);\n            },\n            $pres: s,\n            SHA1: C.default,\n            MD5: E.default,\n            b64_hmac_sha1: C.default.b64_hmac_sha1,\n            b64_sha1: C.default.b64_sha1,\n            str_hmac_sha1: C.default.str_hmac_sha1,\n            str_sha1: C.default.str_sha1\n          };\n        },\n        \"./src/md5.js\": function (t, e, n) {\n          \"use strict\";\n\n          n.r(e), n.d(e, \"default\", function () {\n            return o;\n          });\n\n          var d = function (t, e) {\n            var n = (65535 & t) + (65535 & e);\n            return (t >> 16) + (e >> 16) + (n >> 16) << 16 | 65535 & n;\n          },\n              s = function (t) {\n            for (var e = [], n = 0; n < 8 * t.length; n += 8) e[n >> 5] |= (255 & t.charCodeAt(n / 8)) << n % 32;\n\n            return e;\n          },\n              a = function (t, e, n, s, r, o) {\n            return d((i = d(d(e, t), d(s, o))) << (a = r) | i >>> 32 - a, n);\n            var i, a;\n          },\n              h = function (t, e, n, s, r, o, i) {\n            return a(e & n | ~e & s, t, e, r, o, i);\n          },\n              p = function (t, e, n, s, r, o, i) {\n            return a(e & s | n & ~s, t, e, r, o, i);\n          },\n              E = function (t, e, n, s, r, o, i) {\n            return a(e ^ n ^ s, t, e, r, o, i);\n          },\n              f = function (t, e, n, s, r, o, i) {\n            return a(n ^ (e | ~s), t, e, r, o, i);\n          },\n              r = function (t, e) {\n            t[e >> 5] |= 128 << e % 32, t[14 + (e + 64 >>> 9 << 4)] = e;\n\n            for (var n, s, r, o, i = 1732584193, a = -271733879, c = -1732584194, u = 271733878, l = 0; l < t.length; l += 16) i = h(n = i, s = a, r = c, o = u, t[l + 0], 7, -680876936), u = h(u, i, a, c, t[l + 1], 12, -389564586), c = h(c, u, i, a, t[l + 2], 17, 606105819), a = h(a, c, u, i, t[l + 3], 22, -1044525330), i = h(i, a, c, u, t[l + 4], 7, -176418897), u = h(u, i, a, c, t[l + 5], 12, 1200080426), c = h(c, u, i, a, t[l + 6], 17, -1473231341), a = h(a, c, u, i, t[l + 7], 22, -45705983), i = h(i, a, c, u, t[l + 8], 7, 1770035416), u = h(u, i, a, c, t[l + 9], 12, -1958414417), c = h(c, u, i, a, t[l + 10], 17, -42063), a = h(a, c, u, i, t[l + 11], 22, -1990404162), i = h(i, a, c, u, t[l + 12], 7, 1804603682), u = h(u, i, a, c, t[l + 13], 12, -40341101), c = h(c, u, i, a, t[l + 14], 17, -1502002290), a = h(a, c, u, i, t[l + 15], 22, 1236535329), i = p(i, a, c, u, t[l + 1], 5, -165796510), u = p(u, i, a, c, t[l + 6], 9, -1069501632), c = p(c, u, i, a, t[l + 11], 14, 643717713), a = p(a, c, u, i, t[l + 0], 20, -373897302), i = p(i, a, c, u, t[l + 5], 5, -701558691), u = p(u, i, a, c, t[l + 10], 9, 38016083), c = p(c, u, i, a, t[l + 15], 14, -660478335), a = p(a, c, u, i, t[l + 4], 20, -405537848), i = p(i, a, c, u, t[l + 9], 5, 568446438), u = p(u, i, a, c, t[l + 14], 9, -1019803690), c = p(c, u, i, a, t[l + 3], 14, -187363961), a = p(a, c, u, i, t[l + 8], 20, 1163531501), i = p(i, a, c, u, t[l + 13], 5, -1444681467), u = p(u, i, a, c, t[l + 2], 9, -51403784), c = p(c, u, i, a, t[l + 7], 14, 1735328473), a = p(a, c, u, i, t[l + 12], 20, -1926607734), i = E(i, a, c, u, t[l + 5], 4, -378558), u = E(u, i, a, c, t[l + 8], 11, -2022574463), c = E(c, u, i, a, t[l + 11], 16, 1839030562), a = E(a, c, u, i, t[l + 14], 23, -35309556), i = E(i, a, c, u, t[l + 1], 4, -1530992060), u = E(u, i, a, c, t[l + 4], 11, 1272893353), c = E(c, u, i, a, t[l + 7], 16, -155497632), a = E(a, c, u, i, t[l + 10], 23, -1094730640), i = E(i, a, c, u, t[l + 13], 4, 681279174), u = E(u, i, a, c, t[l + 0], 11, -358537222), c = E(c, u, i, a, t[l + 3], 16, -722521979), a = E(a, c, u, i, t[l + 6], 23, 76029189), i = E(i, a, c, u, t[l + 9], 4, -640364487), u = E(u, i, a, c, t[l + 12], 11, -421815835), c = E(c, u, i, a, t[l + 15], 16, 530742520), a = E(a, c, u, i, t[l + 2], 23, -995338651), i = f(i, a, c, u, t[l + 0], 6, -198630844), u = f(u, i, a, c, t[l + 7], 10, 1126891415), c = f(c, u, i, a, t[l + 14], 15, -1416354905), a = f(a, c, u, i, t[l + 5], 21, -57434055), i = f(i, a, c, u, t[l + 12], 6, 1700485571), u = f(u, i, a, c, t[l + 3], 10, -1894986606), c = f(c, u, i, a, t[l + 10], 15, -1051523), a = f(a, c, u, i, t[l + 1], 21, -2054922799), i = f(i, a, c, u, t[l + 8], 6, 1873313359), u = f(u, i, a, c, t[l + 15], 10, -30611744), c = f(c, u, i, a, t[l + 6], 15, -1560198380), a = f(a, c, u, i, t[l + 13], 21, 1309151649), i = f(i, a, c, u, t[l + 4], 6, -145523070), u = f(u, i, a, c, t[l + 11], 10, -1120210379), c = f(c, u, i, a, t[l + 2], 15, 718787259), a = f(a, c, u, i, t[l + 9], 21, -343485551), i = d(i, n), a = d(a, s), c = d(c, r), u = d(u, o);\n\n            return [i, a, c, u];\n          },\n              o = {\n            hexdigest: function (t) {\n              return function (t) {\n                for (var e = \"0123456789abcdef\", n = \"\", s = 0; s < 4 * t.length; s++) n += e.charAt(t[s >> 2] >> s % 4 * 8 + 4 & 15) + e.charAt(t[s >> 2] >> s % 4 * 8 & 15);\n\n                return n;\n              }(r(s(t), 8 * t.length));\n            },\n            hash: function (t) {\n              return function (t) {\n                for (var e = \"\", n = 0; n < 32 * t.length; n += 8) e += String.fromCharCode(t[n >> 5] >>> n % 32 & 255);\n\n                return e;\n              }(r(s(t), 8 * t.length));\n            }\n          };\n        },\n        \"./src/sha1.js\": function (t, e, n) {\n          \"use strict\";\n\n          function a(t, e) {\n            t[e >> 5] |= 128 << 24 - e % 32, t[15 + (e + 64 >> 9 << 4)] = e;\n            var n,\n                s,\n                r,\n                o,\n                i,\n                a,\n                c,\n                u,\n                l,\n                d = new Array(80),\n                h = 1732584193,\n                p = -271733879,\n                E = -1732584194,\n                f = 271733878,\n                g = -1009589776;\n\n            for (n = 0; n < t.length; n += 16) {\n              for (o = h, i = p, a = E, c = f, u = g, s = 0; s < 80; s++) d[s] = s < 16 ? t[n + s] : C(d[s - 3] ^ d[s - 8] ^ d[s - 14] ^ d[s - 16], 1), r = m(m(C(h, 5), _(s, p, E, f)), m(m(g, d[s]), (l = s) < 20 ? 1518500249 : l < 40 ? 1859775393 : l < 60 ? -1894007588 : -899497514)), g = f, f = E, E = C(p, 30), p = h, h = r;\n\n              h = m(h, o), p = m(p, i), E = m(E, a), f = m(f, c), g = m(g, u);\n            }\n\n            return [h, p, E, f, g];\n          }\n\n          function _(t, e, n, s) {\n            return t < 20 ? e & n | ~e & s : t < 40 ? e ^ n ^ s : t < 60 ? e & n | e & s | n & s : e ^ n ^ s;\n          }\n\n          function s(t, e) {\n            var n = c(t);\n            16 < n.length && (n = a(n, 8 * t.length));\n\n            for (var s = new Array(16), r = new Array(16), o = 0; o < 16; o++) s[o] = 909522486 ^ n[o], r[o] = 1549556828 ^ n[o];\n\n            var i = a(s.concat(c(e)), 512 + 8 * e.length);\n            return a(r.concat(i), 672);\n          }\n\n          function m(t, e) {\n            var n = (65535 & t) + (65535 & e);\n            return (t >> 16) + (e >> 16) + (n >> 16) << 16 | 65535 & n;\n          }\n\n          function C(t, e) {\n            return t << e | t >>> 32 - e;\n          }\n\n          function c(t) {\n            for (var e = [], n = 0; n < 8 * t.length; n += 8) e[n >> 5] |= (255 & t.charCodeAt(n / 8)) << 24 - n % 32;\n\n            return e;\n          }\n\n          function r(t) {\n            for (var e, n, s = \"\", r = 0; r < 4 * t.length; r += 3) for (e = (t[r >> 2] >> 8 * (3 - r % 4) & 255) << 16 | (t[r + 1 >> 2] >> 8 * (3 - (r + 1) % 4) & 255) << 8 | t[r + 2 >> 2] >> 8 * (3 - (r + 2) % 4) & 255, n = 0; n < 4; n++) 8 * r + 6 * n > 32 * t.length ? s += \"=\" : s += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".charAt(e >> 6 * (3 - n) & 63);\n\n            return s;\n          }\n\n          function o(t) {\n            for (var e = \"\", n = 0; n < 32 * t.length; n += 8) e += String.fromCharCode(t[n >> 5] >>> 24 - n % 32 & 255);\n\n            return e;\n          }\n\n          n.r(e), n.d(e, \"default\", function () {\n            return i;\n          });\n          var i = {\n            b64_hmac_sha1: function (t, e) {\n              return r(s(t, e));\n            },\n            b64_sha1: function (t) {\n              return r(a(c(t), 8 * t.length));\n            },\n            binb2str: o,\n            core_hmac_sha1: s,\n            str_hmac_sha1: function (t, e) {\n              return o(s(t, e));\n            },\n            str_sha1: function (t) {\n              return o(a(c(t), 8 * t.length));\n            }\n          };\n        },\n        \"./src/strophe.js\": function (t, e, n) {\n          \"use strict\";\n\n          n.r(e);\n          n(\"./src/bosh.js\"), n(\"./src/websocket.js\");\n          var s = n(\"./src/core.js\");\n          n.d(e, \"default\", function () {\n            return s.default;\n          });\n        },\n        \"./src/utils.js\": function (t, e, n) {\n          \"use strict\";\n\n          function c(t) {\n            return (c = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (t) {\n              return typeof t;\n            } : function (t) {\n              return t && \"function\" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? \"symbol\" : typeof t;\n            })(t);\n          }\n\n          n.r(e), n.d(e, \"default\", function () {\n            return s;\n          });\n          var s = {\n            utf16to8: function (t) {\n              var e,\n                  n,\n                  s = \"\",\n                  r = t.length;\n\n              for (e = 0; e < r; e++) 0 <= (n = t.charCodeAt(e)) && n <= 127 ? s += t.charAt(e) : (2047 < n ? (s += String.fromCharCode(224 | n >> 12 & 15), s += String.fromCharCode(128 | n >> 6 & 63)) : s += String.fromCharCode(192 | n >> 6 & 31), s += String.fromCharCode(128 | n >> 0 & 63));\n\n              return s;\n            },\n            addCookies: function (t) {\n              for (var e in t = t || {}) if (Object.prototype.hasOwnProperty.call(t, e)) {\n                var n = \"\",\n                    s = \"\",\n                    r = \"\",\n                    o = t[e],\n                    i = \"object\" === c(o),\n                    a = escape(unescape(i ? o.value : o));\n                i && (n = o.expires ? \";expires=\" + o.expires : \"\", s = o.domain ? \";domain=\" + o.domain : \"\", r = o.path ? \";path=\" + o.path : \"\"), document.cookie = e + \"=\" + a + n + s + r;\n              }\n            }\n          };\n        },\n        \"./src/websocket.js\": function (t, e, n) {\n          \"use strict\";\n\n          n.r(e);\n          var s = n(\"./src/core.js\"),\n              u = s.default.Strophe,\n              r = s.default.$build;\n          u.Websocket = function (t) {\n            this._conn = t, this.strip = \"wrapper\";\n            var e = t.service;\n\n            if (0 !== e.indexOf(\"ws:\") && 0 !== e.indexOf(\"wss:\")) {\n              var n = \"\";\n              \"ws\" === t.options.protocol && \"https:\" !== window.location.protocol ? n += \"ws\" : n += \"wss\", n += \"://\" + window.location.host, 0 !== e.indexOf(\"/\") ? n += window.location.pathname + e : n += e, t.service = n;\n            }\n          }, u.Websocket.prototype = {\n            _buildStream: function () {\n              return r(\"open\", {\n                xmlns: u.NS.FRAMING,\n                to: this._conn.domain,\n                version: \"1.0\"\n              });\n            },\n            _check_streamerror: function (t, e) {\n              var n;\n              if (0 === (n = t.getElementsByTagNameNS ? t.getElementsByTagNameNS(u.NS.STREAM, \"error\") : t.getElementsByTagName(\"stream:error\")).length) return !1;\n\n              for (var s = n[0], r = \"\", o = \"\", i = 0; i < s.childNodes.length; i++) {\n                var a = s.childNodes[i];\n                if (\"urn:ietf:params:xml:ns:xmpp-streams\" !== a.getAttribute(\"xmlns\")) break;\n                \"text\" === a.nodeName ? o = a.textContent : r = a.nodeName;\n              }\n\n              var c = \"WebSocket stream error: \";\n              return c += r || \"unknown\", o && (c += \" - \" + o), u.error(c), this._conn._changeConnectStatus(e, r), this._conn._doDisconnect(), !0;\n            },\n            _reset: function () {},\n            _connect: function () {\n              this._closeSocket(), this.socket = new WebSocket(this._conn.service, \"xmpp\"), this.socket.onopen = this._onOpen.bind(this), this.socket.onerror = this._onError.bind(this), this.socket.onclose = this._onClose.bind(this), this.socket.onmessage = this._connect_cb_wrapper.bind(this);\n            },\n            _connect_cb: function (t) {\n              if (this._check_streamerror(t, u.Status.CONNFAIL)) return u.Status.CONNFAIL;\n            },\n            _handleStreamStart: function (t) {\n              var e = !1,\n                  n = t.getAttribute(\"xmlns\");\n              \"string\" != typeof n ? e = \"Missing xmlns in <open />\" : n !== u.NS.FRAMING && (e = \"Wrong xmlns in <open />: \" + n);\n              var s = t.getAttribute(\"version\");\n              return \"string\" != typeof s ? e = \"Missing version in <open />\" : \"1.0\" !== s && (e = \"Wrong version in <open />: \" + s), !e || (this._conn._changeConnectStatus(u.Status.CONNFAIL, e), this._conn._doDisconnect(), !1);\n            },\n            _connect_cb_wrapper: function (t) {\n              if (0 === t.data.indexOf(\"<open \") || 0 === t.data.indexOf(\"<?xml\")) {\n                var e = t.data.replace(/^(<\\?.*?\\?>\\s*)*/, \"\");\n                if (\"\" === e) return;\n                var n = new DOMParser().parseFromString(e, \"text/xml\").documentElement;\n                this._conn.xmlInput(n), this._conn.rawInput(t.data), this._handleStreamStart(n) && this._connect_cb(n);\n              } else if (0 === t.data.indexOf(\"<close \")) {\n                var s = new DOMParser().parseFromString(t.data, \"text/xml\").documentElement;\n                this._conn.xmlInput(s), this._conn.rawInput(t.data);\n                var r = s.getAttribute(\"see-other-uri\");\n\n                if (r) {\n                  var o = this._conn.service;\n                  (0 <= o.indexOf(\"wss:\") && 0 <= r.indexOf(\"wss:\") || 0 <= o.indexOf(\"ws:\")) && (this._conn._changeConnectStatus(u.Status.REDIRECT, \"Received see-other-uri, resetting connection\"), this._conn.reset(), this._conn.service = r, this._connect());\n                } else this._conn._changeConnectStatus(u.Status.CONNFAIL, \"Received closing stream\"), this._conn._doDisconnect();\n              } else {\n                var i = this._streamWrap(t.data),\n                    a = new DOMParser().parseFromString(i, \"text/xml\").documentElement;\n\n                this.socket.onmessage = this._onMessage.bind(this), this._conn._connect_cb(a, null, t.data);\n              }\n            },\n            _disconnect: function (t) {\n              if (this.socket && this.socket.readyState !== WebSocket.CLOSED) {\n                t && this._conn.send(t);\n                var e = r(\"close\", {\n                  xmlns: u.NS.FRAMING\n                });\n\n                this._conn.xmlOutput(e.tree());\n\n                var n = u.serialize(e);\n\n                this._conn.rawOutput(n);\n\n                try {\n                  this.socket.send(n);\n                } catch (t) {\n                  u.info(\"Couldn't send <close /> tag.\");\n                }\n              }\n\n              this._conn._doDisconnect();\n            },\n            _doDisconnect: function () {\n              u.info(\"WebSockets _doDisconnect was called\"), this._closeSocket();\n            },\n            _streamWrap: function (t) {\n              return \"<wrapper>\" + t + \"</wrapper>\";\n            },\n            _closeSocket: function () {\n              if (this.socket) try {\n                this.socket.onerror = null, this.socket.close();\n              } catch (t) {\n                u.debug(t.message);\n              }\n              this.socket = null;\n            },\n            _emptyQueue: function () {\n              return !0;\n            },\n            _onClose: function (t) {\n              this._conn.connected && !this._conn.disconnecting ? (u.error(\"Websocket closed unexpectedly\"), this._conn._doDisconnect()) : t && 1006 === t.code && !this._conn.connected && this.socket ? (u.error(\"Websocket closed unexcectedly\"), this._conn._changeConnectStatus(u.Status.CONNFAIL, \"The WebSocket connection could not be established or was disconnected.\"), this._conn._doDisconnect()) : u.info(\"Websocket closed\");\n            },\n            _no_auth_received: function (t) {\n              u.error(\"Server did not offer a supported authentication mechanism\"), this._changeConnectStatus(u.Status.CONNFAIL, u.ErrorCondition.NO_AUTH_MECH), t && t.call(this._conn), this._conn._doDisconnect();\n            },\n            _onDisconnectTimeout: function () {},\n            _abortAllRequests: function () {},\n            _onError: function (t) {\n              u.error(\"Websocket error \" + t), this._conn._changeConnectStatus(u.Status.CONNFAIL, \"The WebSocket connection could not be established or was disconnected.\"), this._disconnect();\n            },\n            _onIdle: function () {\n              var t = this._conn._data;\n\n              if (0 < t.length && !this._conn.paused) {\n                for (var e = 0; e < t.length; e++) if (null !== t[e]) {\n                  var n = void 0;\n                  n = \"restart\" === t[e] ? this._buildStream().tree() : t[e];\n                  var s = u.serialize(n);\n                  this._conn.xmlOutput(n), this._conn.rawOutput(s), this.socket.send(s);\n                }\n\n                this._conn._data = [];\n              }\n            },\n            _onMessage: function (t) {\n              var e,\n                  n = '<close xmlns=\"urn:ietf:params:xml:ns:xmpp-framing\" />';\n              if (t.data === n) return this._conn.rawInput(n), this._conn.xmlInput(t), void (this._conn.disconnecting || this._conn._doDisconnect());\n\n              if (0 === t.data.search(\"<open \")) {\n                if (e = new DOMParser().parseFromString(t.data, \"text/xml\").documentElement, !this._handleStreamStart(e)) return;\n              } else {\n                var s = this._streamWrap(t.data);\n\n                e = new DOMParser().parseFromString(s, \"text/xml\").documentElement;\n              }\n\n              return this._check_streamerror(e, u.Status.ERROR) ? void 0 : this._conn.disconnecting && \"presence\" === e.firstChild.nodeName && \"unavailable\" === e.firstChild.getAttribute(\"type\") ? (this._conn.xmlInput(e), void this._conn.rawInput(u.serialize(e))) : void this._conn._dataRecv(e, t.data);\n            },\n            _onOpen: function () {\n              u.info(\"Websocket open\");\n\n              var t = this._buildStream();\n\n              this._conn.xmlOutput(t.tree());\n\n              var e = u.serialize(t);\n              this._conn.rawOutput(e), this.socket.send(e);\n            },\n            _reqToData: function (t) {\n              return t;\n            },\n            _send: function () {\n              this._conn.flush();\n            },\n            _sendRestart: function () {\n              clearTimeout(this._conn._idleTimeout), this._conn._onIdle.bind(this._conn)();\n            }\n          };\n        }\n      }).default;\n    }, t.exports = s();\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = n(0),\n        r = function () {\n      function t(t, e, n, s, r, o, i) {\n        this.hasJoined = !1, this.guid = t, this.name = e, this.type = n, s && (this.password = s), r && (this.icon = r), o && (this.description = o), i && (this.hasJoined = i);\n      }\n\n      return t.prototype.getGuid = function () {\n        return this.guid;\n      }, t.prototype.setGuid = function (t) {\n        this.guid = t;\n      }, t.prototype.getName = function () {\n        return this.name;\n      }, t.prototype.setName = function (t) {\n        this.name = t;\n      }, t.prototype.getType = function () {\n        return this.type;\n      }, t.prototype.setType = function (t) {\n        this.type = t;\n      }, t.prototype.setPassword = function (t) {\n        this.password = t;\n      }, t.prototype.getIcon = function () {\n        return this.icon;\n      }, t.prototype.setIcon = function (t) {\n        this.icon = t;\n      }, t.prototype.getDescription = function () {\n        return this.description;\n      }, t.prototype.setDescription = function (t) {\n        this.description = t;\n      }, t.prototype.getOwner = function () {\n        return this.owner;\n      }, t.prototype.setOwner = function (t) {\n        this.owner = t;\n      }, t.prototype.getMetadata = function () {\n        return this.metadata;\n      }, t.prototype.setMetadata = function (t) {\n        this.metadata = t;\n      }, t.prototype.getCreatedAt = function () {\n        return this.createdAt;\n      }, t.prototype.setCreatedAt = function (t) {\n        this.createdAt = t;\n      }, t.prototype.getUpdatedAt = function () {\n        return this.updatedAt;\n      }, t.prototype.setUpdatedAt = function (t) {\n        this.updatedAt = t;\n      }, t.prototype.getHasJoined = function () {\n        return this.hasJoined;\n      }, t.prototype.setHasJoined = function (t) {\n        this.hasJoined = t;\n      }, t.prototype.getWsChannel = function () {\n        return this.wsChannel;\n      }, t.prototype.setWsChannel = function (t) {\n        this.wsChannel = t;\n      }, t.prototype.setScope = function (t) {\n        this.scope = t;\n      }, t.prototype.getScope = function () {\n        return this.scope;\n      }, t.prototype.getJoinedAt = function () {\n        return this.joinedAt;\n      }, t.prototype.setJoinedAt = function (t) {\n        this.joinedAt = t;\n      }, t.TYPE = s.GroupType, t.Type = t.TYPE, t;\n    }();\n\n    e.Group = r;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = n(5),\n        r = function () {\n      function t() {}\n\n      return t.trasformJSONUser = function (t) {\n        var e;\n\n        try {\n          \"offline\" != t.status && (t.status = \"online\"), e = new s.User(t), Object.assign(e, t), t = e;\n        } catch (t) {}\n\n        return t;\n      }, t;\n    }();\n\n    e.UsersController = r;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var i = this && this.__awaiter || function (o, i, a, c) {\n      return new (a || (a = Promise))(function (t, e) {\n        function n(t) {\n          try {\n            r(c.next(t));\n          } catch (t) {\n            e(t);\n          }\n        }\n\n        function s(t) {\n          try {\n            r(c.throw(t));\n          } catch (t) {\n            e(t);\n          }\n        }\n\n        function r(e) {\n          e.done ? t(e.value) : new a(function (t) {\n            t(e.value);\n          }).then(n, s);\n        }\n\n        r((c = c.apply(o, i || [])).next());\n      });\n    },\n        a = this && this.__generator || function (n, s) {\n      var r,\n          o,\n          i,\n          t,\n          a = {\n        label: 0,\n        sent: function () {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return t = {\n        next: e(0),\n        throw: e(1),\n        return: e(2)\n      }, \"function\" == typeof Symbol && (t[Symbol.iterator] = function () {\n        return this;\n      }), t;\n\n      function e(e) {\n        return function (t) {\n          return function (e) {\n            if (r) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) try {\n              if (r = 1, o && (i = 2 & e[0] ? o.return : e[0] ? o.throw || ((i = o.return) && i.call(o), 0) : o.next) && !(i = i.call(o, e[1])).done) return i;\n\n              switch (o = 0, i && (e = [2 & e[0], i.value]), e[0]) {\n                case 0:\n                case 1:\n                  i = e;\n                  break;\n\n                case 4:\n                  return a.label++, {\n                    value: e[1],\n                    done: !1\n                  };\n\n                case 5:\n                  a.label++, o = e[1], e = [0];\n                  continue;\n\n                case 7:\n                  e = a.ops.pop(), a.trys.pop();\n                  continue;\n\n                default:\n                  if (!(i = 0 < (i = a.trys).length && i[i.length - 1]) && (6 === e[0] || 2 === e[0])) {\n                    a = 0;\n                    continue;\n                  }\n\n                  if (3 === e[0] && (!i || e[1] > i[0] && e[1] < i[3])) {\n                    a.label = e[1];\n                    break;\n                  }\n\n                  if (6 === e[0] && a.label < i[1]) {\n                    a.label = i[1], i = e;\n                    break;\n                  }\n\n                  if (i && a.label < i[2]) {\n                    a.label = i[2], a.ops.push(e);\n                    break;\n                  }\n\n                  i[2] && a.ops.pop(), a.trys.pop();\n                  continue;\n              }\n\n              e = s.call(n, a);\n            } catch (t) {\n              e = [6, t], o = 0;\n            } finally {\n              r = i = 0;\n            }\n\n            if (5 & e[0]) throw e[1];\n            return {\n              value: e[0] ? e[1] : void 0,\n              done: !0\n            };\n          }([e, t]);\n        };\n      }\n    };\n\n    e.__esModule = !0;\n\n    var o = n(30),\n        c = n(1),\n        u = n(9),\n        s = n(0),\n        r = function () {\n      function t() {}\n\n      return t.executeInSync = function (r, o) {\n        var e = this;\n        return new Promise(function (s, t) {\n          return i(e, void 0, void 0, function () {\n            var e, n;\n            return a(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return e = r, o ? (n = setTimeout(function () {\n                    s(r);\n                  }, this.SMALL_TIMEOUT), [4, o(r)]) : [3, 2];\n\n                case 1:\n                  e = t.sent(), t.label = 2;\n\n                case 2:\n                  return clearTimeout(n), s(e), [2];\n              }\n            });\n          });\n        });\n      }, t.hookBeforeMessageSent = function (s) {\n        return i(this, void 0, void 0, function () {\n          var e, n;\n          return a(this, function (t) {\n            switch (t.label) {\n              case 0:\n                e = 0, t.label = 1;\n\n              case 1:\n                return e < o.ExtensionManager.cometChatExtensionList.length ? [4, this.getExtensionList()] : [3, 7];\n\n              case 2:\n                if (!t.sent()[o.ExtensionManager.cometChatExtensionList[e].getExtensionId()]) return [3, 6];\n                if (!o.ExtensionManager.cometChatExtensionList[e].beforeMessageSent) return [3, 6];\n                t.label = 3;\n\n              case 3:\n                return t.trys.push([3, 5,, 6]), [4, this.executeInSync(s, o.ExtensionManager.cometChatExtensionList[e].beforeMessageSent)];\n\n              case 4:\n                return s = t.sent(), [3, 6];\n\n              case 5:\n                return n = t.sent(), c.Logger.error(\"Logging error\", n), [3, 6];\n\n              case 6:\n                return e++, [3, 1];\n\n              case 7:\n                return [2, s];\n            }\n          });\n        });\n      }, t.hookAfterMessageSent = function (s) {\n        return i(this, void 0, void 0, function () {\n          var e, n;\n          return a(this, function (t) {\n            switch (t.label) {\n              case 0:\n                e = 0, t.label = 1;\n\n              case 1:\n                return e < o.ExtensionManager.cometChatExtensionList.length ? [4, this.getExtensionList()] : [3, 7];\n\n              case 2:\n                if (!t.sent()[o.ExtensionManager.cometChatExtensionList[e].getExtensionId()]) return [3, 6];\n                if (!o.ExtensionManager.cometChatExtensionList[e].afterMessageSent) return [3, 6];\n                t.label = 3;\n\n              case 3:\n                return t.trys.push([3, 5,, 6]), [4, this.executeInSync(s, o.ExtensionManager.cometChatExtensionList[e].afterMessageSent)];\n\n              case 4:\n                return s = t.sent(), [3, 6];\n\n              case 5:\n                return n = t.sent(), c.Logger.error(\"Logging error\", n), [3, 6];\n\n              case 6:\n                return e++, [3, 1];\n\n              case 7:\n                return [2, s];\n            }\n          });\n        });\n      }, t.hookOnInit = function (s, r) {\n        return i(this, void 0, void 0, function () {\n          var n = this;\n          return a(this, function (t) {\n            return o.ExtensionManager.cometChatExtensionList.map(function (e) {\n              return i(n, void 0, void 0, function () {\n                return a(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return [4, this.getExtensionList()];\n\n                    case 1:\n                      return t.sent()[e.getExtensionId()] ? s && r && e.onInit ? [4, e.onInit(s, r)] : [3, 3] : [3, 5];\n\n                    case 2:\n                      return t.sent(), [3, 5];\n\n                    case 3:\n                      return s && e.onInit ? [4, e.onInit(s)] : [3, 5];\n\n                    case 4:\n                      t.sent(), t.label = 5;\n\n                    case 5:\n                      return [2];\n                  }\n                });\n              });\n            }), [2];\n          });\n        });\n      }, t.hookOnMessageReceived = function (r) {\n        return i(this, void 0, void 0, function () {\n          var e, n, s;\n          return a(this, function (t) {\n            switch (t.label) {\n              case 0:\n                e = u.MessageController.trasformJSONMessge(r), n = 0, t.label = 1;\n\n              case 1:\n                return n < o.ExtensionManager.cometChatExtensionList.length ? [4, this.getExtensionList()] : [3, 7];\n\n              case 2:\n                if (!t.sent()[o.ExtensionManager.cometChatExtensionList[n].getExtensionId()]) return [3, 6];\n                if (!o.ExtensionManager.cometChatExtensionList[n].onMessageReceived) return [3, 6];\n                t.label = 3;\n\n              case 3:\n                return t.trys.push([3, 5,, 6]), [4, this.executeInSync(e, o.ExtensionManager.cometChatExtensionList[n].onMessageReceived)];\n\n              case 4:\n                return r = t.sent(), [3, 6];\n\n              case 5:\n                return s = t.sent(), c.Logger.error(\"Logging error\", s), [3, 6];\n\n              case 6:\n                return n++, [3, 1];\n\n              case 7:\n                return [2, r];\n            }\n          });\n        });\n      }, t.hookOnLogin = function (s) {\n        return i(this, void 0, void 0, function () {\n          var n = this;\n          return a(this, function (t) {\n            return o.ExtensionManager.cometChatExtensionList.map(function (e) {\n              return i(n, void 0, void 0, function () {\n                return a(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return [4, this.getExtensionList()];\n\n                    case 1:\n                      return t.sent()[e.getExtensionId()] && s && e.onLogin ? [4, e.onLogin(s)] : [3, 3];\n\n                    case 2:\n                      t.sent(), t.label = 3;\n\n                    case 3:\n                      return [2];\n                  }\n                });\n              });\n            }), [2];\n          });\n        });\n      }, t.executeInSyncBulk = function (r, o) {\n        var e = this;\n        return new Promise(function (s, t) {\n          return i(e, void 0, void 0, function () {\n            var e, n;\n            return a(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return e = r, o ? (n = setTimeout(function () {\n                    s(r);\n                  }, this.BIG_TIMEOUT), [4, o(r)]) : [3, 2];\n\n                case 1:\n                  e = t.sent(), t.label = 2;\n\n                case 2:\n                  return clearTimeout(n), s(e), [2];\n              }\n            });\n          });\n        });\n      }, t.hookOnMessageListIsFetched = function (s) {\n        return i(this, void 0, void 0, function () {\n          var e, n;\n          return a(this, function (t) {\n            switch (t.label) {\n              case 0:\n                e = 0, t.label = 1;\n\n              case 1:\n                return e < o.ExtensionManager.cometChatExtensionList.length ? [4, this.getExtensionList()] : [3, 7];\n\n              case 2:\n                if (!t.sent()[o.ExtensionManager.cometChatExtensionList[e].getExtensionId()]) return [3, 6];\n                if (!o.ExtensionManager.cometChatExtensionList[e].onMessageListFetched) return [3, 6];\n                t.label = 3;\n\n              case 3:\n                return t.trys.push([3, 5,, 6]), [4, this.executeInSyncBulk(s, o.ExtensionManager.cometChatExtensionList[e].onMessageListFetched)];\n\n              case 4:\n                return s = t.sent(), [3, 6];\n\n              case 5:\n                return n = t.sent(), c.Logger.error(\"Logging error\", n), [3, 6];\n\n              case 6:\n                return e++, [3, 1];\n\n              case 7:\n                return [2, s];\n            }\n          });\n        });\n      }, t.getExtensionList = function () {\n        return i(this, void 0, void 0, function () {\n          var e = this;\n          return a(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return c.isFalsy(this.extentionList) ? [4, c.getAppSettings()] : [3, 2];\n\n              case 1:\n                t.sent()[s.APP_SETTINGS.KEYS.EXTENSION_LIST].map(function (t) {\n                  e.extentionList[t.id] = t;\n                }), t.label = 2;\n\n              case 2:\n                return [2, this.extentionList];\n            }\n          });\n        });\n      }, t.SMALL_TIMEOUT = 5e3, t.BIG_TIMEOUT = 2e4, t.extentionList = {}, t;\n    }();\n\n    e.ExtensionController = r;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var s,\n        i = this && this.__extends || (s = function (t, e) {\n      return (s = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (t, e) {\n        t.__proto__ = e;\n      } || function (t, e) {\n        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n      })(t, e);\n    }, function (t, e) {\n      function n() {\n        this.constructor = t;\n      }\n\n      s(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n    });\n    e.__esModule = !0;\n\n    var r = n(1),\n        o = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      this.onAction = void 0, this.onTextMessageReceived = void 0, this.onMediaMessageReceived = void 0, this.onCustomMessageReceived = void 0, this.onCall = void 0, this.onTypingStarted = void 0, this.onTypingEnded = void 0, this.onMessageDelivered = void 0, this.onMessageRead = void 0, this.onMessageEdited = void 0, this.onMessageDeleted = void 0, r.isFalsy(t[0].onAction) || (this.onAction = t[0].onAction), r.isFalsy(t[0].onTextMessageReceived) || (this.onTextMessageReceived = t[0].onTextMessageReceived), r.isFalsy(t[0].onMediaMessageReceived) || (this.onMediaMessageReceived = t[0].onMediaMessageReceived), r.isFalsy(t[0].onCall) || (this.onCall = t[0].onCall), r.isFalsy(t[0].onTypingStarted) || (this.onTypingStarted = t[0].onTypingStarted), r.isFalsy(t[0].onTypingEnded) || (this.onTypingEnded = t[0].onTypingEnded), r.isFalsy(t[0].onMessageDelivered) || (this.onMessageDelivered = t[0].onMessageDelivered), r.isFalsy(t[0].onMessageRead) || (this.onMessageRead = t[0].onMessageRead), r.isFalsy(t[0].onCustomMessageReceived) || (this.onCustomMessageReceived = t[0].onCustomMessageReceived), r.isFalsy(t[0].onMessageEdited) || (this.onMessageEdited = t[0].onMessageEdited), r.isFalsy(t[0].onMessageDeleted) || (this.onMessageDeleted = t[0].onMessageDeleted);\n    };\n\n    e.MessageEventListener = o;\n\n    var a = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      this.onIncomingCallReceived = void 0, this.onOutgoingCallAccepted = void 0, this.onOutgoingCallRejected = void 0, this.onIncomingCallCancelled = void 0, r.isFalsy(t[0].onIncomingCallReceived) || (this.onIncomingCallReceived = t[0].onIncomingCallReceived), r.isFalsy(t[0].onOutgoingCallAccepted) || (this.onOutgoingCallAccepted = t[0].onOutgoingCallAccepted), r.isFalsy(t[0].onOutgoingCallRejected) || (this.onOutgoingCallRejected = t[0].onOutgoingCallRejected), r.isFalsy(t[0].onIncomingCallCancelled) || (this.onIncomingCallCancelled = t[0].onIncomingCallCancelled);\n    };\n\n    e.CallEventListener = a;\n\n    var c = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      r.isFalsy(t[0].onUserOnline) || (this.onUserOnline = t[0].onUserOnline), r.isFalsy(t[0].onUserOffline) || (this.onUserOffline = t[0].onUserOffline);\n    };\n\n    e.UserEventListener = c;\n\n    var u = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      r.isFalsy(t[0].onGroupMemberJoined) || (this.onUserJoined = t[0].onGroupMemberJoined), r.isFalsy(t[0].onGroupMemberLeft) || (this.onUserLeft = t[0].onGroupMemberLeft), r.isFalsy(t[0].onGroupMemberKicked) || (this.onUserKicked = t[0].onGroupMemberKicked), r.isFalsy(t[0].onGroupMemberBanned) || (this.onUserBanned = t[0].onGroupMemberBanned), r.isFalsy(t[0].onGroupMemberUnbanned) || (this.onUserUnbanned = t[0].onGroupMemberUnbanned), r.isFalsy(t[0].onGroupMemberScopeChanged) || (this.onMemberScopeChanged = t[0].onGroupMemberScopeChanged), r.isFalsy(t[0].onMemberAddedToGroup) || (this.onMemberAddedToGroup = t[0].onMemberAddedToGroup), r.isFalsy(t[0].onAddedToGroup) || (this.onAddedToGroup = t[0].onAddedToGroup);\n    };\n\n    e.GroupEventListener = u;\n\n    var l = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n      r.isFalsy(t[0].onYouLeft) || (this.onYouLeft = t[0].onYouLeft), r.isFalsy(t[0].onYouJoined) || (this.onYouJoined = t[0].onYouJoined), r.isFalsy(t[0].onUserJoined) || (this.onUserJoined = t[0].onUserJoined), r.isFalsy(t[0].onUserLeft) || (this.onUserLeft = t[0].onUserLeft), r.isFalsy(t[0].onCallEnded) || (this.onCallEnded = t[0].onCallEnded), r.isFalsy(t[0].onError) || (this.onError = t[0].onError);\n    };\n\n    e.UserCallEventListener = l;\n\n    var d = function (t, e) {\n      this._name = t, this._callback = e;\n    },\n        h = function (o) {\n      function t(t, e, n, s) {\n        var r = o.call(this, t, s) || this;\n        return r._eventListener = e, n && (r._cursor = n), r;\n      }\n\n      return i(t, o), t;\n    }(e.Listener = d);\n\n    e.MessageListener = h;\n\n    var p = function (o) {\n      function t(t, e, n, s) {\n        var r = o.call(this, t, s) || this;\n        return r._eventListener = e, n && (r._cursor = n), r;\n      }\n\n      return i(t, o), t;\n    }(d);\n\n    e.UserListener = p;\n\n    var E = function (o) {\n      function t(t, e, n, s) {\n        var r = o.call(this, t, s) || this;\n        return r._eventListener = e, n && (r._cursor = n), r;\n      }\n\n      return i(t, o), t;\n    }(d);\n\n    e.GroupListener = E;\n\n    var f = function (r) {\n      function t(t, e, n) {\n        var s = r.call(this, \"callListner\", n) || this;\n        return s._eventListener = t, s;\n      }\n\n      return i(t, r), t;\n    }(d);\n\n    e.UserCallListener = f;\n\n    var g = function (o) {\n      function t(t, e, n, s) {\n        var r = o.call(this, t, s) || this;\n        return r._eventListener = e, r;\n      }\n\n      return i(t, o), t;\n    }(d);\n\n    e.CallListener = g;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var a = this && this.__assign || function () {\n      return (a = Object.assign || function (t) {\n        for (var e, n = 1, s = arguments.length; n < s; n++) for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n\n        return t;\n      }).apply(this, arguments);\n    };\n\n    e.__esModule = !0;\n\n    var s = n(2),\n        c = n(1),\n        u = n(0),\n        r = n(11),\n        o = function () {\n      function t(t) {\n        this.store = u.constants.DEFAULT_STORE, s.CometChat.isNative || (c.isFalsy(t) || (this.store = t), this.messagesStore = r.createInstance({\n          name: c.format(u.LOCAL_STORE.STORE_STRING, s.CometChat.getAppId(), u.LOCAL_STORE.MESSAGES_STORE)\n        }), this.messagesStore.setDriver([r.LOCALSTORAGE, r.INDEXEDDB, r.WEBSQL]));\n      }\n\n      return t.getInstance = function () {\n        return null == t.MessagesStore && (t.MessagesStore = new t()), t.MessagesStore;\n      }, t.prototype.set = function (t, e) {\n        return this.messagesStore.setItem(t, e);\n      }, t.prototype.remove = function (t) {\n        this.messagesStore.removeItem(t);\n      }, t.prototype.get = function (t) {\n        return this.messagesStore.getItem(t);\n      }, t.prototype.clearStore = function () {\n        return this.messagesStore.clear();\n      }, t.prototype.getAllMessages = function () {\n        var n = this,\n            s = {};\n        return new Promise(function (t, e) {\n          n.messagesStore.iterate(function (t, e, n) {\n            e != u.constants.MSG_VER_POST && e != u.constants.MSG_VER_POST && (s = a({}, s, t));\n          }).then(function () {\n            t(s);\n          });\n        });\n      }, t.prototype.clear = function (t) {}, t.prototype.selectStore = function (t) {\n        this.store = t;\n      }, t.prototype.storeMessages = function (t) {\n        var n = this;\n\n        if (s.CometChat.user.getUid()) {\n          var r = s.CometChat.user.getUid(),\n              o = {},\n              i = 0;\n          return this.get(u.constants.MSG_VER_POST).then(function (s) {\n            t.map(function (t) {\n              var e;\n\n              if (!c.isFalsy(t)) {\n                0 == i && (i = parseInt(t.getId().toString())), i > t.getId() && (i = parseInt(t.getId().toString())), s < t.getId() && (s = parseInt(t.getId().toString()));\n                var n = void 0;\n                n = t.getSender() instanceof Object ? t.getSender().getUid() : t.getSender(), t.getReceiverType() == u.MessageConstatnts.RECEIVER_TYPE.GROUP && (n = t.getReceiver()), t.getSender() instanceof Object ? t.getSender().getUid() == r && (n = t.getReceiver()) : t.getSender() == r && (n = t.getReceiver()), o[n] || (o[n] = {}), o[n] = a({}, o[n], ((e = {})[t.getId()] = t, e));\n              }\n            }), n.get(u.constants.MSG_VER_PRE).then(function (t) {\n              (0 < i && i < t || null == t) && n.set(u.constants.MSG_VER_PRE, i);\n            }) && 0 < s && n.set(u.constants.MSG_VER_POST, s), Object.keys(o).map(function (e) {\n              n.get(e).then(function (t) {\n                null == t && (t = {}), n.set(e, a({}, o[e], t));\n              });\n            });\n          }), !0;\n        }\n      }, t;\n    }();\n\n    e.MessagesStore = o;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var s,\n        r = this && this.__extends || (s = function (t, e) {\n      return (s = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (t, e) {\n        t.__proto__ = e;\n      } || function (t, e) {\n        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n      })(t, e);\n    }, function (t, e) {\n      function n() {\n        this.constructor = t;\n      }\n\n      s(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n    }),\n        o = this && this.__assign || function () {\n      return (o = Object.assign || function (t) {\n        for (var e, n = 1, s = arguments.length; n < s; n++) for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n\n        return t;\n      }).apply(this, arguments);\n    };\n\n    e.__esModule = !0;\n\n    var i = n(10),\n        u = n(13),\n        l = n(5),\n        d = n(0),\n        a = n(1),\n        h = n(9),\n        c = function (t) {\n      function e() {\n        return null !== t && t.apply(this, arguments) || this;\n      }\n\n      return r(e, t), e.actionFromJSON = function (t) {\n        var e = new this(t[d.MessageConstatnts.KEYS.RECEIVER], t[d.MessageConstatnts.KEYS.TYPE], t[d.MessageConstatnts.KEYS.RECEIVER_TYPE], d.MessageCategory.ACTION),\n            n = t[d.MessageConstatnts.KEYS.DATA];\n\n        if (e.data = n, e.setAction(n[d.MessageConstatnts.KEYS.ACTION]), n[d.ActionConstatnts.ACTION_KEYS.EXTRAS]) {\n          var s = n[d.ActionConstatnts.ACTION_KEYS.EXTRAS];\n\n          if (s[d.ActionConstatnts.ACTION_KEYS.SCOPE]) {\n            var r = s[d.ActionConstatnts.ACTION_KEYS.SCOPE];\n            r[d.ActionConstatnts.ACTION_KEYS.NEW] && r[d.ActionConstatnts.ACTION_KEYS.OLD] && (e.setOldScope(r[d.ActionConstatnts.ACTION_KEYS.OLD]), e.setNewScope(r[d.ActionConstatnts.ACTION_KEYS.NEW]));\n          }\n        }\n\n        n[d.MessageConstatnts.KEYS.METADATA] && e.setMetadata(n[d.MessageConstatnts.KEYS.METADATA]);\n        var o = n[d.ActionConstatnts.ACTION_KEYS.ENTITIES];\n        if (o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY]) if (o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][d.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE] == d.ActionConstatnts.ACTION_ENTITY_TYPE.USER) {\n          var i = new l.User(o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][d.ActionConstatnts.ACTION_KEYS.ENTITY]);\n          Object.assign(i, o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][d.ActionConstatnts.ACTION_KEYS.ENTITY]), e.actionBy = i, e.setSender(i);\n        } else {\n          var a = new u.Group(\"\", \"\", \"\");\n          Object.assign(a, o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][d.ActionConstatnts.ACTION_KEYS.ENTITY]), e.actionBy = a;\n        }\n        if (o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR]) if (o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][d.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE] == d.ActionConstatnts.ACTION_ENTITY_TYPE.USER) {\n          i = new l.User(o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][d.ActionConstatnts.ACTION_KEYS.ENTITY]);\n          Object.assign(i, o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][d.ActionConstatnts.ACTION_KEYS.ENTITY]), e.actionFor = i;\n        } else {\n          a = new u.Group(\"\", \"\", \"\");\n          Object.assign(a, o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][d.ActionConstatnts.ACTION_KEYS.ENTITY]), e.actionFor = a;\n        }\n        if (o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON]) if (o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][d.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE] == d.ActionConstatnts.ACTION_ENTITY_TYPE.USER) {\n          i = new l.User(o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][d.ActionConstatnts.ACTION_KEYS.ENTITY]);\n          Object.assign(i, o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][d.ActionConstatnts.ACTION_KEYS.ENTITY]), e.actionOn = i;\n        } else if (o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][d.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE] == d.ActionConstatnts.ACTION_ENTITY_TYPE.GROUP) {\n          a = new u.Group(\"\", \"\", \"\");\n          Object.assign(a, o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][d.ActionConstatnts.ACTION_KEYS.ENTITY]), e.actionOn = a;\n        } else if (o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][d.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE] == d.ActionConstatnts.ACTION_ENTITY_TYPE.MESSAGE) {\n          var c = h.MessageController.trasformJSONMessge(o[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][d.ActionConstatnts.ACTION_KEYS.ENTITY]);\n          e.actionOn = c;\n        }\n        return e.setMessage(e.getActionMessage(e)), e;\n      }, e.prototype.getOldScope = function () {\n        return this.oldScope;\n      }, e.prototype.getNewScope = function () {\n        return this.newScope;\n      }, e.prototype.setNewScope = function (t) {\n        this.newScope = t;\n      }, e.prototype.setOldScope = function (t) {\n        this.oldScope = t;\n      }, e.prototype.setRawData = function (t) {\n        this.rawData = t;\n      }, e.prototype.getRawData = function () {\n        return this.rawData;\n      }, e.prototype.setMessage = function (t) {\n        this.message = t;\n      }, e.prototype.getMessage = function () {\n        return this.message;\n      }, e.prototype.setAction = function (t) {\n        this.action = t;\n      }, e.prototype.getAction = function () {\n        return this.action;\n      }, e.prototype.getSender = function () {\n        try {\n          return this.getSenderFromData();\n        } catch (t) {\n          return this.sender;\n        }\n      }, e.prototype.setActionBy = function (t) {\n        this.actionBy = t;\n      }, e.prototype.getActionBy = function () {\n        return this.actionBy;\n      }, e.prototype.setActionOn = function (t) {\n        this.actionOn = t;\n      }, e.prototype.getActionOn = function () {\n        return this.actionOn;\n      }, e.prototype.setActionFor = function (t) {\n        this.actionFor = t;\n      }, e.prototype.getActionFor = function () {\n        return this.actionFor;\n      }, e.prototype.getMetadata = function () {\n        return this.data.metadata && (this.metadata = this.data.metadata), this.metadata;\n      }, e.prototype.setMetadata = function (t) {\n        this.metadata = t, this.data = o({}, this.data, {\n          metadata: t\n        });\n      }, e.prototype.getActionMessage = function (t) {\n        var e = \"\";\n\n        switch (t.getType()) {\n          case d.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_USER:\n          case d.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_GROUP:\n            switch (t.getAction()) {\n              case d.ActionConstatnts.ACTION_KEYS.ACTION_CREATED:\n              case d.ActionConstatnts.ACTION_KEYS.ACTION_UPDATED:\n              case d.ActionConstatnts.ACTION_KEYS.ACTION_DELETED:\n            }\n\n            break;\n\n          case d.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_GROUP_MEMBER:\n            switch (t.getAction()) {\n              case d.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_JOINED:\n                var n = t.getActionBy(),\n                    s = t.getActionFor();\n                e = a.format(d.ActionConstatnts.ActionMessages.ACTION_GROUP_JOINED_MESSAGE, n.getName(), s.getName());\n                break;\n\n              case d.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_LEFT:\n                n = t.getActionBy(), s = t.getActionFor();\n                e = a.format(d.ActionConstatnts.ActionMessages.ACTION_GROUP_LEFT_MESSAGE, n.getName(), s.getName());\n                break;\n\n              case d.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_KICKED:\n                n = t.getActionBy(), s = t.getActionFor();\n                var r = t.getActionOn();\n                e = a.format(d.ActionConstatnts.ActionMessages.ACTION_MEMBER_KICKED_MESSAGE, n.getName(), r, s.getName());\n                break;\n\n              case d.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_BANNED:\n                n = t.getActionBy(), s = t.getActionFor(), r = t.getActionOn();\n                e = a.format(d.ActionConstatnts.ActionMessages.ACTION_MEMBER_BANNED_MESSAGE, n.getName(), s.getName());\n                break;\n\n              case d.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_UNBANNED:\n                n = t.getActionBy(), s = t.getActionFor(), r = t.getActionOn();\n                e = a.format(d.ActionConstatnts.ActionMessages.ACTION_MEMBER_UNBANNED_MESSAGE, n.getName(), s.getName());\n                break;\n\n              case d.ActionConstatnts.ACTION_KEYS.ACTION_SCOPE_CHANGED:\n                n = t.getActionBy(), s = t.getActionFor(), r = t.getActionOn();\n                e = a.format(d.ActionConstatnts.ActionMessages.ACTION_MEMBER_SCOPE_CHANGED, n.getName(), s.getName());\n                break;\n\n              case d.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_ADDED:\n                n = t.getActionBy(), s = t.getActionFor(), r = t.getActionOn();\n                e = a.format(d.ActionConstatnts.ActionMessages.ACTION_MEMBER_ADDED_TO_GROUP, n.getName(), s.getName());\n                break;\n\n              case d.ActionConstatnts.ACTION_KEYS.TYPE_MESSAGE_EDITED:\n                e = a.format(d.ActionConstatnts.ActionMessages.ACTION_MESSAGE_EDITED_MESSAGE, \"\");\n                break;\n\n              case d.ActionConstatnts.ACTION_KEYS.TYPE_MESSAGE_DELETED:\n                e = a.format(d.ActionConstatnts.ActionMessages.ACTION_MESSAGE_DELETED_MESSAGE, \"\");\n            }\n\n        }\n\n        return e;\n      }, e.prototype.getSenderFromData = function () {\n        var t = this.data[d.ActionConstatnts.ACTION_KEYS.ENTITIES];\n\n        if (t[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY] && t[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][d.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE] == d.ActionConstatnts.ACTION_ENTITY_TYPE.USER) {\n          var e = new l.User(t[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][d.ActionConstatnts.ACTION_KEYS.ENTITY]);\n          return Object.assign(e, t[d.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][d.ActionConstatnts.ACTION_KEYS.ENTITY]), e;\n        }\n      }, e.TYPE = d.MessageConstatnts.TYPE, e.RECEIVER_TYPE = d.MessageConstatnts.RECEIVER_TYPE, e.CATEGORY = d.MessageConstatnts.CATEGORY, e.ACTION_TYPE = d.ActionConstatnts.ACTION_TYPE, e;\n    }(i.BaseMessage);\n\n    e.Action = c;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var s,\n        o = this && this.__extends || (s = function (t, e) {\n      return (s = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (t, e) {\n        t.__proto__ = e;\n      } || function (t, e) {\n        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n      })(t, e);\n    }, function (t, e) {\n      function n() {\n        this.constructor = t;\n      }\n\n      s(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n    }),\n        i = this && this.__assign || function () {\n      return (i = Object.assign || function (t) {\n        for (var e, n = 1, s = arguments.length; n < s; n++) for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n\n        return t;\n      }).apply(this, arguments);\n    };\n\n    e.__esModule = !0;\n\n    var r = n(10),\n        a = n(13),\n        c = n(0),\n        u = n(1),\n        l = n(5),\n        d = function (r) {\n      function t(t, e, n, s) {\n        return u.isFalsy(s) ? r.call(this, t, e, n, c.MessageCategory.CALL) || this : r.call(this, t, e, n, s) || this;\n      }\n\n      return o(t, r), t.prototype.getCallInitiator = function () {\n        return this.getCallInitiatedByFromData();\n      }, t.prototype.getCallReceiver = function () {\n        return this.getCallReceivedByFromData();\n      }, t.prototype.setCallInitiator = function (t) {\n        this.callInitiator = t;\n      }, t.prototype.setCallReceiver = function (t) {\n        this.callReceiver = t;\n      }, t.prototype.getData = function () {\n        return this.data;\n      }, t.prototype.setData = function (t) {\n        this.data = t;\n      }, t.prototype.getSessionId = function () {\n        return this.sessionId;\n      }, t.prototype.setSessionId = function (t) {\n        this.sessionId = t;\n      }, t.prototype.getMetadata = function () {\n        return this.data.metadata && (this.metadata = this.data.metadata), this.metadata;\n      }, t.prototype.getSender = function () {\n        try {\n          return this.getSenderFromData();\n        } catch (t) {\n          return this.sender;\n        }\n      }, t.prototype.setMetadata = function (t) {\n        this.metadata = t, this.data = i({}, this.data, {\n          metadata: t\n        });\n      }, t.prototype.getAction = function () {\n        return this.action;\n      }, t.prototype.setAction = function (t) {\n        this.action = t;\n      }, t.prototype.getInitiatedAt = function () {\n        return this.initiatedAt;\n      }, t.prototype.setInitiatedAt = function (t) {\n        this.initiatedAt = t;\n      }, t.prototype.getJoinedAt = function () {\n        return this.joinedAt;\n      }, t.prototype.setJoinedAt = function (t) {\n        this.joinedAt = t;\n      }, t.prototype.setRawData = function (t) {\n        this.rawData = t;\n      }, t.prototype.getRawData = function () {\n        return this.rawData;\n      }, t.prototype.setSender = function (t) {\n        this.sender = t;\n      }, t.callFromJSON = function (t) {\n        var e = new this(t[c.MessageConstatnts.KEYS.RECEIVER], t[c.MessageConstatnts.KEYS.TYPE], t[c.MessageConstatnts.KEYS.RECEIVER_TYPE], c.MessageCategory.CALL),\n            n = t[c.MessageConstatnts.KEYS.DATA];\n        e.setAction(n[c.MessageConstatnts.KEYS.ACTION]), n[c.MessageConstatnts.KEYS.METADATA] && e.setMetadata(n[c.MessageConstatnts.KEYS.METADATA]);\n        var s = n[c.ActionConstatnts.ACTION_KEYS.ENTITIES];\n        if (s[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY]) s[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY];\n\n        if (s[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON]) {\n          var r = s[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON];\n\n          if (r[c.CallConstants.CALL_KEYS.CALL_ENTITY]) {\n            var o = r[c.CallConstants.CALL_KEYS.CALL_ENTITY];\n\n            if (o[c.CallConstants.CALL_KEYS.CALL_SESSION_ID] && (e.sessionId = o[c.CallConstants.CALL_KEYS.CALL_SESSION_ID]), o[c.CallConstants.CALL_KEYS.CALL_STATUS] && (e.status = o[c.CallConstants.CALL_KEYS.CALL_STATUS]), o[c.CallConstants.CALL_KEYS.CALL_DATA]) {\n              var i = o[c.CallConstants.CALL_KEYS.CALL_DATA];\n              if (i[c.CallConstants.CALL_KEYS.CALL_METADATA] && (e.metadata = i[c.CallConstants.CALL_KEYS.CALL_METADATA]), i[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES]) i[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES];\n            }\n\n            o[c.CallConstants.CALL_KEYS.CALL_INITIATED_AT] && (e.initiatedAt = o[c.CallConstants.CALL_KEYS.CALL_INITIATED_AT]), o[c.CallConstants.CALL_KEYS.CALL_JOINED_AT] && (e.joinedAt = o[c.CallConstants.CALL_KEYS.CALL_JOINED_AT]), o[c.CallConstants.CALL_KEYS.CALL_LEFT_AT] && (e.joinedAt = o[c.CallConstants.CALL_KEYS.CALL_LEFT_AT]);\n          }\n        }\n\n        return e;\n      }, t.prototype.getSenderFromData = function () {\n        var t = this.getData();\n        if ((t = t[c.ActionConstatnts.ACTION_KEYS.ENTITIES])[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.CallConstants.CALL_KEYS.CALL_ENTITY]) return new l.User(t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.CallConstants.CALL_KEYS.CALL_ENTITY]);\n      }, t.prototype.getCallInitiatedByFromData = function () {\n        var t = this.getData();\n        if ((t = t[c.ActionConstatnts.ACTION_KEYS.ENTITIES])[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.CallConstants.CALL_KEYS.CALL_DATA][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.CallConstants.CALL_KEYS.CALL_SENDER]) return new l.User(t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.CallConstants.CALL_KEYS.CALL_DATA][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.CallConstants.CALL_KEYS.CALL_SENDER][c.CallConstants.CALL_KEYS.CALL_ENTITY]);\n      }, t.prototype.getCallReceivedByFromData = function () {\n        var t = this.getData();\n\n        if ((t = t[c.ActionConstatnts.ACTION_KEYS.ENTITIES])[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY]) {\n          if (t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY_TYPE] == c.CallConstants.CALL_KEYS.CALL_ENTITY_USER) return new l.User(t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY]);\n          var e = new a.Group(t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.GroupConstants.KEYS.GUID], t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.GroupConstants.KEYS.NAME], t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.GroupConstants.KEYS.TYPE]);\n          return Object.assign(e, t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY]);\n        }\n      }, t.TYPE = c.MessageConstatnts.TYPE, t.RECEIVER_TYPE = c.MessageConstatnts.RECEIVER_TYPE, t.CATEGORY = c.MessageConstatnts.CATEGORY, t.ACTION_TYPE = c.ActionConstatnts.ACTION_TYPE, t;\n    }(r.BaseMessage);\n\n    e.Call = d;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = n(1),\n        r = n(0),\n        o = n(11),\n        i = n(2),\n        a = function () {\n      function t(t) {\n        this.store = r.constants.DEFAULT_STORE, i.CometChat.isNative || (s.isFalsy(t) || (this.store = t), this.settingsStore = o.createInstance({\n          name: s.format(r.LOCAL_STORE.STORE_STRING, i.CometChat.getAppId(), r.LOCAL_STORE.MESSAGE_LISTENERS_LIST)\n        }), this.settingsStore.setDriver([o.LOCALSTORAGE, o.INDEXEDDB, o.WEBSQL]));\n      }\n\n      return t.getInstance = function () {\n        return null == t.settingsStore && (t.settingsStore = new t()), t.settingsStore;\n      }, t.prototype.set = function (t, e) {\n        return this.settingsStore.setItem(t, e);\n      }, t.prototype.remove = function (t) {\n        this.settingsStore.removeItem(t);\n      }, t.prototype.get = function (t) {\n        return this.settingsStore.getItem(t);\n      }, t.prototype.clearStore = function () {\n        return this.settingsStore.clear();\n      }, t.prototype.clear = function (t) {}, t.prototype.selectStore = function (t) {\n        this.store = t;\n      }, t.settingsStore = null, t;\n    }();\n\n    e.MessageListnerMaping = a;\n  }, function (t, e) {\n    var n;\n\n    n = function () {\n      return this;\n    }();\n\n    try {\n      n = n || new Function(\"return this\")();\n    } catch (t) {\n      \"object\" == typeof window && (n = window);\n    }\n\n    t.exports = n;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var i = n(1),\n        a = n(0),\n        c = n(6),\n        s = function () {\n      function o() {\n        this.baseUrl = \"https://kohoutek.cometchat.com/\", this.apiVersion = \"v1.8\", this.apiBaseUrl = this.baseUrl + this.apiVersion + \"/\", this.adminApiUrl = \"https://api.cometchat.com/\", this.adminApiVersion = \"v1.8\", this.uriEndpoints = {\n          authToken: {\n            endpoint: \"users/{{uid}}/auth_tokens\",\n            method: \"POST\",\n            data: {\n              uid: \"string|max:100\"\n            },\n            isAdminApi: !0\n          },\n          appSettings: {\n            endpoint: \"settings\",\n            method: \"GET\"\n          },\n          login: {\n            endpoint: \"admin/users/auth\",\n            method: \"POST\",\n            data: {\n              uid: \"string|max:100\"\n            }\n          },\n          logout: {\n            endpoint: \"admin/users/auth/{{authToken}}\",\n            method: \"DELETE\"\n          },\n          getMyDetails: {\n            endpoint: \"me\",\n            method: \"GET\"\n          },\n          updateMyDetails: {\n            endpoint: \"/me\",\n            method: \"PUT\"\n          },\n          users: {\n            endpoint: \"users\",\n            method: \"GET\"\n          },\n          user: {\n            endpoint: \"users/{{uid}}\",\n            method: \"GET\"\n          },\n          blockUsers: {\n            endpoint: \"blockedusers\",\n            method: \"POST\"\n          },\n          blockedUsersList: {\n            endpoint: \"blockedusers\",\n            method: \"GET\"\n          },\n          unblockUsers: {\n            endpoint: \"blockedusers\",\n            method: \"DELETE\"\n          },\n          userLogout: {\n            endpoint: \"me\",\n            method: \"DELETE\"\n          },\n          sendFriendRequests: {\n            endpoint: \"user/friends\",\n            method: \"POST\",\n            data: {\n              uids: \"array<string|max:100>\"\n            }\n          },\n          getFriends: {\n            endpoint: \"user/friends\",\n            method: \"GET\"\n          },\n          unfriend: {\n            endpoint: \"user/friends/{{uid}}/{{gid}}\",\n            method: \"DELETE\",\n            data: {\n              uids: \"array<string|max:100>\"\n            }\n          },\n          acceptFriendRequest: {\n            endpoint: \"user/friends/{{uid}}/accept\",\n            method: \"PUT\",\n            data: {\n              uids: \"array<string|max:100>\"\n            }\n          },\n          rejectFriendRequest: {\n            endpoint: \"user/friends/{{uid}}/reject\",\n            method: \"DELETE\",\n            data: {\n              uids: \"array<string|max:100>\"\n            }\n          },\n          createGroup: {\n            endpoint: \"groups\",\n            method: \"POST\",\n            data: {\n              guid: \"required|string|max:100\",\n              name: \"required|string|max:100\",\n              type: \"enum|public,protected,password\",\n              password: \"filled|string|max:100\"\n            }\n          },\n          getGroups: {\n            endpoint: \"groups\",\n            method: \"GET\"\n          },\n          getGroup: {\n            endpoint: \"groups/{{guid}}\",\n            method: \"GET\"\n          },\n          updateGroup: {\n            endpoint: \"groups/{{guid}}\",\n            method: \"PUT\"\n          },\n          deleteGroup: {\n            endpoint: \"groups/{{guid}}\",\n            method: \"DELETE\"\n          },\n          addGroupMembers: {\n            endpoint: \"groups/{{guid}}/members\",\n            method: \"POST\",\n            data: {\n              uids: \"array<string|max:100>\"\n            }\n          },\n          getGroupMembers: {\n            endpoint: \"groups/{{guid}}/members\",\n            method: \"GET\"\n          },\n          joinGroup: {\n            endpoint: \"groups/{{guid}}/members\",\n            method: \"POST\"\n          },\n          leaveGroup: {\n            endpoint: \"groups/{{guid}}/members\",\n            method: \"DELETE\"\n          },\n          kickGroupMembers: {\n            endpoint: \"groups/{{guid}}/members/{{uid}}\",\n            method: \"DELETE\",\n            data: {\n              uids: \"array<string|max:100>\"\n            }\n          },\n          changeScopeOfMember: {\n            endpoint: \"groups/{{guid}}/members/{{uid}}\",\n            method: \"PUT\",\n            data: {\n              uids: \"array<string|max:100>\"\n            }\n          },\n          banGroupMember: {\n            endpoint: \"groups/{{guid}}/bannedusers/{{uid}}\",\n            method: \"POST\",\n            data: {\n              uids: \"array<string|max:100>\"\n            }\n          },\n          unbanGroupMember: {\n            endpoint: \"groups/{{guid}}/bannedusers/{{uid}}\",\n            method: \"DELETE\",\n            data: {\n              uids: \"array<string|max:100>\"\n            }\n          },\n          addMemebersToGroup: {\n            endpoint: \"groups/{{guid}}/members\",\n            method: \"PUT\"\n          },\n          getBannedGroupMembers: {\n            endpoint: \"groups/{{guid}}/bannedusers\",\n            method: \"GET\"\n          },\n          promotemoteGroupMember: {\n            endpoint: \"groups/{{guid}}/promote\",\n            method: \"PUT\",\n            data: {\n              uids: \"array<string|max:100>\"\n            }\n          },\n          demoteGroupMember: {\n            endpoint: \"groups/{{guid}}/demote\",\n            method: \"DELETE\",\n            data: {\n              uids: \"array<string|max:100>\"\n            }\n          },\n          sendMessage: {\n            endpoint: \"messages\",\n            method: \"POST\",\n            data: {\n              sender: \"array:string:max:100>\",\n              isGroupMember: \"filled|boolean|bail\",\n              data: \"required|json\"\n            }\n          },\n          getMessages: {\n            endpoint: \"messages\",\n            method: \"GET\"\n          },\n          getMessageDetails: {\n            endpoint: \"messages/{{messageId}}\",\n            method: \"GET\"\n          },\n          getUserMessages: {\n            endpoint: \"users/{{listId}}/messages\",\n            method: \"GET\"\n          },\n          getGroupMessages: {\n            endpoint: \"groups/{{listId}}/messages\",\n            method: \"GET\"\n          },\n          getMessage: {\n            endpoint: \"user/messages/{{muid}}\",\n            method: \"GET\"\n          },\n          updateMessage: {\n            endpoint: \"messages/{{messageId}}\",\n            method: \"PUT\"\n          },\n          deleteMessage: {\n            endpoint: \"messages/{{messageId}}\",\n            method: \"DELETE\"\n          },\n          createCallSession: {\n            endpoint: \"calls\",\n            method: \"POST\",\n            data: {}\n          },\n          updateCallSession: {\n            endpoint: \"calls/{{sessionid}}\",\n            method: \"put\",\n            data: {}\n          }\n        };\n      }\n\n      return o.prototype.getEndpointData = function (r) {\n        return new Promise(function (s, t) {\n          c.LocalStorage.getInstance().get(a.APP_SETTINGS.APP_SETTINGS).then(function (t) {\n            if (i.isFalsy(t)) {\n              var e = {};\n              if (new o().uriEndpoints.hasOwnProperty(r)) if ((e = new o().uriEndpoints[r]).hasOwnProperty(\"isAdminApi\")) {\n                var n = new o().adminApiUrl + new o().adminApiVersion + \"/\" + e.endpoint;\n                e.endpoint = n;\n              } else {\n                n = new o().baseUrl + new o().apiVersion + \"/\" + e.endpoint;\n                e.endpoint = n;\n              }\n              s(e);\n            } else {\n              e = {};\n              if (new o().uriEndpoints.hasOwnProperty(r)) if ((e = new o().uriEndpoints[r]).hasOwnProperty(\"isAdminApi\")) e.endpoint = \"https://\" + t[a.APP_SETTINGS.KEYS.ADMIN_API_HOST] + \"/\" + new o().adminApiVersion + \"/\" + e.endpoint;else {\n                n = \"https://\" + t[a.APP_SETTINGS.KEYS.CLIENT_API_HOST] + \"/\" + new o().apiVersion + \"/\" + e.endpoint;\n                e.endpoint = n;\n              }\n              s(e);\n            }\n          }, function (t) {\n            var e;\n            new o().uriEndpoints.hasOwnProperty(r) && ((e = new o().uriEndpoints[r]).hasOwnProperty([\"isAdminApi\"]) ? e.endpoint = new o().adminApiUrl + new o().adminApiVersion + \"/\" + e.endpoint : e.endpoint = new o().baseUrl + new o().apiVersion + \"/\" + e.endpoint), s(e);\n          });\n        });\n      }, o;\n    }();\n\n    e.EndpointFactory = s;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var s,\n        r = this && this.__extends || (s = function (t, e) {\n      return (s = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (t, e) {\n        t.__proto__ = e;\n      } || function (t, e) {\n        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n      })(t, e);\n    }, function (t, e) {\n      function n() {\n        this.constructor = t;\n      }\n\n      s(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n    }),\n        i = this && this.__assign || function () {\n      return (i = Object.assign || function (t) {\n        for (var e, n = 1, s = arguments.length; n < s; n++) for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n\n        return t;\n      }).apply(this, arguments);\n    };\n\n    e.__esModule = !0;\n\n    var o = n(10),\n        a = n(0),\n        c = n(5),\n        u = function (o) {\n      function t(t, e, n, s) {\n        var r = o.call(this, t, n, s, a.MessageCategory.MESSAGE) || this;\n\n        switch (n) {\n          case \"text\":\n            r.data = {\n              text: e\n            }, r.text = e;\n        }\n\n        return r;\n      }\n\n      return r(t, o), t.prototype.getSender = function () {\n        try {\n          return this.getSenderFromData();\n        } catch (t) {\n          return this.sender;\n        }\n      }, t.prototype.getMetadata = function () {\n        return this.data.metadata && (this.metadata = this.data.metadata), this.metadata;\n      }, t.prototype.setMetadata = function (t) {\n        this.metadata = t, this.data = i({}, this.data, {\n          metadata: t\n        });\n      }, t.prototype.getData = function () {\n        return this.data;\n      }, t.prototype.setData = function (t) {\n        this.data = t;\n      }, t.prototype.getText = function () {\n        return this.text;\n      }, t.prototype.setText = function (t) {\n        this.text = t, this.data.text = t;\n      }, t.prototype.setProcessedText = function (t) {\n        this.processedText = t;\n      }, t.prototype.getProcessedText = function () {\n        return this.processedText;\n      }, t.prototype.getSenderFromData = function () {\n        var t = this.getData();\n        if (t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY]) return new c.User(t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY]);\n      }, t.TYPE = a.MessageConstatnts.TYPE.TEXT, t.RECEIVER_TYPE = a.MessageConstatnts.RECEIVER_TYPE, t.CATEGORY = a.MessageConstatnts.CATEGORY.MESSAGE, t;\n    }(o.BaseMessage);\n\n    e.TextMessage = u;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var s,\n        r = this && this.__extends || (s = function (t, e) {\n      return (s = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (t, e) {\n        t.__proto__ = e;\n      } || function (t, e) {\n        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n      })(t, e);\n    }, function (t, e) {\n      function n() {\n        this.constructor = t;\n      }\n\n      s(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n    }),\n        i = this && this.__assign || function () {\n      return (i = Object.assign || function (t) {\n        for (var e, n = 1, s = arguments.length; n < s; n++) for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n\n        return t;\n      }).apply(this, arguments);\n    };\n\n    e.__esModule = !0;\n\n    var o = n(10),\n        a = n(0),\n        c = n(5),\n        u = function (o) {\n      function t(t, e, n, s) {\n        var r = this;\n        return (r = o.call(this, t, n, s, a.MessageCategory.MESSAGE) || this).data = {\n          url: \"object\" != typeof e ? e : void 0\n        }, \"object\" != typeof (r.file = e) && (r.url = e), r;\n      }\n\n      return r(t, o), t.prototype.setCaption = function (t) {\n        this.caption = t, this.data[a.MessageConstatnts.KEYS.TEXT] = t;\n      }, t.prototype.getCaption = function () {\n        return this.data[a.MessageConstatnts.KEYS.TEXT];\n      }, t.prototype.getSender = function () {\n        try {\n          return this.getSenderFromData();\n        } catch (t) {\n          return this.sender;\n        }\n      }, t.prototype.getUrl = function () {\n        return this.url;\n      }, t.prototype.setUrl = function (t) {\n        this.url = t;\n      }, t.prototype.getMetadata = function () {\n        return this.data.metadata && (this.metadata = this.data.metadata), this.metadata;\n      }, t.prototype.setMetadata = function (t) {\n        this.metadata = t, this.data = i({}, this.data, {\n          metadata: t\n        });\n      }, t.prototype.getData = function () {\n        return this.data;\n      }, t.prototype.setData = function (t) {\n        this.data = t;\n      }, t.prototype.getAttachment = function () {\n        return this.attachment;\n      }, t.prototype.setAttachment = function (t) {\n        this.attachment = t;\n      }, t.prototype.getSenderFromData = function () {\n        var t = this.getData();\n        if (t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY]) return new c.User(t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY]);\n      }, t.TYPE = a.MessageConstatnts.TYPE, t.RECEIVER_TYPE = a.MessageConstatnts.RECEIVER_TYPE, t.CATEGORY = a.MessageConstatnts.CATEGORY, t;\n    }(o.BaseMessage);\n\n    e.MediaMessage = u;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var s,\n        r = this && this.__extends || (s = function (t, e) {\n      return (s = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (t, e) {\n        t.__proto__ = e;\n      } || function (t, e) {\n        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n      })(t, e);\n    }, function (t, e) {\n      function n() {\n        this.constructor = t;\n      }\n\n      s(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n    }),\n        o = this && this.__assign || function () {\n      return (o = Object.assign || function (t) {\n        for (var e, n = 1, s = arguments.length; n < s; n++) for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n\n        return t;\n      }).apply(this, arguments);\n    };\n\n    e.__esModule = !0;\n\n    var i = n(10),\n        c = n(0),\n        u = n(5),\n        l = n(1),\n        a = function (a) {\n      function t() {\n        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n\n        var n = this;\n\n        if (3 == t.length) {\n          var s = t[0],\n              r = t[1],\n              o = t[2];\n          (n = a.call(this, s, c.MessageConstatnts.TYPE.CUSTOM, r, c.MessageCategory.MESSAGE) || this).customData = o, l.isFalsy(n.data) && (n.data = {}), n.data[c.MessageConstatnts.KEYS.CUSTOM_DATA] = o;\n        }\n\n        if (4 == t.length) {\n          s = t[0], r = t[1];\n          var i = t[2];\n          o = t[3];\n          (n = a.call(this, s, i, r, c.MessageCategory.CUSTOM) || this).customData = o, l.isFalsy(n.data) && (n.data = {}), n.data[c.MessageConstatnts.KEYS.CUSTOM_DATA] = o;\n        }\n\n        return n;\n      }\n\n      return r(t, a), t.prototype.getCustomData = function () {\n        return this.customData;\n      }, t.prototype.setCustomData = function (t) {\n        this.customData = t, this.data[c.MessageConstatnts.KEYS.CUSTOM_DATA] = t;\n      }, t.prototype.getSender = function () {\n        try {\n          return this.getSenderFromData();\n        } catch (t) {\n          return this.sender;\n        }\n      }, t.prototype.getSubType = function () {\n        return this.subType;\n      }, t.prototype.setSubType = function (t) {\n        this.subType = t, this.data = o({}, this.data, {\n          subType: t\n        });\n      }, t.prototype.getMetadata = function () {\n        return this.metadata;\n      }, t.prototype.setMetadata = function (t) {\n        this.metadata = t, this.data = o({}, this.data, {\n          metadata: t\n        });\n      }, t.prototype.getData = function () {\n        return this.data;\n      }, t.prototype.getSenderFromData = function () {\n        var t = this.getData();\n        if (t[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.SENDER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY]) return new u.User(t[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.SENDER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY]);\n      }, t;\n    }(i.BaseMessage);\n\n    e.CustomMessage = a;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = n(41),\n        r = n(0),\n        o = function () {\n      function t() {}\n\n      return t.transformPresence = function (t) {\n        return t.getAttribute(\"type\") ? new s.UserPresence(t.getAttribute(r.PresenceConstatnts.XMPP_KEYS.FROM), r.PresenceConstatnts.STATUS.OFFLINE, new Date().getTime()) : new s.UserPresence(t.getAttribute(r.PresenceConstatnts.XMPP_KEYS.FROM), r.PresenceConstatnts.STATUS.ONLINE, new Date().getTime());\n      }, t.transformPresences = function (t) {\n        var e = [];\n        return t.map(function (t) {\n          try {\n            e.push(new s.UserPresence(t.getAttribute(r.PresenceConstatnts.XMPP_KEYS.FROM), t.getAttribute(r.PresenceConstatnts.XMPP_KEYS.STATUS), t.getAttribute(r.PresenceConstatnts.XMPP_KEYS.LAST_ACTIVE_AT)));\n          } catch (t) {}\n        }), e;\n      }, t.transformMUCUserPresence = function (t) {\n        return t.getAttribute(\"type\") ? new s.UserPresence(t.getAttribute(r.PresenceConstatnts.XMPP_KEYS.FROM), r.PresenceConstatnts.STATUS.LEFT, new Date().getTime()) : new s.UserPresence(t.getAttribute(r.PresenceConstatnts.XMPP_KEYS.FROM), r.PresenceConstatnts.STATUS.JOINED, new Date().getTime());\n      }, t.trandformMUCPresence = function (t) {\n        0 < t.getElementsByTagName(\"x\").length && this.transformMUCUserPresence(t);\n      }, t;\n    }();\n\n    e.PresenceController = o;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var i = n(0),\n        r = n(8),\n        a = n(1),\n        c = n(2),\n        u = n(26),\n        l = n(3),\n        s = n(16),\n        d = n(6),\n        o = function () {\n      function o() {\n        this.TAG = \"calling Log\", this.callListner = void 0, this.CALL_NO_ANSWER_INTERVAL = 45e3, this.view = void 0, this.scrollHight = 0, this.scrollHight = 0;\n      }\n\n      return o.prototype.getCallListner = function () {\n        return this.callListner;\n      }, o.prototype.setCallListner = function (t) {\n        this.callListner = new s.UserCallListener(t);\n      }, o.getInstance = function () {\n        return null != this.callController && null != this.callController || (this.callController = new o()), this.callController;\n      }, o.prototype.getActiveCall = function () {\n        return a.isFalsy(this.call) ? null : this.call;\n      }, o.prototype.initiateCall = function (n) {\n        var s = this;\n        return new Promise(function (t, e) {\n          a.isFalsy(s.call) ? null != n && null != n ? (s.call = n, s.joinCallMuc(n.getSessionId()), s.startCallTimer(), t(n)) : e(new l.CometChatException(i.CALL_ERROR.ERROR_IN_CALLING)) : e(new l.CometChatException(i.CALL_ERROR.CALL_ALREADY_INITIATED));\n        });\n      }, o.prototype.onCallInitialized = function () {}, o.prototype.joinCall = function (t) {\n        a.Logger.log(this.TAG, t);\n      }, o.prototype.cancelCall = function () {\n        a.Logger.log(this.TAG, \"calceling the call\"), this.stopCallTimer();\n      }, o.prototype.rejectCall = function () {\n        a.Logger.log(this.TAG, \"rejectCall\");\n      }, o.prototype.sendBusyResponse = function () {\n        a.Logger.log(this.TAG, \"sendBusyResponse\");\n      }, o.prototype.endCall = function (t) {\n        var e = this;\n        c.CometChat.isNative || document.getElementsByName(\"frame\").forEach(function (t) {\n          e.view.removeChild(t), e.view = void 0;\n        });\n        this.endCallSession();\n      }, o.prototype.onCallEnded = function () {\n        var e = this;\n        a.isFalsy(this.call) || (this.call.getReceiverType() == i.CallConstants.RECEIVER_TYPE_GROUP ? a.Logger.info(this.TAG, JSON.stringify(this.call) + \"This call ended\") : (document.getElementsByName(\"frame\").forEach(function (t) {\n          e.view.removeChild(t), e.view = void 0;\n        }), this.endCallSession()));\n      }, o.prototype.unAnswerCall = function () {\n        a.Logger.log(this.TAG, \"unAnswerCall\");\n      }, o.prototype.onCallStarted = function (n) {\n        var s = this;\n        return new Promise(function (t, e) {\n          a.isFalsy(s.call) ? null != n && null != n ? (s.call = n, s.joinCallMuc(n.getSessionId()), t(n)) : e(new l.CometChatException(i.CALL_ERROR.ERROR_IN_CALLING)) : e(new l.CometChatException(i.CALL_ERROR.CALL_ALREADY_INITIATED));\n        });\n      }, o.prototype.endCallSession = function () {\n        try {\n          this.leaveCallMuc(this.call.getSessionId()), this.call = void 0, o.callController = void 0, this.timer && this.stopCallTimer(), this.view = void 0;\n        } catch (t) {\n          a.Logger.error(\"EndCallSession\", {\n            e: t\n          });\n        }\n      }, o.prototype.joinCallMuc = function (e) {\n        var s = this;\n        a.getAppSettings().then(function (t) {\n          r.XMPPConnectionHelper.getInstance().connection.muc.join(a.format(i.XMPP.muc_jid_string, c.CometChat.getAppId(), e, c.CometChat.getAppId(), \"call.\" + t[i.APP_SETTINGS.KEYS.CHAT_HOST]), r.XMPPConnectionHelper.getInstance().connection.jid, null, function (e) {\n            try {\n              var n = u.PresenceController.transformPresence(e);\n              r.XMPPConnectionHelper.getInstance().getUsersVCard(n.getUid(), function (t) {\n                if (!a.isFalsy(t.getUid())) switch (t.setLastActiveAt(n.getLastActiveAt()), n.getStatus()) {\n                  case i.PresenceConstatnts.STATUS.ONLINE:\n                    t.setStatus(i.PresenceConstatnts.STATUS.ONLINE);\n                    break;\n\n                  default:\n                    t.setStatus(i.PresenceConstatnts.STATUS.OFFLINE);\n                }\n\n                switch (u.PresenceController.transformMUCUserPresence(e).getStatus()) {\n                  case i.PresenceConstatnts.STATUS.JOINED:\n                    s.callListner && (a.isFalsy(s.callListner._eventListener.onUserJoined) || s.callListner._eventListener.onUserJoined(t));\n                    break;\n\n                  case i.PresenceConstatnts.STATUS.LEFT:\n                    s.callListner && (a.isFalsy(s.callListner._eventListener.onUserLeft) || s.callListner._eventListener.onUserLeft(t));\n                }\n              });\n            } catch (t) {}\n\n            return !0;\n          });\n        }, function (t) {});\n      }, o.prototype.leaveCallMuc = function (e) {\n        a.getAppSettings().then(function (t) {\n          r.XMPPConnectionHelper.getInstance().connection.muc.leave(a.format(i.XMPP.muc_jid_string, c.CometChat.getAppId(), e, c.CometChat.getAppId(), \"call.\" + t[i.APP_SETTINGS.KEYS.CHAT_HOST]), r.XMPPConnectionHelper.getInstance().connection.jid);\n        });\n      }, o.prototype.startCallTimer = function () {\n        var e = this;\n        this.timer = setTimeout(function () {\n          c.CometChat.sendUnansweredResponse(e.call.getSessionId()).then(function (t) {\n            e.endCallSession();\n          });\n        }, this.CALL_NO_ANSWER_INTERVAL);\n      }, o.prototype.stopCallTimer = function () {\n        clearTimeout(this.timer);\n      }, o.prototype.startCall = function (e, t, n) {\n        var s = this;\n\n        if (null == this.view) {\n          this.timer && this.stopCallTimer(), a.isFalsy(t) || this.setCallListner(t);\n          var r = document.createElement(\"iframe\");\n          this.getCallUrl(this.call.getType()).then(function (t) {\n            if (r.src = t + \"\", r.name = \"frame\", r.setAttribute(\"allow\", \"camera,microphone\"), r.setAttribute(\"width\", \"100%\"), r.setAttribute(\"height\", \"100%\"), o.callScreen = r, e && (s.view = e), c.CometChat.isNative) return s.view.props.prop1(n, t), void (s.view.props.onMessage = function (t) {});\n            e.appendChild(r), window.addEventListener(\"message\", function (t) {\n              \"hangup\" == t.data.type && s.call && (a.Logger.info(s.TAG, s.callListner), s.callListner && s.callListner._eventListener.onCallEnded(s.call), c.CometChat.endCall(s.call.getSessionId()).then(function (t) {\n                s.callListner && s.callListner._eventListener.onCallEnded(t), a.Logger.info(s.TAG, {\n                  call: t\n                });\n              }).catch(function (t) {\n                a.Logger.info(s.TAG, \"The Call Was Already Ended\");\n              }));\n            });\n          });\n        }\n      }, o.prototype.getCallUrl = function (n) {\n        var s = this,\n            r = void 0;\n        return new Promise(function (e, t) {\n          d.LocalStorage.getInstance().get(i.APP_SETTINGS.APP_SETTINGS).then(function (t) {\n            a.isFalsy(t) ? a.getAppSettings().then(function (t) {\n              r = \"https://\" + t[i.APP_SETTINGS.KEYS.WEBRTC_HOST], r = n == i.CallConstants.CALL_TYPE_AUDIO ? r + \"/\" + s.call.getSessionId() + \"#config.startWithVideoMuted=true&config.startWithAudioMuted=false\" : r + \"/\" + s.call.getSessionId() + \"#config.startWithAudioMuted=false&config.startWithAudioMuted=false\", e(r);\n            }) : (r = \"https://\" + t[i.APP_SETTINGS.KEYS.WEBRTC_HOST], r = n == i.CallConstants.CALL_TYPE_AUDIO ? r + \"/\" + s.call.getSessionId() + \"#config.startWithVideoMuted=true&config.startWithAudioMuted=false\" : r + \"/\" + s.call.getSessionId() + \"#config.startWithAudioMuted=false&config.startWithAudioMuted=false\", e(r));\n          });\n        });\n      }, o.toggleAudio = function () {\n        this.callScreen && this.callScreen.contentWindow.postMessage({\n          action: \"audio\"\n        }, \"*\");\n      }, o.toggleVideo = function () {\n        this.callScreen && this.callScreen.contentWindow.postMessage({\n          action: \"video\"\n        }, \"*\");\n      }, o.leave = function () {\n        this.callScreen && this.callScreen.contentWindow.postMessage({\n          action: \"leave\"\n        }, \"*\");\n      }, o.prototype.destroy = function () {\n        a.isFalsy(this.call) || (this.call = void 0), a.isFalsy(this.timer) || (this.timer = void 0), a.isFalsy(this.view) || (this.view = void 0);\n      }, o.callController = void 0, o;\n    }();\n\n    e.CallController = o;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = function () {\n      function t(t, e, n) {\n        this.receiverId = t, this.receiverType = e, this.metadata = n;\n      }\n\n      return t.prototype.getReceiverType = function () {\n        return this.receiverType;\n      }, t.prototype.setReceiverType = function (t) {\n        this.receiverType = t;\n      }, t.prototype.getReceiverId = function () {\n        return this.receiverId;\n      }, t.prototype.setReceiverId = function (t) {\n        this.receiverId = t;\n      }, t.prototype.getMetadata = function () {\n        return this.metadata;\n      }, t.prototype.setMetadata = function (t) {\n        this.metadata = t;\n      }, t.prototype.getSender = function () {\n        return this.sender;\n      }, t.prototype.setSender = function (t) {\n        this.sender = t;\n      }, t;\n    }();\n\n    e.TypingIndicator = s;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = n(1),\n        r = n(0),\n        o = n(8),\n        i = function () {\n      function t() {}\n\n      return t.addTypingStarted = function (t) {\n        this.TYPING_STARTED_MAP[t] = s.getCurrentTime();\n      }, t.removeTypingStarted = function (t) {\n        delete this.TYPING_STARTED_MAP[t];\n      }, t.getTypingStartedMap = function (t) {\n        if (t) return this.TYPING_STARTED_MAP[t];\n      }, t.addTypingEnded = function (t) {\n        this.TYPING_ENDED_MAP[t] = s.getCurrentTime();\n      }, t.removeTypingEnded = function (t) {\n        delete this.TYPING_ENDED_MAP[t];\n      }, t.getTypingEndedMap = function (t) {\n        if (t) return this.TYPING_ENDED_MAP[t];\n      }, t.addIncomingTypingStarted = function (t) {\n        this.INCOMING_TYPING_STARTED_MAP[t.getReceiverId()] = {\n          typingNotification: t,\n          timestamp: s.getCurrentTime()\n        };\n      }, t.removeIncomingTypingStarted = function (t) {\n        delete this.INCOMING_TYPING_STARTED_MAP[t.getReceiverId()];\n      }, t.clearTimer = function () {\n        var n = this;\n        new Promise(function (t, e) {\n          Object.keys(n.TYPING_STARTED_MAP).map(function (t) {\n            s.getCurrentTime() - n.TYPING_STARTED_MAP[t] >= 1e3 * r.DEFAULT_VALUES.DEFAULT_MAX_TYPING_INDICATOR_LIMIT && delete n.TYPING_STARTED_MAP[t];\n          });\n        }), new Promise(function (t, e) {\n          Object.keys(n.TYPING_ENDED_MAP).map(function (t) {\n            s.getCurrentTime() - n.TYPING_ENDED_MAP[t] >= 1e3 * r.DEFAULT_VALUES.DEFAULT_MAX_TYPING_INDICATOR_LIMIT && delete n.TYPING_ENDED_MAP[t];\n          });\n        }), new Promise(function (t, e) {\n          Object.keys(n.INCOMING_TYPING_STARTED_MAP).map(function (t) {\n            s.getCurrentTime() - n.INCOMING_TYPING_STARTED_MAP[t][r.TYPING_NOTIFICATION.KEYS.TIMESTAMP] >= 1e3 * r.DEFAULT_VALUES.DEFAULT_MAX_TYPING_INDICATOR_LIMIT && (o.XMPPConnectionHelper.getInstance().publishTypinStatusNotification(n.INCOMING_TYPING_STARTED_MAP[t][r.TYPING_NOTIFICATION.KEYS.TYPING_NOTIFICATION], r.TYPING_NOTIFICATION.ACTIONS.ENDED), delete n.INCOMING_TYPING_STARTED_MAP[t]);\n          });\n        });\n      }, t.TYPING_STARTED_MAP = {}, t.TYPING_ENDED_MAP = {}, t.INCOMING_TYPING_STARTED_MAP = {}, t;\n    }();\n\n    e.TypingNotificationController = i;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var s = this && this.__awaiter || function (o, i, a, c) {\n      return new (a || (a = Promise))(function (t, e) {\n        function n(t) {\n          try {\n            r(c.next(t));\n          } catch (t) {\n            e(t);\n          }\n        }\n\n        function s(t) {\n          try {\n            r(c.throw(t));\n          } catch (t) {\n            e(t);\n          }\n        }\n\n        function r(e) {\n          e.done ? t(e.value) : new a(function (t) {\n            t(e.value);\n          }).then(n, s);\n        }\n\n        r((c = c.apply(o, i || [])).next());\n      });\n    },\n        r = this && this.__generator || function (n, s) {\n      var r,\n          o,\n          i,\n          t,\n          a = {\n        label: 0,\n        sent: function () {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return t = {\n        next: e(0),\n        throw: e(1),\n        return: e(2)\n      }, \"function\" == typeof Symbol && (t[Symbol.iterator] = function () {\n        return this;\n      }), t;\n\n      function e(e) {\n        return function (t) {\n          return function (e) {\n            if (r) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) try {\n              if (r = 1, o && (i = 2 & e[0] ? o.return : e[0] ? o.throw || ((i = o.return) && i.call(o), 0) : o.next) && !(i = i.call(o, e[1])).done) return i;\n\n              switch (o = 0, i && (e = [2 & e[0], i.value]), e[0]) {\n                case 0:\n                case 1:\n                  i = e;\n                  break;\n\n                case 4:\n                  return a.label++, {\n                    value: e[1],\n                    done: !1\n                  };\n\n                case 5:\n                  a.label++, o = e[1], e = [0];\n                  continue;\n\n                case 7:\n                  e = a.ops.pop(), a.trys.pop();\n                  continue;\n\n                default:\n                  if (!(i = 0 < (i = a.trys).length && i[i.length - 1]) && (6 === e[0] || 2 === e[0])) {\n                    a = 0;\n                    continue;\n                  }\n\n                  if (3 === e[0] && (!i || e[1] > i[0] && e[1] < i[3])) {\n                    a.label = e[1];\n                    break;\n                  }\n\n                  if (6 === e[0] && a.label < i[1]) {\n                    a.label = i[1], i = e;\n                    break;\n                  }\n\n                  if (i && a.label < i[2]) {\n                    a.label = i[2], a.ops.push(e);\n                    break;\n                  }\n\n                  i[2] && a.ops.pop(), a.trys.pop();\n                  continue;\n              }\n\n              e = s.call(n, a);\n            } catch (t) {\n              e = [6, t], o = 0;\n            } finally {\n              r = i = 0;\n            }\n\n            if (5 & e[0]) throw e[1];\n            return {\n              value: e[0] ? e[1] : void 0,\n              done: !0\n            };\n          }([e, t]);\n        };\n      }\n    };\n\n    e.__esModule = !0;\n\n    var o = n(2),\n        i = function () {\n      function n() {}\n\n      return n.addCometChatExtension = function (e) {\n        return s(this, void 0, void 0, function () {\n          return r(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return n.cometChatExtensionList.push(e), o.CometChat.user ? [4, e.onInit(o.CometChat.getAppId(), o.CometChat.user)] : [3, 2];\n\n              case 1:\n                return t.sent(), [3, 4];\n\n              case 2:\n                return [4, e.onInit(o.CometChat.getAppId())];\n\n              case 3:\n                t.sent(), t.label = 4;\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      }, n.cometChatExtensionList = [], n;\n    }();\n\n    e.ExtensionManager = i;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = n(13),\n        r = n(0),\n        o = function () {\n      function t() {}\n\n      return t.trasformJSONGroup = function (t) {\n        var e;\n\n        try {\n          e = new s.Group(t[r.GroupConstants.KEYS.GUID], t[r.GroupConstants.KEYS.NAME], t[r.GroupConstants.KEYS.NAME]), Object.assign(e, t), t = e;\n        } catch (t) {}\n\n        return t;\n      }, t;\n    }();\n\n    e.GroupsController = o;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = n(2),\n        r = n(1),\n        o = n(0),\n        i = n(11),\n        a = function () {\n      function t(t) {\n        this.store = o.constants.DEFAULT_STORE, r.isFalsy(t) || (this.store = t), s.CometChat.isNative || (this.userStore = i.createInstance({\n          name: r.format(o.LOCAL_STORE.STORE_STRING, s.CometChat.getAppId(), o.LOCAL_STORE.USERS_STORE)\n        }), this.userStore.setDriver([i.LOCALSTORAGE, i.INDEXEDDB, i.WEBSQL]));\n      }\n\n      return t.getInstance = function () {\n        return null == t.UserStore && (t.UserStore = new t()), t.UserStore;\n      }, t.prototype.set = function (t, e) {\n        return this.userStore.setItem(t, e);\n      }, t.prototype.remove = function (t) {\n        this.userStore.removeItem(t);\n      }, t.prototype.get = function (t) {\n        return this.userStore.getItem(t);\n      }, t.prototype.clearStore = function () {\n        return this.userStore.clear();\n      }, t.prototype.clear = function (t) {}, t.prototype.selectStore = function (t) {\n        this.store = t;\n      }, t.prototype.storeUsers = function (t) {\n        var e = this;\n        return t.map(function (t) {\n          e.set(t.getUid(), t);\n        }), !0;\n      }, t.prototype.storeUser = function (t) {\n        return this.set(t.getUid(), t), !0;\n      }, t;\n    }();\n\n    e.UserStore = a;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0, e.SERVER_ERRORS = {\n      AUTH_ERR: {\n        code: \"AUTH_ERR_AUTH_TOKEN_NOT_FOUND\",\n        message: \"The auth token %s% does not exist. Please make sure you are logged in and have a valid auth token or try login again.\"\n      }\n    }, e.ERRORS = {\n      PARAMETER_MISSING: {\n        code: \"MISSING_PARAMETERS\",\n        name: \"MISSING/ INVALID PARAMETER\"\n      },\n      NOT_INITIALIZED: {\n        code: \"NOT_INITIALIZED\",\n        name: \"INITIALIZATION NOT DONE\"\n      },\n      NO_INTERNET: {\n        code: \"NO_INTERNET\",\n        name: \"COULD NOT INITIALIZE\"\n      }\n    }, e.INIT_ERROR = {\n      NO_APP_ID: {\n        code: e.ERRORS.PARAMETER_MISSING.code,\n        name: e.ERRORS.PARAMETER_MISSING.name,\n        message: \"mandatory parameter appId missing\",\n        details: {}\n      },\n      NO_INTERNET_CONNECTION: {\n        code: e.ERRORS.NO_INTERNET.code,\n        name: e.ERRORS.NO_INTERNET.name,\n        message: \"you do not have internet connection.\",\n        details: {}\n      }\n    }, e.GROUP_CREATION_ERRORS = {\n      EMPTY_PASSWORD: {\n        code: \"ERR_EMPTY_GROUP_PASS\",\n        details: void 0,\n        message: \"The password is required to join a group.\",\n        name: void 0\n      }\n    }, e.MESSAGES_REQUEST_ERRORS = {\n      REQUEST_IN_PROGRESS_ERROR: {\n        code: \"REQUEST_IN_PROGRESS\",\n        name: \"REQUEST_IN_PROGRESS\",\n        message: \"request already in progress\",\n        details: {}\n      },\n      NOT_ENOUGH_PARAMS: {\n        code: \"NOT_ENOUGH_PARAMETERS\",\n        name: \"NOT_ENOUGH_PARAMETERS\",\n        message: \"you need to set timstamp or message id to fetch next set of messages\",\n        details: {}\n      }\n    }, e.LOGIN_ERROR = {\n      NOT_INITIALIZED: {\n        code: \"-1\",\n        name: \"COMETCHAT_INITIALIZATION_NOT_DONE\",\n        message: \"please initialize the cometchat before using login method\",\n        details: {}\n      },\n      UNAUTHORISED: {\n        code: 401,\n        name: \"USER_NOT_AUTHORISED\",\n        message: \"provided user is not authorised\",\n        details: {}\n      },\n      XMPP_CONNECTION_FAIL: {\n        code: -1,\n        name: \"XMPP_CONNECTION_FAIL\",\n        message: \"XMPP username/password not correct\",\n        details: {}\n      }\n    }, e.TYPINGNOTIFICATION_CONSTANTS = {\n      TOO_MANY_REQUEST: {\n        code: \"TOO_MANY_REQUEST\",\n        name: \"TOO MANY REQUEST\",\n        message: \"too many request, wait for `%s` seconds before sending next request\",\n        details: {}\n      }\n    };\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = n(0),\n        r = function () {\n      function t(t, e) {\n        this.joinedAt = 0, this.isBanned = 0, this.uid = t, e && (this.scope = e);\n      }\n\n      return t.prototype.getName = function () {\n        return this.name;\n      }, t.prototype.setName = function (t) {\n        this.name = t;\n      }, t.prototype.getAvatar = function () {\n        return this.avatar;\n      }, t.prototype.setAvatar = function (t) {\n        this.avatar = t;\n      }, t.prototype.getCredits = function () {\n        return this.credits;\n      }, t.prototype.setCredits = function (t) {\n        this.credits = t;\n      }, t.prototype.getEmail = function () {\n        return this.email;\n      }, t.prototype.setEmail = function (t) {\n        this.email = t;\n      }, t.prototype.getLastActiveAt = function () {\n        return this.lastActiveAt;\n      }, t.prototype.setLastActiveAt = function (t) {\n        this.lastActiveAt = t;\n      }, t.prototype.getLink = function () {\n        return this.link;\n      }, t.prototype.setLink = function (t) {\n        this.link = t;\n      }, t.prototype.getMetadata = function () {\n        return this.metadata;\n      }, t.prototype.setMetadata = function (t) {\n        this.metadata = t;\n      }, t.prototype.getRole = function () {\n        return this.role;\n      }, t.prototype.setRole = function (t) {\n        this.role = t;\n      }, t.prototype.getStatus = function () {\n        return this.status;\n      }, t.prototype.setStatus = function (t) {\n        this.status = t;\n      }, t.prototype.getStatusMessage = function () {\n        return this.statusMessage;\n      }, t.prototype.setStatusMessage = function (t) {\n        this.statusMessage = t;\n      }, t.prototype.setGuid = function (t) {\n        this.guid = t;\n      }, t.prototype.setUid = function (t) {\n        this.uid = t;\n      }, t.prototype.setScope = function (t) {\n        this.scope = t;\n      }, t.prototype.setJoinedAt = function (t) {\n        this.joinedAt = t;\n      }, t.prototype.setIsBanned = function (t) {\n        this.isBanned = t;\n      }, t.prototype.setUser = function (t) {\n        this.user = t;\n      }, t.prototype.getGuid = function () {\n        return this.guid;\n      }, t.prototype.getUid = function () {\n        return this.uid;\n      }, t.prototype.getuser = function () {\n        return this.user;\n      }, t.prototype.getScope = function () {\n        return this.scope;\n      }, t.prototype.getJoinedAt = function () {\n        return this.joinedAt;\n      }, t.prototype.getIsBanned = function () {\n        return this.isBanned;\n      }, t.GroupMemberScope = s.GroupMemberScope, t;\n    }();\n\n    e.GroupMember = r;\n  }, function (t, e) {\n    function o(t, e) {\n      for (var n in t) e[n] = t[n];\n    }\n\n    function n(t, e) {\n      var n = t.prototype;\n\n      if (Object.create) {\n        var s = Object.create(e.prototype);\n        n.__proto__ = s;\n      }\n\n      if (!(n instanceof e)) {\n        function r() {}\n\n        r.prototype = e.prototype, o(n, r = new r()), t.prototype = n = r;\n      }\n\n      n.constructor != t && (n.constructor = t);\n    }\n\n    var _ = \"http://www.w3.org/1999/xhtml\",\n        s = {},\n        m = s.ELEMENT_NODE = 1,\n        C = s.ATTRIBUTE_NODE = 2,\n        T = s.TEXT_NODE = 3,\n        S = s.CDATA_SECTION_NODE = 4,\n        A = s.ENTITY_REFERENCE_NODE = 5,\n        r = s.ENTITY_NODE = 6,\n        I = s.PROCESSING_INSTRUCTION_NODE = 7,\n        y = s.COMMENT_NODE = 8,\n        N = s.DOCUMENT_NODE = 9,\n        R = s.DOCUMENT_TYPE_NODE = 10,\n        v = s.DOCUMENT_FRAGMENT_NODE = 11,\n        i = s.NOTATION_NODE = 12,\n        a = {},\n        c = {},\n        u = (a.INDEX_SIZE_ERR = (c[1] = \"Index size error\", 1), a.DOMSTRING_SIZE_ERR = (c[2] = \"DOMString size error\", 2), a.HIERARCHY_REQUEST_ERR = (c[3] = \"Hierarchy request error\", 3)),\n        l = (a.WRONG_DOCUMENT_ERR = (c[4] = \"Wrong document\", 4), a.INVALID_CHARACTER_ERR = (c[5] = \"Invalid character\", 5), a.NO_DATA_ALLOWED_ERR = (c[6] = \"No data allowed\", 6), a.NO_MODIFICATION_ALLOWED_ERR = (c[7] = \"No modification allowed\", 7), a.NOT_FOUND_ERR = (c[8] = \"Not found\", 8)),\n        d = (a.NOT_SUPPORTED_ERR = (c[9] = \"Not supported\", 9), a.INUSE_ATTRIBUTE_ERR = (c[10] = \"Attribute in use\", 10));\n    a.INVALID_STATE_ERR = (c[11] = \"Invalid state\", 11), a.SYNTAX_ERR = (c[12] = \"Syntax error\", 12), a.INVALID_MODIFICATION_ERR = (c[13] = \"Invalid modification\", 13), a.NAMESPACE_ERR = (c[14] = \"Invalid namespace\", 14), a.INVALID_ACCESS_ERR = (c[15] = \"Invalid access\", 15);\n\n    function h(t, e) {\n      if (e instanceof Error) var n = e;else n = this, Error.call(this, c[t]), this.message = c[t], Error.captureStackTrace && Error.captureStackTrace(this, h);\n      return n.code = t, e && (this.message = this.message + \": \" + e), n;\n    }\n\n    function p() {}\n\n    function E(t, e) {\n      this._node = t, this._refresh = e, f(this);\n    }\n\n    function f(t) {\n      var e = t._node._inc || t._node.ownerDocument._inc;\n\n      if (t._inc != e) {\n        var n = t._refresh(t._node);\n\n        nt(t, \"length\", n.length), o(n, t), t._inc = e;\n      }\n    }\n\n    function g() {}\n\n    function M(t, e) {\n      for (var n = t.length; n--;) if (t[n] === e) return n;\n    }\n\n    function O(t, e, n, s) {\n      if (s ? e[M(e, s)] = n : e[e.length++] = n, t) {\n        var r = (n.ownerElement = t).ownerDocument;\n        r && (s && Y(r, t, s), i = t, a = n, (o = r) && o._inc++, \"http://www.w3.org/2000/xmlns/\" == a.namespaceURI && (i._nsMap[a.prefix ? a.localName : \"\"] = a.value));\n      }\n\n      var o, i, a;\n    }\n\n    function P(t, e, n) {\n      var s = M(e, n);\n      if (!(0 <= s)) throw h(l, new Error(t.tagName + \"@\" + n));\n\n      for (var r = e.length - 1; s < r;) e[s] = e[++s];\n\n      if (e.length = r, t) {\n        var o = t.ownerDocument;\n        o && (Y(o, t, n), n.ownerElement = null);\n      }\n    }\n\n    function b(t) {\n      if (this._features = {}, t) for (var e in t) this._features = t[e];\n    }\n\n    function L() {}\n\n    function D(t) {\n      return (\"<\" == t ? \"&lt;\" : \">\" == t && \"&gt;\") || \"&\" == t && \"&amp;\" || '\"' == t && \"&quot;\" || \"&#\" + t.charCodeAt() + \";\";\n    }\n\n    function w(t, e) {\n      if (e(t)) return !0;\n      if (t = t.firstChild) do {\n        if (w(t, e)) return !0;\n      } while (t = t.nextSibling);\n    }\n\n    function U() {}\n\n    function Y(t, e, n, s) {\n      t && t._inc++, \"http://www.w3.org/2000/xmlns/\" == n.namespaceURI && delete e._nsMap[n.prefix ? n.localName : \"\"];\n    }\n\n    function x(t, e, n) {\n      if (t && t._inc) {\n        t._inc++;\n        var s = e.childNodes;\n        if (n) s[s.length++] = n;else {\n          for (var r = e.firstChild, o = 0; r;) r = (s[o++] = r).nextSibling;\n\n          s.length = o;\n        }\n      }\n    }\n\n    function G(t, e) {\n      var n = e.previousSibling,\n          s = e.nextSibling;\n      return n ? n.nextSibling = s : t.firstChild = s, s ? s.previousSibling = n : t.lastChild = n, x(t.ownerDocument, t), e;\n    }\n\n    function F(t, e, n) {\n      var s = e.parentNode;\n\n      if (s && s.removeChild(e), e.nodeType === v) {\n        var r = e.firstChild;\n        if (null == r) return e;\n        var o = e.lastChild;\n      } else r = o = e;\n\n      var i = n ? n.previousSibling : t.lastChild;\n\n      for (r.previousSibling = i, o.nextSibling = n, i ? i.nextSibling = r : t.firstChild = r, null == n ? t.lastChild = o : n.previousSibling = o; r.parentNode = t, r !== o && (r = r.nextSibling););\n\n      return x(t.ownerDocument || t, t), e.nodeType == v && (e.firstChild = e.lastChild = null), e;\n    }\n\n    function K() {\n      this._nsMap = {};\n    }\n\n    function B() {}\n\n    function k() {}\n\n    function H() {}\n\n    function j() {}\n\n    function V() {}\n\n    function q() {}\n\n    function X() {}\n\n    function J() {}\n\n    function W() {}\n\n    function $() {}\n\n    function Q() {}\n\n    function z() {}\n\n    function Z(t, e) {\n      var n = [],\n          s = 9 == this.nodeType ? this.documentElement : this,\n          r = s.prefix,\n          o = s.namespaceURI;\n      if (o && null == r && null == (r = s.lookupPrefix(o))) var i = [{\n        namespace: o,\n        prefix: null\n      }];\n      return et(this, n, t, e, i), n.join(\"\");\n    }\n\n    function tt(t, e, n) {\n      var s = t.prefix || \"\",\n          r = t.namespaceURI;\n      if (!s && !r) return !1;\n      if (\"xml\" === s && \"http://www.w3.org/XML/1998/namespace\" === r || \"http://www.w3.org/2000/xmlns/\" == r) return !1;\n\n      for (var o = n.length; o--;) {\n        var i = n[o];\n        if (i.prefix == s) return i.namespace != r;\n      }\n\n      return !0;\n    }\n\n    function et(t, e, n, s, r) {\n      if (s) {\n        if (!(t = s(t))) return;\n        if (\"string\" == typeof t) return void e.push(t);\n      }\n\n      switch (t.nodeType) {\n        case m:\n          r || (r = []);\n          r.length;\n          var o = t.attributes,\n              i = o.length,\n              a = t.firstChild,\n              c = t.tagName;\n          n = _ === t.namespaceURI || n, e.push(\"<\", c);\n\n          for (var u = 0; u < i; u++) {\n            \"xmlns\" == (l = o.item(u)).prefix ? r.push({\n              prefix: l.localName,\n              namespace: l.value\n            }) : \"xmlns\" == l.nodeName && r.push({\n              prefix: \"\",\n              namespace: l.value\n            });\n          }\n\n          for (u = 0; u < i; u++) {\n            var l;\n\n            if (tt(l = o.item(u), 0, r)) {\n              var d = l.prefix || \"\",\n                  h = l.namespaceURI,\n                  p = d ? \" xmlns:\" + d : \" xmlns\";\n              e.push(p, '=\"', h, '\"'), r.push({\n                prefix: d,\n                namespace: h\n              });\n            }\n\n            et(l, e, n, s, r);\n          }\n\n          if (tt(t, 0, r)) {\n            d = t.prefix || \"\", h = t.namespaceURI, p = d ? \" xmlns:\" + d : \" xmlns\";\n            e.push(p, '=\"', h, '\"'), r.push({\n              prefix: d,\n              namespace: h\n            });\n          }\n\n          if (a || n && !/^(?:meta|link|img|br|hr|input)$/i.test(c)) {\n            if (e.push(\">\"), n && /^script$/i.test(c)) for (; a;) a.data ? e.push(a.data) : et(a, e, n, s, r), a = a.nextSibling;else for (; a;) et(a, e, n, s, r), a = a.nextSibling;\n            e.push(\"</\", c, \">\");\n          } else e.push(\"/>\");\n\n          return;\n\n        case N:\n        case v:\n          for (a = t.firstChild; a;) et(a, e, n, s, r), a = a.nextSibling;\n\n          return;\n\n        case C:\n          return e.push(\" \", t.name, '=\"', t.value.replace(/[<&\"]/g, D), '\"');\n\n        case T:\n          return e.push(t.data.replace(/[<&]/g, D));\n\n        case S:\n          return e.push(\"<![CDATA[\", t.data, \"]]>\");\n\n        case y:\n          return e.push(\"\\x3c!--\", t.data, \"--\\x3e\");\n\n        case R:\n          var E = t.publicId,\n              f = t.systemId;\n          if (e.push(\"<!DOCTYPE \", t.name), E) e.push(' PUBLIC \"', E), f && \".\" != f && e.push('\" \"', f), e.push('\">');else if (f && \".\" != f) e.push(' SYSTEM \"', f, '\">');else {\n            var g = t.internalSubset;\n            g && e.push(\" [\", g, \"]\"), e.push(\">\");\n          }\n          return;\n\n        case I:\n          return e.push(\"<?\", t.target, \" \", t.data, \"?>\");\n\n        case A:\n          return e.push(\"&\", t.nodeName, \";\");\n\n        default:\n          e.push(\"??\", t.nodeName);\n      }\n    }\n\n    function nt(t, e, n) {\n      t[e] = n;\n    }\n\n    h.prototype = Error.prototype, o(a, h), p.prototype = {\n      length: 0,\n      item: function (t) {\n        return this[t] || null;\n      },\n      toString: function (t, e) {\n        for (var n = [], s = 0; s < this.length; s++) et(this[s], n, t, e);\n\n        return n.join(\"\");\n      }\n    }, E.prototype.item = function (t) {\n      return f(this), this[t];\n    }, n(E, p), g.prototype = {\n      length: 0,\n      item: p.prototype.item,\n      getNamedItem: function (t) {\n        for (var e = this.length; e--;) {\n          var n = this[e];\n          if (n.nodeName == t) return n;\n        }\n      },\n      setNamedItem: function (t) {\n        var e = t.ownerElement;\n        if (e && e != this._ownerElement) throw new h(d);\n        var n = this.getNamedItem(t.nodeName);\n        return O(this._ownerElement, this, t, n), n;\n      },\n      setNamedItemNS: function (t) {\n        var e,\n            n = t.ownerElement;\n        if (n && n != this._ownerElement) throw new h(d);\n        return e = this.getNamedItemNS(t.namespaceURI, t.localName), O(this._ownerElement, this, t, e), e;\n      },\n      removeNamedItem: function (t) {\n        var e = this.getNamedItem(t);\n        return P(this._ownerElement, this, e), e;\n      },\n      removeNamedItemNS: function (t, e) {\n        var n = this.getNamedItemNS(t, e);\n        return P(this._ownerElement, this, n), n;\n      },\n      getNamedItemNS: function (t, e) {\n        for (var n = this.length; n--;) {\n          var s = this[n];\n          if (s.localName == e && s.namespaceURI == t) return s;\n        }\n\n        return null;\n      }\n    }, b.prototype = {\n      hasFeature: function (t, e) {\n        var n = this._features[t.toLowerCase()];\n\n        return !(!n || e && !(e in n));\n      },\n      createDocument: function (t, e, n) {\n        var s = new U();\n\n        if (s.implementation = this, s.childNodes = new p(), (s.doctype = n) && s.appendChild(n), e) {\n          var r = s.createElementNS(t, e);\n          s.appendChild(r);\n        }\n\n        return s;\n      },\n      createDocumentType: function (t, e, n) {\n        var s = new q();\n        return s.name = t, s.nodeName = t, s.publicId = e, s.systemId = n, s;\n      }\n    }, L.prototype = {\n      firstChild: null,\n      lastChild: null,\n      previousSibling: null,\n      nextSibling: null,\n      attributes: null,\n      parentNode: null,\n      childNodes: null,\n      ownerDocument: null,\n      nodeValue: null,\n      namespaceURI: null,\n      prefix: null,\n      localName: null,\n      insertBefore: function (t, e) {\n        return F(this, t, e);\n      },\n      replaceChild: function (t, e) {\n        this.insertBefore(t, e), e && this.removeChild(e);\n      },\n      removeChild: function (t) {\n        return G(this, t);\n      },\n      appendChild: function (t) {\n        return this.insertBefore(t, null);\n      },\n      hasChildNodes: function () {\n        return null != this.firstChild;\n      },\n      cloneNode: function (t) {\n        return function t(e, n, s) {\n          var r = new n.constructor();\n\n          for (var o in n) {\n            var i = n[o];\n            \"object\" != typeof i && i != r[o] && (r[o] = i);\n          }\n\n          n.childNodes && (r.childNodes = new p());\n          r.ownerDocument = e;\n\n          switch (r.nodeType) {\n            case m:\n              var a = n.attributes,\n                  c = r.attributes = new g(),\n                  u = a.length;\n              c._ownerElement = r;\n\n              for (var l = 0; l < u; l++) r.setAttributeNode(t(e, a.item(l), !0));\n\n              break;\n\n            case C:\n              s = !0;\n          }\n\n          if (s) for (var d = n.firstChild; d;) r.appendChild(t(e, d, s)), d = d.nextSibling;\n          return r;\n        }(this.ownerDocument || this, this, t);\n      },\n      normalize: function () {\n        for (var t = this.firstChild; t;) {\n          var e = t.nextSibling;\n          e && e.nodeType == T && t.nodeType == T ? (this.removeChild(e), t.appendData(e.data)) : (t.normalize(), t = e);\n        }\n      },\n      isSupported: function (t, e) {\n        return this.ownerDocument.implementation.hasFeature(t, e);\n      },\n      hasAttributes: function () {\n        return 0 < this.attributes.length;\n      },\n      lookupPrefix: function (t) {\n        for (var e = this; e;) {\n          var n = e._nsMap;\n          if (n) for (var s in n) if (n[s] == t) return s;\n          e = e.nodeType == C ? e.ownerDocument : e.parentNode;\n        }\n\n        return null;\n      },\n      lookupNamespaceURI: function (t) {\n        for (var e = this; e;) {\n          var n = e._nsMap;\n          if (n && t in n) return n[t];\n          e = e.nodeType == C ? e.ownerDocument : e.parentNode;\n        }\n\n        return null;\n      },\n      isDefaultNamespace: function (t) {\n        return null == this.lookupPrefix(t);\n      }\n    }, o(s, L), o(s, L.prototype), U.prototype = {\n      nodeName: \"#document\",\n      nodeType: N,\n      doctype: null,\n      documentElement: null,\n      _inc: 1,\n      insertBefore: function (t, e) {\n        if (t.nodeType != v) return null == this.documentElement && t.nodeType == m && (this.documentElement = t), F(this, t, e), t.ownerDocument = this, t;\n\n        for (var n = t.firstChild; n;) {\n          var s = n.nextSibling;\n          this.insertBefore(n, e), n = s;\n        }\n\n        return t;\n      },\n      removeChild: function (t) {\n        return this.documentElement == t && (this.documentElement = null), G(this, t);\n      },\n      importNode: function (t, e) {\n        return function t(e, n, s) {\n          var r;\n\n          switch (n.nodeType) {\n            case m:\n              (r = n.cloneNode(!1)).ownerDocument = e;\n\n            case v:\n              break;\n\n            case C:\n              s = !0;\n          }\n\n          r || (r = n.cloneNode(!1));\n          r.ownerDocument = e;\n          r.parentNode = null;\n          if (s) for (var o = n.firstChild; o;) r.appendChild(t(e, o, s)), o = o.nextSibling;\n          return r;\n        }(this, t, e);\n      },\n      getElementById: function (e) {\n        var n = null;\n        return w(this.documentElement, function (t) {\n          if (t.nodeType == m && t.getAttribute(\"id\") == e) return n = t, !0;\n        }), n;\n      },\n      createElement: function (t) {\n        var e = new K();\n        return e.ownerDocument = this, e.nodeName = t, e.tagName = t, e.childNodes = new p(), (e.attributes = new g())._ownerElement = e;\n      },\n      createDocumentFragment: function () {\n        var t = new $();\n        return t.ownerDocument = this, t.childNodes = new p(), t;\n      },\n      createTextNode: function (t) {\n        var e = new H();\n        return e.ownerDocument = this, e.appendData(t), e;\n      },\n      createComment: function (t) {\n        var e = new j();\n        return e.ownerDocument = this, e.appendData(t), e;\n      },\n      createCDATASection: function (t) {\n        var e = new V();\n        return e.ownerDocument = this, e.appendData(t), e;\n      },\n      createProcessingInstruction: function (t, e) {\n        var n = new Q();\n        return n.ownerDocument = this, n.tagName = n.target = t, n.nodeValue = n.data = e, n;\n      },\n      createAttribute: function (t) {\n        var e = new B();\n        return e.ownerDocument = this, e.name = t, e.nodeName = t, e.localName = t, e.specified = !0, e;\n      },\n      createEntityReference: function (t) {\n        var e = new W();\n        return e.ownerDocument = this, e.nodeName = t, e;\n      },\n      createElementNS: function (t, e) {\n        var n = new K(),\n            s = e.split(\":\"),\n            r = n.attributes = new g();\n        return n.childNodes = new p(), n.ownerDocument = this, n.nodeName = e, n.tagName = e, n.namespaceURI = t, 2 == s.length ? (n.prefix = s[0], n.localName = s[1]) : n.localName = e, r._ownerElement = n;\n      },\n      createAttributeNS: function (t, e) {\n        var n = new B(),\n            s = e.split(\":\");\n        return n.ownerDocument = this, n.nodeName = e, n.name = e, n.namespaceURI = t, n.specified = !0, 2 == s.length ? (n.prefix = s[0], n.localName = s[1]) : n.localName = e, n;\n      }\n    }, n(U, L), U.prototype.getElementsByTagName = (K.prototype = {\n      nodeType: m,\n      hasAttribute: function (t) {\n        return null != this.getAttributeNode(t);\n      },\n      getAttribute: function (t) {\n        var e = this.getAttributeNode(t);\n        return e && e.value || \"\";\n      },\n      getAttributeNode: function (t) {\n        return this.attributes.getNamedItem(t);\n      },\n      setAttribute: function (t, e) {\n        var n = this.ownerDocument.createAttribute(t);\n        n.value = n.nodeValue = \"\" + e, this.setAttributeNode(n);\n      },\n      removeAttribute: function (t) {\n        var e = this.getAttributeNode(t);\n        e && this.removeAttributeNode(e);\n      },\n      appendChild: function (t) {\n        return t.nodeType === v ? this.insertBefore(t, null) : function (t, e) {\n          var n = e.parentNode;\n\n          if (n) {\n            var s = t.lastChild;\n            n.removeChild(e), s = t.lastChild;\n          }\n\n          return s = t.lastChild, e.parentNode = t, e.previousSibling = s, e.nextSibling = null, s ? s.nextSibling = e : t.firstChild = e, t.lastChild = e, x(t.ownerDocument, t, e), e;\n        }(this, t);\n      },\n      setAttributeNode: function (t) {\n        return this.attributes.setNamedItem(t);\n      },\n      setAttributeNodeNS: function (t) {\n        return this.attributes.setNamedItemNS(t);\n      },\n      removeAttributeNode: function (t) {\n        return this.attributes.removeNamedItem(t.nodeName);\n      },\n      removeAttributeNS: function (t, e) {\n        var n = this.getAttributeNodeNS(t, e);\n        n && this.removeAttributeNode(n);\n      },\n      hasAttributeNS: function (t, e) {\n        return null != this.getAttributeNodeNS(t, e);\n      },\n      getAttributeNS: function (t, e) {\n        var n = this.getAttributeNodeNS(t, e);\n        return n && n.value || \"\";\n      },\n      setAttributeNS: function (t, e, n) {\n        var s = this.ownerDocument.createAttributeNS(t, e);\n        s.value = s.nodeValue = \"\" + n, this.setAttributeNode(s);\n      },\n      getAttributeNodeNS: function (t, e) {\n        return this.attributes.getNamedItemNS(t, e);\n      },\n      getElementsByTagName: function (s) {\n        return new E(this, function (e) {\n          var n = [];\n          return w(e, function (t) {\n            t === e || t.nodeType != m || \"*\" !== s && t.tagName != s || n.push(t);\n          }), n;\n        });\n      },\n      getElementsByTagNameNS: function (s, r) {\n        return new E(this, function (e) {\n          var n = [];\n          return w(e, function (t) {\n            t === e || t.nodeType !== m || \"*\" !== s && t.namespaceURI !== s || \"*\" !== r && t.localName != r || n.push(t);\n          }), n;\n        });\n      }\n    }).getElementsByTagName, U.prototype.getElementsByTagNameNS = K.prototype.getElementsByTagNameNS, n(K, L), B.prototype.nodeType = C, n(B, L), k.prototype = {\n      data: \"\",\n      substringData: function (t, e) {\n        return this.data.substring(t, t + e);\n      },\n      appendData: function (t) {\n        t = this.data + t, this.nodeValue = this.data = t, this.length = t.length;\n      },\n      insertData: function (t, e) {\n        this.replaceData(t, 0, e);\n      },\n      appendChild: function (t) {\n        throw new Error(c[u]);\n      },\n      deleteData: function (t, e) {\n        this.replaceData(t, e, \"\");\n      },\n      replaceData: function (t, e, n) {\n        n = this.data.substring(0, t) + n + this.data.substring(t + e), this.nodeValue = this.data = n, this.length = n.length;\n      }\n    }, n(k, L), H.prototype = {\n      nodeName: \"#text\",\n      nodeType: T,\n      splitText: function (t) {\n        var e = this.data,\n            n = e.substring(t);\n        e = e.substring(0, t), this.data = this.nodeValue = e, this.length = e.length;\n        var s = this.ownerDocument.createTextNode(n);\n        return this.parentNode && this.parentNode.insertBefore(s, this.nextSibling), s;\n      }\n    }, n(H, k), j.prototype = {\n      nodeName: \"#comment\",\n      nodeType: y\n    }, n(j, k), V.prototype = {\n      nodeName: \"#cdata-section\",\n      nodeType: S\n    }, n(V, k), q.prototype.nodeType = R, n(q, L), X.prototype.nodeType = i, n(X, L), J.prototype.nodeType = r, n(J, L), W.prototype.nodeType = A, n(W, L), $.prototype.nodeName = \"#document-fragment\", $.prototype.nodeType = v, n($, L), Q.prototype.nodeType = I, n(Q, L), z.prototype.serializeToString = function (t, e, n) {\n      return Z.call(t, e, n);\n    }, L.prototype.toString = Z;\n\n    try {\n      if (Object.defineProperty) {\n        Object.defineProperty(E.prototype, \"length\", {\n          get: function () {\n            return f(this), this.$$length;\n          }\n        }), Object.defineProperty(L.prototype, \"textContent\", {\n          get: function () {\n            return function t(e) {\n              switch (e.nodeType) {\n                case m:\n                case v:\n                  var n = [];\n\n                  for (e = e.firstChild; e;) 7 !== e.nodeType && 8 !== e.nodeType && n.push(t(e)), e = e.nextSibling;\n\n                  return n.join(\"\");\n\n                default:\n                  return e.nodeValue;\n              }\n            }(this);\n          },\n          set: function (t) {\n            switch (this.nodeType) {\n              case m:\n              case v:\n                for (; this.firstChild;) this.removeChild(this.firstChild);\n\n                (t || String(t)) && this.appendChild(this.ownerDocument.createTextNode(t));\n                break;\n\n              default:\n                this.data = t, this.value = t, this.nodeValue = t;\n            }\n          }\n        }), nt = function (t, e, n) {\n          t[\"$$\" + e] = n;\n        };\n      }\n    } catch (t) {}\n\n    e.DOMImplementation = b, e.XMLSerializer = z;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n    var s = n(2);\n    e.init = function (t) {\n      return s.CometChat.getInstance(t);\n    }, e.CometChat = s.CometChat;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n    var s = n(22);\n\n    e.getEndPoint = function (t, o) {\n      void 0 === t && (t = \"\"), void 0 === o && (o = {});\n      var e = new s.EndpointFactory();\n      return new Promise(function (s, r) {\n        e.getEndpointData(t).then(function (t) {\n          var e = t;\n\n          if (e) {\n            for (var n in o) e.endpoint = e.endpoint.replace(\"{{\" + n + \"}}\", o[n]);\n\n            s(e);\n          } else r({\n            error: \"Unknown endPoint name.\"\n          });\n        });\n      });\n    };\n  }, function (t, h, e) {\n    \"use strict\";\n\n    h.__esModule = !0;\n    var n = e(12),\n        p = e(7),\n        E = e(0),\n        r = e(1);\n    h.$iq = n.$iq, h.$build = n.$build, h.$msg = n.$msg, h.$pres = n.$pres, h.Strophe = n.Strophe, h.NS = n.Strophe.NS, h.Status = n.Strophe.Status, window.Strophe = h.Strophe, window.$iq = h.$iq, window.$msg = h.$msg, h.Strophe.addConnectionPlugin(\"chatstates\", {\n      init: function (t) {\n        this._connection = t, h.Strophe.addNamespace(\"CHATSTATES\", \"http://jabber.org/protocol/chatstates\");\n      },\n      statusChanged: function (t) {},\n      addActive: function (t) {\n        return t.c(\"active\", {\n          xmlns: h.Strophe.NS.CHATSTATES\n        }).up();\n      },\n      _notificationReceived: function (t) {\n        var e = t.getElementsByTagName(\"composing\"),\n            n = t.getElementsByTagName(\"paused\");\n        t.getAttribute(\"from\");\n        return 0 < e.length && JSON.stringify(unescape(p.parseHTML(t.getElementsByTagName(\"body\")[0]))), n.length, !0;\n      },\n      sendActive: function (t, e, n) {\n        this._sendNotification(t, e, \"active\", n);\n      },\n      sendComposing: function (t, e, n) {\n        this._sendNotification(t, e, \"composing\", n);\n      },\n      sendPaused: function (t, e, n) {\n        this._sendNotification(t, e, \"paused\", n);\n      },\n      sendInactive: function (t, e) {\n        this._sendNotification(t, e, \"inactive\");\n      },\n      sendGone: function (t, e) {\n        this._sendNotification(t, e, \"gone\");\n      },\n      _sendNotification: function (t, e, n, s) {\n        e || (e = \"chat\"), r.isFalsy(s) ? this._connection.send(h.$msg({\n          to: t,\n          from: this._connection.jid,\n          type: e\n        }).c(n, {\n          xmlns: h.Strophe.NS.CHATSTATES\n        })) : this._connection.send(h.$msg({\n          to: t,\n          from: this._connection.jid,\n          type: e\n        }).c(\"body\", JSON.stringify(s)).up().c(n, {\n          xmlns: h.Strophe.NS.CHATSTATES\n        }));\n      }\n    }), h.Strophe.addConnectionPlugin(\"receipts\", {\n      _conn: null,\n      _msgQueue: {},\n      _retries: {},\n      _resendCount: 10,\n      _resendTime: 9e3,\n      init: function (t) {\n        this._conn = t, h.Strophe.addNamespace(\"RECEIPTS\", \"urn:xmpp:receipts\");\n      },\n      statusChanged: function (t) {\n        if (t === h.Strophe.Status.CONNECTED || t === h.Strophe.Status.ATTACHED) {\n          this._conn.addHandler(this._onRequestReceived.bind(this), h.Strophe.NS.RECEIPTS, \"message\");\n\n          var e = this;\n          setTimeout(function () {\n            e.resendQueue();\n          }, 5e3);\n        }\n      },\n      sendMessage: function (t) {\n        var e = this._conn.getUniqaueId();\n\n        t.tree().setAttribute(\"id\", e);\n        var n = h.Strophe.xmlElement(\"request\", {\n          xmlns: h.Strophe.NS.RECEIPTS\n        });\n        return t.tree().appendChild(n), this._msgQueue[e] = t, this._retries[e] = 0, this._conn.send(t), this.resendMessage(e), e;\n      },\n      resendMessage: function (t) {\n        var e = this;\n        setTimeout(function () {\n          if (e._msgQueue[t]) {\n            if (!e._conn.connected) return void e.resendMessage(t);\n            if (e._retries[t]++, e._retries[t] > e._resendCount) return;\n            e._msgQueue[t].tree().setAttribute(\"from\", e._conn.jid), e._conn.send(e._msgQueue[t]), e.resendMessage(t);\n          }\n        }, this._resendTime);\n      },\n      addReceiptHandler: function (e, t, n, s) {\n        var r = this;\n\n        this._conn.addHandler(function (t) {\n          return r._processReceipt(t), e(t);\n        }, h.Strophe.NS.RECEIPTS, \"message\", t, null, n, s);\n      },\n      _processReceipt: function (t, e) {\n        void 0 === e && (e = 0);\n        var n = t.getAttribute(E.DELIVERY_RECEIPTS.ID),\n            s = h.Strophe.getBareJidFromJid(t.getAttribute(E.MessageConstatnts.XMPP_KEYS.FROM)),\n            r = p.getUidFromJid(s),\n            o = E.MessageConstatnts.XMPP_KEYS.TYPE_USER,\n            i = E.MessageConstatnts.RECEIVER_TYPE.USER,\n            a = t.getElementsByTagName(\"request\"),\n            c = t.getElementsByTagName(\"received\");\n\n        if (t.getAttribute(E.MessageConstatnts.XMPP_KEYS.TYPE) == E.MessageConstatnts.XMPP_KEYS.TYPE_GROUP && (i = E.MessageConstatnts.RECEIVER_TYPE.GROUP, s = p.getFullJidForGroup(t.getAttribute(E.MessageConstatnts.XMPP_KEYS.FROM)), o = E.MessageConstatnts.XMPP_KEYS.TYPE_USER), 0 < a.length) {\n          var u = h.$msg({\n            to: s,\n            type: o,\n            from: this._conn.jid,\n            id: this._conn.getUniqueId()\n          }),\n              l = h.Strophe.xmlElement(\"delivered\", {\n            type: i,\n            receiverId: r,\n            xmlns: h.Strophe.NS.RECEIPTS,\n            id: n\n          });\n          u.tree().appendChild(l), this._conn.send(u);\n        }\n\n        if (0 < c.length) {\n          var d = c[0].getAttribute(E.DELIVERY_RECEIPTS.ID);\n          d && (delete this._msgQueue[d], delete this._retries[d]);\n        }\n      },\n      resendQueue: function () {\n        if (this._conn.connected) for (var t in this._msgQueue) this._msgQueue.hasOwnProperty(t) && this._conn.send(this._msgQueue[t]);else {\n          var e = this;\n          setTimeout(function () {\n            e.resendQueue();\n          }, 5e3);\n        }\n      },\n      getUnreceivedMsgs: function () {\n        var t = [];\n\n        for (var e in this._msgQueue) this._msgQueue.hasOwnProperty(e) && t.push(this._msgQueue[e]);\n\n        return t;\n      },\n      clearMessages: function () {\n        this._msgQueue = {};\n      }\n    });\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = function () {\n      function t() {\n        this.RECEIPT_TYPE = {\n          READ_RECEIPT: \"read\",\n          DELIVERY_RECEIPT: \"delivery\"\n        }, this.receiptType = this.RECEIPT_TYPE.DELIVERY_RECEIPT;\n      }\n\n      return t.prototype.getReceiverType = function () {\n        return this.receiverType;\n      }, t.prototype.setReceiverType = function (t) {\n        this.receiverType = t;\n      }, t.prototype.getSender = function () {\n        return this.sender;\n      }, t.prototype.setSender = function (t) {\n        this.sender = t;\n      }, t.prototype.getReceiver = function () {\n        return this.receiver;\n      }, t.prototype.setReceiver = function (t) {\n        this.receiver = t;\n      }, t.prototype.getTimestamp = function () {\n        return this.timestamp;\n      }, t.prototype.setTimestamp = function (t) {\n        this.timestamp = t;\n      }, t.prototype.setReadAt = function (t) {\n        this.readAt = t;\n      }, t.prototype.getReceivedAt = function () {\n        return this.readAt;\n      }, t.prototype.setDeliveredAt = function (t) {\n        this.deliveredAt = t;\n      }, t.prototype.getDeliveredAt = function () {\n        return this.deliveredAt;\n      }, t.prototype.getMessageId = function () {\n        return this.messageId;\n      }, t.prototype.setMessageId = function (t) {\n        this.messageId = t;\n      }, t.prototype.getReceiptType = function () {\n        return this.receiptType;\n      }, t.prototype.setReceiptType = function (t) {\n        void 0 === t && (t = this.RECEIPT_TYPE.DELIVERY_RECEIPT), this.receiptType = t;\n      }, t;\n    }();\n\n    e.MessageReceipt = s;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = n(0),\n        r = function () {\n      function e(t) {\n        t.hasOwnProperty(s.ATTACHMENTS_CONSTANTS.KEYS.EXTENSION) && (this.fileEextension = t[s.ATTACHMENTS_CONSTANTS.KEYS.EXTENSION]), t.hasOwnProperty(s.ATTACHMENTS_CONSTANTS.KEYS.MIME_TYPE) && (this.fileMimeType = t[s.ATTACHMENTS_CONSTANTS.KEYS.MIME_TYPE]), t.hasOwnProperty(s.ATTACHMENTS_CONSTANTS.KEYS.NAME) && (this.fileName = t[s.ATTACHMENTS_CONSTANTS.KEYS.NAME]), t.hasOwnProperty(s.ATTACHMENTS_CONSTANTS.KEYS.SIZE) && (this.fileSize = t[s.ATTACHMENTS_CONSTANTS.KEYS.SIZE]), t.hasOwnProperty(s.ATTACHMENTS_CONSTANTS.KEYS.URL) && (this.fileUrl = t[s.ATTACHMENTS_CONSTANTS.KEYS.URL]);\n      }\n\n      return e.prototype.createFileFromJSON = function (t) {\n        return new e(t);\n      }, e.prototype.toJSON = function (t) {\n        return JSON.stringify(t);\n      }, e.prototype.getFileExtension = function () {\n        return this.fileEextension;\n      }, e.prototype.setFileExtension = function (t) {\n        this.fileEextension = t;\n      }, e.prototype.getFileMimeType = function () {\n        return this.fileMimeType;\n      }, e.prototype.setFileMimeType = function (t) {\n        this.fileMimeType = t;\n      }, e.prototype.getFileName = function () {\n        return this.fileName;\n      }, e.prototype.setFileName = function (t) {\n        this.fileName = t;\n      }, e.prototype.getFileSize = function () {\n        return this.fileSize;\n      }, e.prototype.setFileSize = function (t) {\n        this.fileSize = t;\n      }, e.prototype.getFileUrl = function () {\n        return this.fileUrl;\n      }, e.prototype.setFileUrl = function (t) {\n        this.fileUrl = t;\n      }, e;\n    }();\n\n    e.Attachment = r;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var r = n(1),\n        o = n(7),\n        s = function () {\n      function t(t, e, n, s) {\n        r.isFalsy(t) || (this.jid = t, this.uid = o.getUidFromJid(t), r.isFalsy(s) || (this.priority = s), r.isFalsy(e) || (this.status = e), r.isFalsy(n) || (this.lastActiveAt = n));\n      }\n\n      return t.prototype.getUid = function () {\n        return this.uid;\n      }, t.prototype.setUid = function (t) {\n        this.uid = t;\n      }, t.prototype.getJid = function () {\n        return this.jid;\n      }, t.prototype.setJid = function (t) {\n        this.jid = t;\n      }, t.prototype.getPriority = function () {\n        return this.priority;\n      }, t.prototype.setPriority = function (t) {\n        this.priority = t;\n      }, t.prototype.getStatus = function () {\n        return this.status;\n      }, t.prototype.setStatus = function (t) {\n        this.status = t;\n      }, t.prototype.getLastActiveAt = function () {\n        return this.lastActiveAt;\n      }, t.prototype.setLastActiveAt = function (t) {\n        this.lastActiveAt = t;\n      }, t.prototype.getStatusMessage = function () {\n        return this.statusMessage;\n      }, t.prototype.setStatusMessage = function (t) {\n        this.statusMessage = t;\n      }, t;\n    }();\n\n    e.UserPresence = s;\n  }, function (t, e, n) {\n    !function (h) {\n      \"use strict\";\n\n      var n,\n          u,\n          a = {}.hasOwnProperty,\n          r = function (t, e) {\n        return function () {\n          return t.apply(e, arguments);\n        };\n      };\n\n      h.Strophe.addConnectionPlugin(\"muc\", {\n        _connection: null,\n        rooms: {},\n        roomNames: [],\n        init: function (t) {\n          return this._connection = t, this._muc_handler = null, h.Strophe.addNamespace(\"MUC_OWNER\", h.Strophe.NS.MUC + \"#owner\"), h.Strophe.addNamespace(\"MUC_ADMIN\", h.Strophe.NS.MUC + \"#admin\"), h.Strophe.addNamespace(\"MUC_USER\", h.Strophe.NS.MUC + \"#user\"), h.Strophe.addNamespace(\"MUC_ROOMCONF\", h.Strophe.NS.MUC + \"#roomconfig\"), h.Strophe.addNamespace(\"MUC_REGISTER\", \"jabber:iq:register\");\n        },\n        join: function (l, t, e, n, s, r, o, i) {\n          var a, c, d;\n          return c = this.test_append_nick(l, t), a = h.$pres({\n            from: this._connection.jid,\n            to: c\n          }).c(\"x\", {\n            xmlns: h.Strophe.NS.MUC\n          }), null != o && (a = a.c(\"history\", o).up()), null != r && a.cnode(h.Strophe.xmlElement(\"password\", [], r)), null != i && a.up().cnode(i), null == this._muc_handler && (this._muc_handler = this._connection.addHandler((d = this, function (t) {\n            var e, n, s, r, o, i, a, c, u;\n            if (!(e = t.getAttribute(\"from\"))) return !0;\n            if (i = e.split(\"/\")[0], !d.rooms[i]) return !0;\n            if (l = d.rooms[i], n = {}, \"message\" === t.nodeName) n = l._message_handlers;else if (\"presence\" === t.nodeName && 0 < (u = t.getElementsByTagName(\"x\")).length) for (s = 0, o = u.length; s < o; s++) if (a = u[s], (c = a.getAttribute(\"xmlns\")) && c.match(h.Strophe.NS.MUC)) {\n              n = l._presence_handlers;\n              break;\n            }\n\n            for (r in n) (0, n[r])(t, l) || delete n[r];\n\n            return !0;\n          }))), this.rooms.hasOwnProperty(l) || (this.rooms[l] = new u(this, l, t, r), n && this.rooms[l].addHandler(\"presence\", n), e && this.rooms[l].addHandler(\"message\", e), s && this.rooms[l].addHandler(\"roster\", s), this.roomNames.push(l)), this._connection.send(a);\n        },\n        leave: function (t, e, n, s) {\n          var r, o, i, a;\n          return r = this.roomNames.indexOf(t), delete this.rooms[t], 0 <= r && (this.roomNames.splice(r, 1), 0 === this.roomNames.length && (this._connection.deleteHandler(this._muc_handler), this._muc_handler = null)), a = this.test_append_nick(t, e), i = this._connection.getUniqueId(), o = h.$pres({\n            type: \"unavailable\",\n            id: i,\n            from: this._connection.jid,\n            to: a\n          }), null != s && o.c(\"status\", s), null != n && this._connection.addHandler(n, null, \"presence\", null, i), this._connection.send(o), i;\n        },\n        message: function (t, e, n, s, r, o) {\n          var i, a, c;\n          return c = this.test_append_nick(t, e), r = r || (null != e ? \"chat\" : \"groupchat\"), o = o || this._connection.getUniqueId(), (i = h.$msg({\n            to: c,\n            from: this._connection.jid,\n            type: r,\n            id: o\n          }).c(\"body\").t(n)).up(), null != s && (i.c(\"html\", {\n            xmlns: h.Strophe.NS.XHTML_IM\n          }).c(\"body\", {\n            xmlns: h.Strophe.NS.XHTML\n          }).h(s), 0 === i.node.childNodes.length ? (a = i.node.parentNode, i.up().up(), i.node.removeChild(a)) : i.up().up()), i.c(\"x\", {\n            xmlns: \"jabber:x:event\"\n          }).c(\"composing\"), this._connection.send(i), o;\n        },\n        groupchat: function (t, e, n, s) {\n          return this.message(t, null, e, n, void 0, s);\n        },\n        invite: function (t, e, n) {\n          var s, r;\n          return r = this._connection.getUniqueId(), s = h.$msg({\n            from: this._connection.jid,\n            to: t,\n            id: r\n          }).c(\"x\", {\n            xmlns: h.Strophe.NS.MUC_USER\n          }).c(\"invite\", {\n            to: e\n          }), null != n && s.c(\"reason\", n), this._connection.send(s), r;\n        },\n        multipleInvites: function (t, e, n) {\n          var s, r, o, i, a;\n\n          for (i = this._connection.getUniqueId(), r = h.$msg({\n            from: this._connection.jid,\n            to: t,\n            id: i\n          }).c(\"x\", {\n            xmlns: h.Strophe.NS.MUC_USER\n          }), s = 0, o = e.length; s < o; s++) a = e[s], r.c(\"invite\", {\n            to: a\n          }), null != n && (r.c(\"reason\", n), r.up()), r.up();\n\n          return this._connection.send(r), i;\n        },\n        directInvite: function (t, e, n, s) {\n          var r, o, i;\n          return i = this._connection.getUniqueId(), r = {\n            xmlns: \"jabber:x:conference\",\n            jid: t\n          }, null != n && (r.reason = n), null != s && (r.password = s), o = h.$msg({\n            from: this._connection.jid,\n            to: e,\n            id: i\n          }).c(\"x\", r), this._connection.send(o), i;\n        },\n        queryOccupants: function (t, e, n) {\n          var s, r;\n          return s = {\n            xmlns: h.Strophe.NS.DISCO_ITEMS\n          }, r = h.$iq({\n            from: this._connection.jid,\n            to: t,\n            type: \"get\"\n          }).c(\"query\", s), this._connection.sendIQ(r, e, n);\n        },\n        configure: function (t, e, n) {\n          var s, r;\n          return s = h.$iq({\n            to: t,\n            type: \"get\"\n          }).c(\"query\", {\n            xmlns: h.Strophe.NS.MUC_OWNER\n          }), r = s.tree(), this._connection.sendIQ(r, e, n);\n        },\n        cancelConfigure: function (t) {\n          var e, n;\n          return e = h.$iq({\n            to: t,\n            type: \"set\"\n          }).c(\"query\", {\n            xmlns: h.Strophe.NS.MUC_OWNER\n          }).c(\"x\", {\n            xmlns: \"jabber:x:data\",\n            type: \"cancel\"\n          }), n = e.tree(), this._connection.sendIQ(n);\n        },\n        saveConfiguration: function (t, e, n, s) {\n          var r, o, i, a, c;\n          if (i = h.$iq({\n            to: t,\n            type: \"set\"\n          }).c(\"query\", {\n            xmlns: h.Strophe.NS.MUC_OWNER\n          }), void 0 !== h.Strophe.x && void 0 !== h.Strophe.x.Form && e instanceof h.Strophe.x.Form) e.type = \"submit\", i.cnode(e.toXML());else for (i.c(\"x\", {\n            xmlns: \"jabber:x:data\",\n            type: \"submit\"\n          }), o = 0, a = e.length; o < a; o++) r = e[o], i.cnode(r).up();\n          return c = i.tree(), this._connection.sendIQ(c, n, s);\n        },\n        createInstantRoom: function (t, e, n) {\n          var s;\n          return s = h.$iq({\n            to: t,\n            type: \"set\"\n          }).c(\"query\", {\n            xmlns: h.Strophe.NS.MUC_OWNER\n          }).c(\"x\", {\n            xmlns: \"jabber:x:data\",\n            type: \"submit\"\n          }), this._connection.sendIQ(s.tree(), e, n);\n        },\n        createConfiguredRoom: function (t, e, n, s) {\n          var r, o, i;\n\n          for (r in (o = h.$iq({\n            to: t,\n            type: \"set\"\n          }).c(\"query\", {\n            xmlns: h.Strophe.NS.MUC_OWNER\n          }).c(\"x\", {\n            xmlns: \"jabber:x:data\",\n            type: \"submit\"\n          })).c(\"field\", {\n            var: \"FORM_TYPE\"\n          }).c(\"value\").t(\"http://jabber.org/protocol/muc#roomconfig\").up().up(), e) a.call(e, r) && (i = e[r], o.c(\"field\", {\n            var: r\n          }).c(\"value\").t(i).up().up());\n\n          return this._connection.sendIQ(o.tree(), n, s);\n        },\n        setTopic: function (t, e) {\n          var n;\n          return n = h.$msg({\n            to: t,\n            from: this._connection.jid,\n            type: \"groupchat\"\n          }).c(\"subject\", {\n            xmlns: \"jabber:client\"\n          }).t(e), this._connection.send(n.tree());\n        },\n        _modifyPrivilege: function (t, e, n, s, r) {\n          var o;\n          return o = h.$iq({\n            to: t,\n            type: \"set\"\n          }).c(\"query\", {\n            xmlns: h.Strophe.NS.MUC_ADMIN\n          }).cnode(e.node), null != n && o.c(\"reason\", n), this._connection.sendIQ(o.tree(), s, r);\n        },\n        modifyRole: function (t, e, n, s, r, o) {\n          var i;\n          return i = h.$build(\"item\", {\n            nick: e,\n            role: n\n          }), this._modifyPrivilege(t, i, s, r, o);\n        },\n        kick: function (t, e, n, s, r) {\n          return this.modifyRole(t, e, \"none\", n, s, r);\n        },\n        voice: function (t, e, n, s, r) {\n          return this.modifyRole(t, e, \"participant\", n, s, r);\n        },\n        mute: function (t, e, n, s, r) {\n          return this.modifyRole(t, e, \"visitor\", n, s, r);\n        },\n        op: function (t, e, n, s, r) {\n          return this.modifyRole(t, e, \"moderator\", n, s, r);\n        },\n        deop: function (t, e, n, s, r) {\n          return this.modifyRole(t, e, \"participant\", n, s, r);\n        },\n        modifyAffiliation: function (t, e, n, s, r, o) {\n          var i;\n          return i = h.$build(\"item\", {\n            jid: e,\n            affiliation: n\n          }), this._modifyPrivilege(t, i, s, r, o);\n        },\n        ban: function (t, e, n, s, r) {\n          return this.modifyAffiliation(t, e, \"outcast\", n, s, r);\n        },\n        member: function (t, e, n, s, r) {\n          return this.modifyAffiliation(t, e, \"member\", n, s, r);\n        },\n        revoke: function (t, e, n, s, r) {\n          return this.modifyAffiliation(t, e, \"none\", n, s, r);\n        },\n        owner: function (t, e, n, s, r) {\n          return this.modifyAffiliation(t, e, \"owner\", n, s, r);\n        },\n        admin: function (t, e, n, s, r) {\n          return this.modifyAffiliation(t, e, \"admin\", n, s, r);\n        },\n        changeNick: function (t, e) {\n          var n, s;\n          return s = this.test_append_nick(t, e), n = h.$pres({\n            from: this._connection.jid,\n            to: s,\n            id: this._connection.getUniqueId()\n          }), this._connection.send(n.tree());\n        },\n        setStatus: function (t, e, n, s) {\n          var r, o;\n          return o = this.test_append_nick(t, e), r = h.$pres({\n            from: this._connection.jid,\n            to: o\n          }), null != n && r.c(\"show\", n).up(), null != s && r.c(\"status\", s), this._connection.send(r.tree());\n        },\n        registrationRequest: function (t, a, e) {\n          var n;\n          return n = h.$iq({\n            to: t,\n            from: this._connection.jid,\n            type: \"get\"\n          }).c(\"query\", {\n            xmlns: h.Strophe.NS.MUC_REGISTER\n          }), this._connection.sendIQ(n, function (t) {\n            var e, n, s, r, o, i;\n\n            for ((n = t.getElementsByTagName(\"field\")).length, r = {\n              required: [],\n              optional: []\n            }, o = 0, i = n.length; o < i; o++) e = n[o], s = {\n              var: e.getAttribute(\"var\"),\n              label: e.getAttribute(\"label\"),\n              type: e.getAttribute(\"type\")\n            }, 0 < e.getElementsByTagName(\"required\").length ? r.required.push(s) : r.optional.push(s);\n\n            return a(r);\n          }, e);\n        },\n        submitRegistrationForm: function (t, e, n, s) {\n          var r, o, i;\n\n          for (o in (r = h.$iq({\n            to: t,\n            type: \"set\"\n          }).c(\"query\", {\n            xmlns: h.Strophe.NS.MUC_REGISTER\n          })).c(\"x\", {\n            xmlns: \"jabber:x:data\",\n            type: \"submit\"\n          }), r.c(\"field\", {\n            var: \"FORM_TYPE\"\n          }).c(\"value\").t(\"http://jabber.org/protocol/muc#register\").up().up(), e) i = e[o], r.c(\"field\", {\n            var: o\n          }).c(\"value\").t(i).up().up();\n\n          return this._connection.sendIQ(r, n, s);\n        },\n        listRooms: function (t, e, n) {\n          var s;\n          return s = h.$iq({\n            to: t,\n            from: this._connection.jid,\n            type: \"get\"\n          }).c(\"query\", {\n            xmlns: h.Strophe.NS.DISCO_ITEMS\n          }), this._connection.sendIQ(s, e, n);\n        },\n        test_append_nick: function (t, e) {\n          var n, s;\n          return s = h.Strophe.escapeNode(h.Strophe.getNodeFromJid(t)), n = h.Strophe.getDomainFromJid(t), s + \"@\" + n + (null != e ? \"/\" + e : \"\");\n        }\n      }), u = function () {\n        function i(t, e, n, s) {\n          this.client = t, this.name = e, this.nick = n, this.password = s, this._roomRosterHandler = r(this._roomRosterHandler, this), this._addOccupant = r(this._addOccupant, this), this.roster = {}, this._message_handlers = {}, this._presence_handlers = {}, this._roster_handlers = {}, this._handler_ids = 0, this.client.muc && (this.client = this.client.muc), this.name = h.Strophe.getBareJidFromJid(this.name), this.addHandler(\"presence\", this._roomRosterHandler);\n        }\n\n        return i.prototype.join = function (t, e, n) {\n          return this.client.join(this.name, this.nick, t, e, n, this.password);\n        }, i.prototype.leave = function (t, e) {\n          return this.client.leave(this.name, this.nick, t, e), delete this.client.rooms[this.name];\n        }, i.prototype.message = function (t, e, n, s) {\n          return this.client.message(this.name, t, e, n, s);\n        }, i.prototype.groupchat = function (t, e) {\n          return this.client.groupchat(this.name, t, e);\n        }, i.prototype.invite = function (t, e) {\n          return this.client.invite(this.name, t, e);\n        }, i.prototype.multipleInvites = function (t, e) {\n          return this.client.invite(this.name, t, e);\n        }, i.prototype.directInvite = function (t, e) {\n          return this.client.directInvite(this.name, t, e, this.password);\n        }, i.prototype.configure = function (t) {\n          return this.client.configure(this.name, t);\n        }, i.prototype.cancelConfigure = function () {\n          return this.client.cancelConfigure(this.name);\n        }, i.prototype.saveConfiguration = function (t) {\n          return this.client.saveConfiguration(this.name, t);\n        }, i.prototype.queryOccupants = function (t, e) {\n          return this.client.queryOccupants(this.name, t, e);\n        }, i.prototype.setTopic = function (t) {\n          return this.client.setTopic(this.name, t);\n        }, i.prototype.modifyRole = function (t, e, n, s, r) {\n          return this.client.modifyRole(this.name, t, e, n, s, r);\n        }, i.prototype.kick = function (t, e, n, s) {\n          return this.client.kick(this.name, t, e, n, s);\n        }, i.prototype.voice = function (t, e, n, s) {\n          return this.client.voice(this.name, t, e, n, s);\n        }, i.prototype.mute = function (t, e, n, s) {\n          return this.client.mute(this.name, t, e, n, s);\n        }, i.prototype.op = function (t, e, n, s) {\n          return this.client.op(this.name, t, e, n, s);\n        }, i.prototype.deop = function (t, e, n, s) {\n          return this.client.deop(this.name, t, e, n, s);\n        }, i.prototype.modifyAffiliation = function (t, e, n, s, r) {\n          return this.client.modifyAffiliation(this.name, t, e, n, s, r);\n        }, i.prototype.ban = function (t, e, n, s) {\n          return this.client.ban(this.name, t, e, n, s);\n        }, i.prototype.member = function (t, e, n, s) {\n          return this.client.member(this.name, t, e, n, s);\n        }, i.prototype.revoke = function (t, e, n, s) {\n          return this.client.revoke(this.name, t, e, n, s);\n        }, i.prototype.owner = function (t, e, n, s) {\n          return this.client.owner(this.name, t, e, n, s);\n        }, i.prototype.admin = function (t, e, n, s) {\n          return this.client.admin(this.name, t, e, n, s);\n        }, i.prototype.changeNick = function (t) {\n          return this.nick = t, this.client.changeNick(this.name, nick);\n        }, i.prototype.setStatus = function (t, e) {\n          return this.client.setStatus(this.name, this.nick, t, e);\n        }, i.prototype.addHandler = function (t, e) {\n          var n;\n\n          switch (n = this._handler_ids++, t) {\n            case \"presence\":\n              this._presence_handlers[n] = e;\n              break;\n\n            case \"message\":\n              this._message_handlers[n] = e;\n              break;\n\n            case \"roster\":\n              this._roster_handlers[n] = e;\n              break;\n\n            default:\n              return this._handler_ids--, null;\n          }\n\n          return n;\n        }, i.prototype.removeHandler = function (t) {\n          return delete this._presence_handlers[t], delete this._message_handlers[t], delete this._roster_handlers[t];\n        }, i.prototype._addOccupant = function (t) {\n          var e;\n          return e = new n(t, this), this.roster[e.nick] = e;\n        }, i.prototype._roomRosterHandler = function (t) {\n          var e, n, s, r, o;\n\n          switch (e = i._parsePresence(t), r = e.nick, s = e.newnick || null, e.type) {\n            case \"error\":\n              return !0;\n\n            case \"unavailable\":\n              s && (e.nick = s, this.roster[r] && this.roster[s] && (this.roster[r].update(this.roster[s]), this.roster[s] = this.roster[r]), this.roster[r] && !this.roster[s] && (this.roster[s] = this.roster[r].update(e))), delete this.roster[r];\n              break;\n\n            default:\n              this.roster[r] ? this.roster[r].update(e) : this._addOccupant(e);\n          }\n\n          for (n in o = this._roster_handlers) (0, o[n])(this.roster, this) || delete this._roster_handlers[n];\n\n          return !0;\n        }, i._parsePresence = function (t) {\n          var e, n, s, r, o, i, a, c, u, l;\n\n          for ((s = {}).nick = h.Strophe.getResourceFromJid(t.getAttribute(\"from\")), s.type = t.getAttribute(\"type\"), s.states = [], c = t.childNodes, r = 0, i = c.length; r < i; r++) switch ((e = c[r]).nodeName) {\n            case \"error\":\n              s.errorcode = e.getAttribute(\"code\"), s.error = null != (u = e.childNodes[0]) ? u.nodeName : void 0;\n              break;\n\n            case \"status\":\n              s.status = e.textContent || null;\n              break;\n\n            case \"show\":\n              s.show = e.textContent || null;\n              break;\n\n            case \"x\":\n              if (e.getAttribute(\"xmlns\") === h.Strophe.NS.MUC_USER) for (l = e.childNodes, o = 0, a = l.length; o < a; o++) switch ((n = l[o]).nodeName) {\n                case \"item\":\n                  s.affiliation = n.getAttribute(\"affiliation\"), s.role = n.getAttribute(\"role\"), s.jid = n.getAttribute(\"jid\"), s.newnick = n.getAttribute(\"nick\");\n                  break;\n\n                case \"status\":\n                  n.getAttribute(\"code\") && s.states.push(n.getAttribute(\"code\"));\n              }\n          }\n\n          return s;\n        }, i;\n      }(), function () {\n        function t(t) {\n          this.parse = r(this.parse, this), null != t && this.parse(t);\n        }\n\n        t.prototype.parse = function (t) {\n          var e, n, s, r, o, i, a, c, u, l, d, h, p;\n\n          for (h = t.getElementsByTagName(\"query\")[0].childNodes, this.identities = [], this.features = [], this.x = [], o = 0, u = h.length; o < u; o++) switch (s = h[o], n = s.attributes, s.nodeName) {\n            case \"identity\":\n              for (i = {}, a = 0, l = n.length; a < l; a++) e = n[a], i[e.name] = e.textContent;\n\n              this.identities.push(i);\n              break;\n\n            case \"feature\":\n              this.features.push(s.getAttribute(\"var\"));\n              break;\n\n            case \"x\":\n              if (\"FORM_TYPE\" === !s.childNodes[0].getAttribute(\"var\") || \"hidden\" === !s.childNodes[0].getAttribute(\"type\")) break;\n\n              for (p = s.childNodes, c = 0, d = p.length; c < d; c++) (r = p[c]).attributes.type || this.x.push({\n                var: r.getAttribute(\"var\"),\n                label: r.getAttribute(\"label\") || \"\",\n                value: r.firstChild.textContent || \"\"\n              });\n\n          }\n\n          return {\n            identities: this.identities,\n            features: this.features,\n            x: this.x\n          };\n        };\n      }(), n = function () {\n        function t(t, e) {\n          this.room = e, this.update = r(this.update, this), this.admin = r(this.admin, this), this.owner = r(this.owner, this), this.revoke = r(this.revoke, this), this.member = r(this.member, this), this.ban = r(this.ban, this), this.modifyAffiliation = r(this.modifyAffiliation, this), this.deop = r(this.deop, this), this.op = r(this.op, this), this.mute = r(this.mute, this), this.voice = r(this.voice, this), this.kick = r(this.kick, this), this.modifyRole = r(this.modifyRole, this), this.update(t);\n        }\n\n        return t.prototype.modifyRole = function (t, e, n, s) {\n          return this.room.modifyRole(this.nick, t, e, n, s);\n        }, t.prototype.kick = function (t, e, n) {\n          return this.room.kick(this.nick, t, e, n);\n        }, t.prototype.voice = function (t, e, n) {\n          return this.room.voice(this.nick, t, e, n);\n        }, t.prototype.mute = function (t, e, n) {\n          return this.room.mute(this.nick, t, e, n);\n        }, t.prototype.op = function (t, e, n) {\n          return this.room.op(this.nick, t, e, n);\n        }, t.prototype.deop = function (t, e, n) {\n          return this.room.deop(this.nick, t, e, n);\n        }, t.prototype.modifyAffiliation = function (t, e, n, s) {\n          return this.room.modifyAffiliation(this.jid, t, e, n, s);\n        }, t.prototype.ban = function (t, e, n) {\n          return this.room.ban(this.jid, t, e, n);\n        }, t.prototype.member = function (t, e, n) {\n          return this.room.member(this.jid, t, e, n);\n        }, t.prototype.revoke = function (t, e, n) {\n          return this.room.revoke(this.jid, t, e, n);\n        }, t.prototype.owner = function (t, e, n) {\n          return this.room.owner(this.jid, t, e, n);\n        }, t.prototype.admin = function (t, e, n) {\n          return this.room.admin(this.jid, t, e, n);\n        }, t.prototype.update = function (t) {\n          return this.nick = t.nick || null, this.affiliation = t.affiliation || null, this.role = t.role || null, this.jid = t.jid || null, this.status = t.status || null, this.show = t.show || null, this;\n        }, t;\n      }();\n    }(n(12));\n  }, function (t, e, n) {\n    var s, r;\n    s = [n(12)], void 0 === (r = function (t) {\n      var r, o, i;\n      return r = t.Strophe, t.$build, o = t.$iq, t.$msg, t.$pres, i = function (t, e, n) {\n        var s = o(e ? {\n          type: t,\n          to: e\n        } : {\n          type: t\n        });\n        return s.c(\"vCard\", {\n          xmlns: r.NS.VCARD\n        }), n && s.cnode(n), s;\n      }, r.addConnectionPlugin(\"vcard\", {\n        _connection: null,\n        init: function (t) {\n          return this._connection = t, r.addNamespace(\"VCARD\", \"vcard-temp\");\n        },\n        get: function (t, e, n) {\n          var s = i(\"get\", e);\n          return this._connection.sendIQ(s, t, n);\n        },\n        set: function (t, e, n, s) {\n          var r = i(\"set\", n, e);\n          return this._connection.sendIQ(r, t, s);\n        }\n      }), t;\n    }.apply(e, s)) || (t.exports = r);\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = n(5),\n        r = n(0),\n        o = n(7),\n        i = function () {\n      function t() {}\n\n      return t.transformVCard = function (t) {\n        var e = {};\n        return e[r.UserConstants.NAME] = unescape(o.parseHTML(t.getElementsByTagName(r.UserConstants.NAME)[0])), e[r.UserConstants.UID] = unescape(o.parseHTML(t.getElementsByTagName(r.UserConstants.UID)[0])), e[r.UserConstants.AVATAR] = unescape(o.parseHTML(t.getElementsByTagName(r.UserConstants.AVATAR)[0])), e[r.UserConstants.LINK] = unescape(o.parseHTML(t.getElementsByTagName(r.UserConstants.LINK)[0])), e[r.UserConstants.STATUS] = unescape(o.parseHTML(t.getElementsByTagName(r.UserConstants.STATUS)[0])), e[r.UserConstants.LAST_ACTIVE_AT] = unescape(o.parseHTML(t.getElementsByTagName(r.UserConstants.LAST_ACTIVE_AT)[0])), e[r.UserConstants.ROLE] = unescape(o.parseHTML(t.getElementsByTagName(r.UserConstants.ROLE)[0])), e[r.UserConstants.USER_NAME] = unescape(o.parseHTML(t.getElementsByTagName(r.UserConstants.USER_NAME)[0])), new s.User(e);\n      }, t;\n    }();\n\n    e.VCardController = i;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var r = n(4),\n        s = n(1),\n        o = n(3),\n        i = n(31),\n        a = function () {\n      function e(t) {\n        this.limit = e.DEFAULT_LIMIT, this.cursor = -1, this.total = -1, this.next_page = 1, this.last_page = -1, this.current_page = 1, this.total_pages = -1, this.hasJoined = 0, this.pagination = {\n          total: 0,\n          count: 0,\n          per_page: 0,\n          current_page: 0,\n          total_pages: 0,\n          links: []\n        }, s.isFalsy(t) || (s.isFalsy(t.limit) && (t.limit = e.DEFAULT_LIMIT), t.limit > e.MAX_LIMIT && (t.limit = e.MAX_LIMIT), this.limit = t.limit, s.isFalsy(t.searchKeyword) || (this.searchKeyword = t.searchKeyword), s.isFalsy(t.hasJoined) || (this.hasJoined = 1));\n      }\n\n      return e.prototype.fetchPrevious = function () {\n        var s = this;\n        return new Promise(function (e, t) {\n          if (0 != s.next_page) return r.makeApiCall(\"groups\", {}, s.getPreData()).then(function (t) {\n            if (t.meta && (s.total_pages = t.meta.pagination.total_pages), 0 < t.data.length) {\n              s.pagination = t.meta.pagination;\n              var n = [];\n              t.data.map(function (t, e) {\n                n.push(i.GroupsController.trasformJSONGroup(t));\n              }), e(n);\n            }\n\n            e([]);\n          });\n          e([]);\n        });\n      }, e.prototype.fetchNext = function () {\n        var s = this;\n        return new Promise(function (e, n) {\n          r.makeApiCall(\"getGroups\", {}, s.getNextData()).then(function (t) {\n            if (t.meta && (s.total_pages = t.meta.pagination.total_pages), 0 < t.data.length) {\n              s.pagination = t.meta.pagination;\n              var n = [];\n              t.data.map(function (t, e) {\n                n.push(i.GroupsController.trasformJSONGroup(t));\n              }), e(n);\n            }\n\n            e([]);\n          }, function (t) {\n            n(new o.CometChatException(t.error));\n          });\n        });\n      }, e.prototype.getNextData = function () {\n        var t = {};\n        if (t.per_page = this.limit, s.isFalsy(this.searchKeyword) || (t.searchKey = this.searchKeyword), s.isFalsy(this.hasJoined) || (t.hasJoined = 1), 1 == this.current_page) t.page = this.next_page, this.next_page++, this.current_page++;else {\n          if (this.next_page > this.total_pages) return t.page = this.next_page, t;\n          t.page = this.next_page++;\n        }\n        return t;\n      }, e.prototype.getPreData = function () {\n        var t = {};\n        return t.per_page = this.limit, 0 <= this.next_page && 0 < this.next_page && (t.page = --this.next_page), t;\n      }, e.MAX_LIMIT = 100, e.DEFAULT_LIMIT = 30, e;\n    }();\n\n    e.GroupsRequest = a;\n\n    var c = function () {\n      function t() {}\n\n      return t.prototype.setLimit = function (t) {\n        return this.limit = t, this;\n      }, t.prototype.setSearchKeyWord = function (t) {\n        return this.searchKeyword = t, this;\n      }, t.prototype.joinedOnly = function (t) {\n        return this.hasJoined = t, this;\n      }, t.prototype.build = function () {\n        return new a(this);\n      }, t;\n    }();\n\n    e.GroupsRequestBuilder = c;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var s,\n        r = this && this.__extends || (s = function (t, e) {\n      return (s = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (t, e) {\n        t.__proto__ = e;\n      } || function (t, e) {\n        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);\n      })(t, e);\n    }, function (t, e) {\n      function n() {\n        this.constructor = t;\n      }\n\n      s(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n    });\n    e.__esModule = !0;\n\n    var o = n(4),\n        i = n(1),\n        a = n(6),\n        c = n(3),\n        u = n(47),\n        l = function () {\n      function e(t) {\n        this.limit = e.DEFAULT_LIMIT, this.cursor = -1, this.total = -1, this.next_page = 1, this.last_page = -1, this.current_page = 1, this.total_pages = -1, this.isOutCastReq = !1, this.pagination = {\n          total: 0,\n          count: 0,\n          per_page: 0,\n          current_page: 0,\n          total_pages: 0,\n          links: []\n        }, this.store = a.LocalStorage.getInstance(), i.isFalsy(t) || (this.limit = t.limit, this.guid = t.guid, i.isFalsy(t.searchKeyword) || (this.searchKeyword = t.searchKeyword), t instanceof h && (this.isOutCastReq = t.isOutCastReq));\n      }\n\n      return e.prototype.fetchPrevious = function () {\n        var s = this;\n        return new Promise(function (n, e) {\n          if (0 != s.next_page) return o.makeApiCall(s.isOutCastReq ? \"getBannedGroupMembers\" : \"getGroupMembers\", {\n            guid: s.guid\n          }, s.getPreData()).then(function (t) {\n            if (t.meta && (s.total_pages = t.meta.pagination.total_pages), 0 < t.data.length) {\n              s.pagination = t.meta.pagination;\n              var e = [];\n              t.data.map(function (t) {\n                t.guid = s.guid, e.push(u.GroupMembersController.trasformJSONGroupMember(t));\n              }), n(e);\n            }\n\n            n([]);\n          }, function (t) {\n            e(new c.CometChatException(t.error));\n          });\n          n([]);\n        });\n      }, e.prototype.fetchNext = function () {\n        var s = this;\n        return new Promise(function (n, e) {\n          o.makeApiCall(s.isOutCastReq ? \"getBannedGroupMembers\" : \"getGroupMembers\", {\n            guid: s.guid\n          }, s.getNextData()).then(function (t) {\n            if (t.meta && (s.total_pages = t.meta.pagination.total_pages), 0 < t.data.length) {\n              s.pagination = t.meta.pagination;\n              var e = [];\n              t.data.map(function (t) {\n                t.guid = s.guid, e.push(u.GroupMembersController.trasformJSONGroupMember(t));\n              }), n(e);\n            } else n([]);\n          }, function (t) {\n            e(new c.CometChatException(t.error));\n          });\n        });\n      }, e.prototype.getNextData = function () {\n        var t = {};\n        if (t.per_page = this.limit, i.isFalsy(this.searchKeyword) || (t.search = this.searchKeyword), 1 == this.current_page) t.page = this.next_page, this.next_page++, this.current_page++;else {\n          if (this.next_page > this.total_pages) return t.page = this.next_page, t;\n          t.page = ++this.next_page;\n        }\n        return t;\n      }, e.prototype.getPreData = function () {\n        var t = {};\n        return t.per_page = this.limit, 0 <= this.next_page && 0 < this.next_page && (t.page = --this.next_page), t;\n      }, e.MAX_LIMIT = 2, e.DEFAULT_LIMIT = 1, e;\n    }();\n\n    e.GroupMembersRequest = l;\n\n    var d = function () {\n      function t(t) {\n        this.guid = t;\n      }\n\n      return t.prototype.setLimit = function (t) {\n        return this.limit = t, this;\n      }, t.prototype.setSearchKeyWord = function (t) {\n        return this.searchKeyword = t, this;\n      }, t.prototype.build = function () {\n        return new l(this);\n      }, t;\n    }(),\n        h = function (n) {\n      function t(t) {\n        var e = n.call(this, t) || this;\n        return e.isOutCastReq = !0, e;\n      }\n\n      return r(t, n), t.prototype.build = function () {\n        return new l(this);\n      }, t;\n    }(e.GroupMembersRequestBuilder = d);\n\n    e.GroupOutCastMembersRequestBuilder = h;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var s = n(34),\n        r = n(0),\n        o = n(1),\n        i = function () {\n      function t() {}\n\n      return t.trasformJSONGroupMember = function (e) {\n        var t;\n\n        try {\n          return t = new s.GroupMember(e[r.GroupMemersConstans.KEYS.UID]), Object.assign(t, e), t;\n        } catch (t) {\n          return o.Logger.error(\"GroupMembersController:trasformJSONGroupMember\", {\n            e: t,\n            groupMember: e\n          }), e;\n        }\n      }, t;\n    }();\n\n    e.GroupMembersController = i;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var o = n(4),\n        i = n(1),\n        s = n(6),\n        a = n(14),\n        c = n(3),\n        u = n(32),\n        l = n(0),\n        d = n(2),\n        r = function () {\n      function r(t) {\n        this.limit = r.DEFAULT_LIMIT, this.cursor = -1, this.total = -1, this.next_page = 1, this.last_page = -1, this.current_page = 1, this.total_pages = -1, this.hideBlockedUsers = !1, this.fetchingInProgress = !1, this.pagination = {\n          total: 0,\n          count: 0,\n          per_page: 0,\n          current_page: 0,\n          total_pages: 0,\n          links: []\n        }, this.store = s.LocalStorage.getInstance(), r.userStore = u.UserStore.getInstance(), i.isFalsy(t) || (this.limit = t.limit, i.isFalsy(t.searchKeyword) || (this.searchKeyword = t.searchKeyword), i.isFalsy(t.status) || (this.status = t.status), i.isFalsy(t.shouldHideBlockedUsers) || (this.hideBlockedUsers = t.shouldHideBlockedUsers), i.isFalsy(t.role) || (this.role = t.role));\n      }\n\n      return r.prototype.fetchPrevious = function () {\n        var s = this;\n        return this.fetchingInProgress = !0, new Promise(function (e, n) {\n          if (0 == s.next_page) e([]), s.fetchingInProgress = !1;else {\n            if (!s.fetchingInProgress) return o.makeApiCall(\"users\", {}, s.getPreData()).then(function (t) {\n              if (t.meta && (s.total_pages = t.meta.pagination.total_pages), 0 < t.data.length) {\n                s.pagination = t.meta.pagination;\n                var n = [];\n                t.data.map(function (t, e) {\n                  n.push(a.UsersController.trasformJSONUser(t));\n                }), r.userStore.storeUsers(n), e(n), s.fetchingInProgress = !1;\n              }\n\n              e([]), s.fetchingInProgress = !1;\n            }, function (t) {\n              n(new c.CometChatException(t.error)), s.fetchingInProgress = !1;\n            });\n            e([]);\n          }\n        });\n      }, r.prototype.fetchNext = function () {\n        var r = this;\n        return new Promise(function (s, e) {\n          r.fetchingInProgress ? (r.fetchingInProgress = !1, s([])) : (r.fetchingInProgress = !0, o.makeApiCall(\"users\", {}, r.getNextData()).then(function (t) {\n            if (t.meta && (r.total_pages = t.meta.pagination.total_pages), 0 < t.data.length) {\n              r.pagination = t.meta.pagination;\n              var e = [],\n                  n = [];\n              t.data.map(function (t) {\n                e.push(a.UsersController.trasformJSONUser(t)), n.push(i.format(l.XMPP.username_string, d.CometChat.getAppId(), t[l.UserConstants.UID]));\n              }), s(e);\n            } else s([]);\n          }, function (t) {\n            r.fetchingInProgress = !1, e(new c.CometChatException(t.error));\n          }));\n        });\n      }, r.prototype.getNextData = function () {\n        var t = {};\n        if (t.per_page = this.limit, i.isFalsy(this.searchKeyword) || (t.searchKey = this.searchKeyword), i.isFalsy(this.status) || (t.status = this.status), i.isFalsy(this.hideBlockedUsers) || (t.hideBlockedUsers = 1), i.isFalsy(this.role) || (t.role = this.role), 0 == this.current_page) t.page = this.next_page, this.next_page++, this.current_page++;else {\n          if (this.next_page > this.total_pages) return t.page = this.next_page, t;\n          t.page = ++this.next_page;\n        }\n        return t;\n      }, r.prototype.getPreData = function () {\n        var t = {};\n        return t.per_page = this.limit, 0 <= this.next_page && 0 < this.next_page && (t.page = --this.next_page), t;\n      }, r.MAX_LIMIT = 2, r.DEFAULT_LIMIT = 1, r.USER_STATUS = {\n        ONLINE: l.PresenceConstatnts.STATUS.ONLINE,\n        OFFLINE: l.PresenceConstatnts.STATUS.OFFLINE\n      }, r;\n    }();\n\n    e.UsersRequest = r;\n\n    var h = function () {\n      function t() {}\n\n      return t.prototype.setLimit = function (t) {\n        return this.limit = t, this;\n      }, t.prototype.setStatus = function (t) {\n        return this.status = t, this;\n      }, t.prototype.setSearchKeyWord = function (t) {\n        return this.searchKeyword = t, this;\n      }, t.prototype.hideBlockedUsers = function (t) {\n        return void 0 === t && (t = !0), this.shouldHideBlockedUsers = t, this;\n      }, t.prototype.setRole = function (t) {\n        return this.role = t, this;\n      }, t.prototype.build = function () {\n        return new r(this);\n      }, t;\n    }();\n\n    e.UsersRequestBuilder = h;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    var s = this && this.__awaiter || function (o, i, a, c) {\n      return new (a || (a = Promise))(function (t, e) {\n        function n(t) {\n          try {\n            r(c.next(t));\n          } catch (t) {\n            e(t);\n          }\n        }\n\n        function s(t) {\n          try {\n            r(c.throw(t));\n          } catch (t) {\n            e(t);\n          }\n        }\n\n        function r(e) {\n          e.done ? t(e.value) : new a(function (t) {\n            t(e.value);\n          }).then(n, s);\n        }\n\n        r((c = c.apply(o, i || [])).next());\n      });\n    },\n        i = this && this.__generator || function (n, s) {\n      var r,\n          o,\n          i,\n          t,\n          a = {\n        label: 0,\n        sent: function () {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return t = {\n        next: e(0),\n        throw: e(1),\n        return: e(2)\n      }, \"function\" == typeof Symbol && (t[Symbol.iterator] = function () {\n        return this;\n      }), t;\n\n      function e(e) {\n        return function (t) {\n          return function (e) {\n            if (r) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) try {\n              if (r = 1, o && (i = 2 & e[0] ? o.return : e[0] ? o.throw || ((i = o.return) && i.call(o), 0) : o.next) && !(i = i.call(o, e[1])).done) return i;\n\n              switch (o = 0, i && (e = [2 & e[0], i.value]), e[0]) {\n                case 0:\n                case 1:\n                  i = e;\n                  break;\n\n                case 4:\n                  return a.label++, {\n                    value: e[1],\n                    done: !1\n                  };\n\n                case 5:\n                  a.label++, o = e[1], e = [0];\n                  continue;\n\n                case 7:\n                  e = a.ops.pop(), a.trys.pop();\n                  continue;\n\n                default:\n                  if (!(i = 0 < (i = a.trys).length && i[i.length - 1]) && (6 === e[0] || 2 === e[0])) {\n                    a = 0;\n                    continue;\n                  }\n\n                  if (3 === e[0] && (!i || e[1] > i[0] && e[1] < i[3])) {\n                    a.label = e[1];\n                    break;\n                  }\n\n                  if (6 === e[0] && a.label < i[1]) {\n                    a.label = i[1], i = e;\n                    break;\n                  }\n\n                  if (i && a.label < i[2]) {\n                    a.label = i[2], a.ops.push(e);\n                    break;\n                  }\n\n                  i[2] && a.ops.pop(), a.trys.pop();\n                  continue;\n              }\n\n              e = s.call(n, a);\n            } catch (t) {\n              e = [6, t], o = 0;\n            } finally {\n              r = i = 0;\n            }\n\n            if (5 & e[0]) throw e[1];\n            return {\n              value: e[0] ? e[1] : void 0,\n              done: !0\n            };\n          }([e, t]);\n        };\n      }\n    };\n\n    e.__esModule = !0;\n\n    var a = n(3),\n        r = n(4),\n        c = n(9),\n        u = n(1),\n        o = n(17),\n        l = n(0),\n        d = n(33),\n        h = n(2),\n        p = n(8),\n        E = n(7),\n        f = n(20),\n        g = n(15),\n        _ = function () {\n      function t(t) {\n        this.limit = l.DEFAULT_VALUES.MSGS_LIMIT, this.timestamp = 0, this.id = l.DEFAULT_VALUES.DEFAULT_MSG_ID, this.messageStore = o.MessagesStore.getInstance(), this.endpointName = \"getUserMessages\", this.listId = \"\", this.totalPages = 0, this.unread = 0, this.undelivered = 0, this.inProgress = !1, this.hideMessagesFromBlockedUsers = !1, this.updatedAt = 0, this.onlyUpdates = 0, this.paginationMeta = {}, this.limit = t.limit, this.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.PER_PAGE] = this.limit, this.uid = t.uid, this.uid && (this.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.UID] = this.uid), this.guid = t.guid, this.timestamp = t.timestamp, this.timestamp && (this.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.SENT_AT] = this.timestamp), this.id = t.id, this.id != l.DEFAULT_VALUES.DEFAULT_MSG_ID && (this.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.ID] = this.id), t.HideMessagesFromBlockedUsers && (this.hideMessagesFromBlockedUsers = t.HideMessagesFromBlockedUsers, this.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.HIDE_MESSAGES_FROM_BLOCKED_USER] = 1), t.unread && (this.unread = 1, this.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.UNREAD] = this.unread), t.undelivered && (this.undelivered = 1, this.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.UNDELIVERED] = this.undelivered), t.searchKey && (this.searchKey = t.searchKey, this.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY] = this.searchKey), t.onlyUpdate && (this.onlyUpdates = t.onlyUpdate, this.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.ONLY_UPDATES] = this.onlyUpdates), t.updatedAt && (this.updatedAt = t.updatedAt, this.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.UPDATED_AT] = this.updatedAt);\n      }\n\n      return t.prototype.fetchNext = function () {\n        var t = this;\n        return new Promise(function (r, o) {\n          return s(t, void 0, void 0, function () {\n            var e, n, s;\n            return i(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  if (this.inProgress) return this.inProgress = !1, o(new a.CometChatException(d.MESSAGES_REQUEST_ERRORS.REQUEST_IN_PROGRESS_ERROR)), [2];\n\n                  if (this.inProgress = !0, this.onlyUpdates) {\n                    if (0 == this.updatedAt) return this.inProgress = !1, o(new a.CometChatException(d.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)), [2];\n                  } else if (0 == this.timestamp && 0 == this.id && 0 == this.updatedAt) return this.inProgress = !1, o(new a.CometChatException(d.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)), [2];\n\n                  this.affix = l.MessageConstatnts.PAGINATION.AFFIX.APPEND, this.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.AFFIX] = this.affix, this.currentMethod = l.MessageConstatnts.PAGINATION.AFFIX.APPEND, t.label = 1;\n\n                case 1:\n                  return t.trys.push([1, 4,, 5]), [4, this.makeAPICall()];\n\n                case 2:\n                  return e = t.sent(), [4, g.ExtensionController.hookOnMessageListIsFetched(e)];\n\n                case 3:\n                  return n = t.sent(), r(n), this.inProgress = !1, [3, 5];\n\n                case 4:\n                  return s = t.sent(), o(s), this.inProgress = !1, [3, 5];\n\n                case 5:\n                  return [2];\n              }\n            });\n          });\n        });\n      }, t.prototype.fetchPrevious = function () {\n        var t = this;\n        return new Promise(function (r, o) {\n          return s(t, void 0, void 0, function () {\n            var e, n, s;\n            return i(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  if (this.inProgress) return o(new a.CometChatException(d.MESSAGES_REQUEST_ERRORS.REQUEST_IN_PROGRESS_ERROR)), this.inProgress = !1, [2];\n                  if (this.inProgress = !0, this.onlyUpdates && 0 == this.updatedAt) return this.inProgress = !1, o(new a.CometChatException(d.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)), [2];\n                  this.affix = l.MessageConstatnts.PAGINATION.AFFIX.PREPEND, this.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.AFFIX] = this.affix, this.currentMethod = l.MessageConstatnts.PAGINATION.AFFIX.PREPEND, t.label = 1;\n\n                case 1:\n                  return t.trys.push([1, 4,, 5]), [4, this.makeAPICall()];\n\n                case 2:\n                  return e = t.sent(), [4, g.ExtensionController.hookOnMessageListIsFetched(e)];\n\n                case 3:\n                  return n = t.sent(), r(n), this.inProgress = !1, [3, 5];\n\n                case 4:\n                  return s = t.sent(), o(s), this.inProgress = !1, [3, 5];\n\n                case 5:\n                  return [2];\n              }\n            });\n          });\n        });\n      }, t.prototype.makeAPICall = function () {\n        var a = this;\n        return new Promise(function (e, n) {\n          if (a.createEndpoint(), a.totalPages) if (1 != a.totalPages) ;else if (a.lastAffix == a.affix) return void e([]);\n          r.makeApiCall(a.endpointName, {\n            listId: a.listId\n          }, a.paginationMeta).then(function (t) {\n            var n = [];\n            t[l.ResponseConstants.RESPONSE_KEYS.KEY_META][l.ResponseConstants.RESPONSE_KEYS.KEY_CURSOR].hasOwnProperty(l.MessageConstatnts.PAGINATION.KEYS.ID) && 0 == a.id && (a.id = t.meta.cursor[l.MessageConstatnts.PAGINATION.KEYS.ID]), t[l.ResponseConstants.RESPONSE_KEYS.KEY_META][l.ResponseConstants.RESPONSE_KEYS.KEY_CURSOR].hasOwnProperty(l.MessageConstatnts.PAGINATION.KEYS.SENT_AT) && 0 == a.timestamp && (a.timestamp = t.meta.cursor[l.MessageConstatnts.PAGINATION.KEYS.SENT_AT]), t.meta.pagination.hasOwnProperty(\"total_pages\") && (a.totalPages = t.meta.pagination.total_pages), t.meta.cursor.hasOwnProperty(\"affix\") && (a.lastAffix = t.meta.cursor.affix), t.data[0] ? (0 < a.id && (a.id = t.data[0].id), 0 < a.timestamp && (a.timestamp = t.data[0].sentAt), t.data.map(function (e) {\n              if (e.sender.toLowerCase() != E.getUidFromJid(p.XMPPConnectionHelper.getInstance().connection.jid).toLowerCase()) {\n                var s = e.id,\n                    r = e.receiverType,\n                    o = l.MessageConstatnts.XMPP_KEYS.TYPE_USER,\n                    i = e.sender;\n                r == l.MessageConstatnts.RECEIVER_TYPE.USER ? u.isFalsy(e.deliveredAt) && (o = l.MessageConstatnts.XMPP_KEYS.TYPE_USER, E.getJidFromUid(i).then(function (t) {\n                  var e = $msg({\n                    to: t,\n                    type: o,\n                    from: p.XMPPConnectionHelper.getInstance().connection.jid,\n                    id: p.XMPPConnectionHelper.getInstance().connection.getUniqueId()\n                  }),\n                      n = Strophe.xmlElement(\"delivered\", {\n                    receiverId: i,\n                    type: r,\n                    xmlns: \"urn:xmpp:receipts\",\n                    id: \"[\" + h.CometChat.getAppId() + \"]\" + s\n                  });\n                  e.tree().appendChild(n), p.XMPPConnectionHelper.getInstance().connection.send(e);\n                })) : u.isFalsy(e.myReceipt) && (o = l.MessageConstatnts.XMPP_KEYS.TYPE_USER, i = e.sender, E.getJidFromUid(i).then(function (t) {\n                  var e = $msg({\n                    to: t,\n                    type: o,\n                    from: p.XMPPConnectionHelper.getInstance().connection.jid,\n                    id: p.XMPPConnectionHelper.getInstance().connection.getUniqueId()\n                  }),\n                      n = Strophe.xmlElement(\"delivered\", {\n                    receiverId: i,\n                    type: r,\n                    xmlns: \"urn:xmpp:receipts\",\n                    id: \"[\" + h.CometChat.getAppId() + \"]\" + s\n                  });\n                  e.tree().appendChild(n), p.XMPPConnectionHelper.getInstance().connection.send(e);\n                }));\n              }\n\n              f.MessageListnerMaping.getInstance().get(\"all\").then(function (t) {\n                e.id > t && f.MessageListnerMaping.getInstance().set(\"all\", e.id);\n              }, function (t) {\n                f.MessageListnerMaping.getInstance().set(\"all\", e.id);\n              }), a.affix == l.MessageConstatnts.PAGINATION.AFFIX.APPEND ? (a.id < e.id && 0 < a.id && (a.id = e.id), a.timestamp < e.sentAt && 0 < a.timestamp && (a.timestamp = e.sentAt), a.updatedAt < e.updatedAt && 0 < a.updatedAt && (a.updatedAt = e.updatedAt)) : (a.id > e.id && (a.id = e.id), a.timestamp > e.sentAt && (a.timestamp = e.sentAt), a.updatedAt > e.updatedAt && (a.updatedAt = e.updatedAt)), a.id && (a.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.ID] = a.id), a.timestamp && (a.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.SENT_AT] = a.timestamp), a.updatedAt && (a.paginationMeta[l.MessageConstatnts.PAGINATION.KEYS.UPDATED_AT] = a.updatedAt), n.push(c.MessageController.trasformJSONMessge(e));\n            })) : n = [], e(n);\n          }, function (t) {\n            n(t);\n          });\n        });\n      }, t.prototype.createEndpoint = function () {\n        (u.isFalsy(this.guid) || u.isFalsy(this.uid)) && u.isFalsy(this.guid) ? (u.isFalsy(this.uid) ? this.endpointName = \"getMessages\" : this.endpointName = \"getUserMessages\", this.listId = this.uid) : (this.endpointName = \"getGroupMessages\", this.listId = this.guid);\n      }, t.prototype.makeData = function () {\n        var t = {};\n        t[l.MessageConstatnts.PAGINATION.KEYS.PER_PAGE] = this.limit, t[l.MessageConstatnts.PAGINATION.KEYS.AFFIX] = this.affix, (u.isFalsy(this.guid) || u.isFalsy(this.uid)) && u.isFalsy(this.guid) && u.isFalsy(this.uid);\n      }, t.prototype.getFilteredPreviousDataByReceiverId = function (e) {\n        return s(this, void 0, void 0, function () {\n          var n,\n              s = this;\n          return i(this, function (t) {\n            switch (t.label) {\n              case 0:\n                switch (n = [], e) {\n                  case \"user\":\n                    return [3, 1];\n\n                  case \"group\":\n                    return [3, 3];\n\n                  case \"both\":\n                    return [3, 5];\n                }\n\n                return [3, 7];\n\n              case 1:\n                return [4, o.MessagesStore.getInstance().get(this.uid).then(function (e) {\n                  Object.keys(e).filter(function (t) {\n                    return parseInt(t) > s.id;\n                  }).map(function (t) {\n                    n = n.concat([e[t]]);\n                  });\n                })];\n\n              case 2:\n                return t.sent(), [3, 9];\n\n              case 3:\n                return [4, o.MessagesStore.getInstance().get(this.guid).then(function (e) {\n                  Object.keys(e).filter(function (t) {\n                    return parseInt(t) > s.id;\n                  }).map(function (t) {\n                    n = n.concat([e[t]]);\n                  });\n                })];\n\n              case 4:\n                t.sent(), t.label = 5;\n\n              case 5:\n                return [4, o.MessagesStore.getInstance().get(this.guid).then(function (e) {\n                  Object.keys(e).filter(function (t) {\n                    return parseInt(t) > s.id;\n                  }).filter(function (t) {\n                    return e[t].sender.uid == s.uid;\n                  }).map(function (t) {\n                    n = n.concat([e[t]]);\n                  });\n                })];\n\n              case 6:\n                return t.sent(), [3, 9];\n\n              case 7:\n                return [4, o.MessagesStore.getInstance().getAllMessages().then(function (e) {\n                  Object.keys(e).filter(function (t) {\n                    return parseInt(t) > s.id;\n                  }).map(function (t) {\n                    n = n.concat([e[t]]);\n                  });\n                })];\n\n              case 8:\n                return t.sent(), [3, 9];\n\n              case 9:\n                return [2, n];\n            }\n          });\n        });\n      }, t.prototype.getFilteredNextDataByReceiverId = function (e) {\n        return s(this, void 0, void 0, function () {\n          var n,\n              s = this;\n          return i(this, function (t) {\n            switch (t.label) {\n              case 0:\n                switch (n = [], e) {\n                  case \"user\":\n                    return [3, 1];\n\n                  case \"group\":\n                    return [3, 3];\n\n                  case \"both\":\n                    return [3, 5];\n                }\n\n                return [3, 7];\n\n              case 1:\n                return [4, o.MessagesStore.getInstance().get(this.uid).then(function (e) {\n                  Object.keys(e).filter(function (t) {\n                    return parseInt(t) > s.id;\n                  }).map(function (t) {\n                    n = n.concat([e[t]]);\n                  });\n                })];\n\n              case 2:\n                return t.sent(), [3, 9];\n\n              case 3:\n                return [4, o.MessagesStore.getInstance().get(this.guid).then(function (e) {\n                  Object.keys(e).filter(function (t) {\n                    return parseInt(t) > s.id;\n                  }).map(function (t) {\n                    n = n.concat([e[t]]);\n                  });\n                })];\n\n              case 4:\n                t.sent(), t.label = 5;\n\n              case 5:\n                return [4, o.MessagesStore.getInstance().get(this.guid).then(function (e) {\n                  Object.keys(e).filter(function (t) {\n                    return parseInt(t) > s.id;\n                  }).filter(function (t) {\n                    return e[t].sender.uid == s.uid;\n                  }).map(function (t) {\n                    n = n.concat([e[t]]);\n                  });\n                })];\n\n              case 6:\n                return t.sent(), [3, 9];\n\n              case 7:\n                return [4, o.MessagesStore.getInstance().getAllMessages().then(function (e) {\n                  Object.keys(e).filter(function (t) {\n                    return parseInt(t) > s.id;\n                  }).map(function (t) {\n                    n = n.concat([e[t]]);\n                  });\n                })];\n\n              case 8:\n                return t.sent(), [3, 9];\n\n              case 9:\n                return [2, n];\n            }\n          });\n        });\n      }, t;\n    }();\n\n    e.DefaultMessagesRequest = _;\n\n    var m = function () {\n      function t() {\n        this.limit = l.DEFAULT_VALUES.MSGS_LIMIT, this.maxLimit = l.DEFAULT_VALUES.MSGS_MAX_LIMIT, this.timestamp = 0, this.id = l.DEFAULT_VALUES.DEFAULT_MSG_ID, this.unread = !1, this.undelivered = !1, this.HideMessagesFromBlockedUsers = !1, this.onlyUpdate = 0;\n      }\n\n      return t.prototype.setLimit = function (t) {\n        return void 0 === t && (t = l.DEFAULT_VALUES.MSGS_LIMIT), t > this.maxLimit && (t = this.maxLimit), this.limit = t, this;\n      }, t.prototype.setGUID = function (t) {\n        return this.guid = t, this;\n      }, t.prototype.setUID = function (t) {\n        return this.uid = t, this;\n      }, t.prototype.setTimestamp = function (t) {\n        return void 0 === t && (t = u.getCurrentTime()), this.timestamp = t, this;\n      }, t.prototype.setMessageId = function (t) {\n        return void 0 === t && (t = l.DEFAULT_VALUES.DEFAULT_MSG_ID), this.id = t, this;\n      }, t.prototype.setUnread = function (t) {\n        return void 0 === t && (t = !1), this.unread = t, this;\n      }, t.prototype.setUndelivered = function (t) {\n        return void 0 === t && (t = !1), this.undelivered = t, this;\n      }, t.prototype.hideMessagesFromBlockedUsers = function (t) {\n        return void 0 === t && (t = !1), this.HideMessagesFromBlockedUsers = t, this;\n      }, t.prototype.setSearchKey = function (t) {\n        return this.searchKey = t, this;\n      }, t.prototype.setUpdatedAfter = function (t) {\n        return this.updatedAt = t, this;\n      }, t.prototype.updatesOnly = function (t) {\n        return t && (this.onlyUpdate = 1), this;\n      }, t.prototype.build = function () {\n        return new _(this);\n      }, t;\n    }();\n\n    e.DefaultMessagesRequestBuilder = m;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n    n(15);\n\n    var s = function (t) {};\n\n    e.CometChatExtension = s;\n  }, function (t, e, n) {\n    \"use strict\";\n\n    e.__esModule = !0;\n\n    var r = n(4),\n        s = n(1),\n        o = n(14),\n        i = n(3),\n        a = n(0),\n        c = function () {\n      function e(t) {\n        this.limit = e.DEFAULT_LIMIT, this.next_page = 1, this.current_page = 1, this.total_pages = -1, this.direction = a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BOTH, this.fetchingInProgress = !1, this.pagination = {\n          total: 0,\n          count: 0,\n          per_page: 0,\n          current_page: 0,\n          total_pages: 0,\n          links: []\n        }, s.isFalsy(t) || (this.limit = t.limit, s.isFalsy(t.searchKeyword) || (this.searchKeyword = t.searchKeyword), s.isFalsy(t.direction) || (this.direction = t.direction));\n      }\n\n      return e.prototype.fetchPrevious = function () {\n        var s = this;\n        return this.fetchingInProgress = !0, new Promise(function (e, n) {\n          if (0 == s.next_page) e([]), s.fetchingInProgress = !1;else {\n            if (!s.fetchingInProgress) return r.makeApiCall(\"blockedUsersList\", {}, s.getPreData()).then(function (t) {\n              if (t.meta && (s.total_pages = t.meta.pagination.total_pages), 0 < t.data.length) {\n                s.pagination = t.meta.pagination;\n                var n = [];\n                t.data.map(function (t, e) {\n                  n.push(o.UsersController.trasformJSONUser(t));\n                }), e(n), s.fetchingInProgress = !1;\n              }\n\n              e([]), s.fetchingInProgress = !1;\n            }, function (t) {\n              n(new i.CometChatException(t.error)), s.fetchingInProgress = !1;\n            });\n            e([]);\n          }\n        });\n      }, e.prototype.fetchNext = function () {\n        var s = this;\n        return new Promise(function (n, e) {\n          s.fetchingInProgress ? (s.fetchingInProgress = !1, n([])) : (s.fetchingInProgress = !0, r.makeApiCall(\"blockedUsersList\", {}, s.getNextData()).then(function (t) {\n            if (t.meta && (s.total_pages = t.meta.pagination.total_pages), 0 < t.data.length) {\n              s.pagination = t.meta.pagination;\n              var e = [];\n              t.data.map(function (t) {\n                e.push(o.UsersController.trasformJSONUser(t));\n              }), n(e);\n            } else n([]);\n          }, function (t) {\n            s.fetchingInProgress = !1, e(new i.CometChatException(t.error));\n          }));\n        });\n      }, e.prototype.getNextData = function () {\n        var t = {};\n        if (s.isFalsy(this.direction) || (t.direction = this.direction), s.isFalsy(this.searchKeyword) || (t.search = this.searchKeyword), t.per_page = this.limit, 0 == this.current_page) t.page = this.next_page, this.next_page++, this.current_page++;else {\n          if (this.next_page > this.total_pages) return t.page = this.next_page, t;\n          t.page = ++this.next_page;\n        }\n        return t;\n      }, e.prototype.getPreData = function () {\n        var t = {};\n        return t.per_page = this.limit, 0 <= this.next_page && 0 < this.next_page && (t.page = --this.next_page), t;\n      }, e.MAX_LIMIT = 2, e.DEFAULT_LIMIT = 1, e.directions = a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS, e;\n    }();\n\n    e.BlockedUsersRequest = c;\n\n    var u = function () {\n      function t() {\n        this.direction = a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BOTH;\n      }\n\n      return t.prototype.setLimit = function (t) {\n        return this.limit = t, this;\n      }, t.prototype.setSearchKeyWord = function (t) {\n        return this.searchKeyword = t, this;\n      }, t.prototype.setDirection = function (t) {\n        return this.direction = t, this;\n      }, t.prototype.blockedByMe = function () {\n        return this.direction = a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BLOCKED_BY_ME, this;\n      }, t.prototype.hasBlockedMe = function () {\n        return this.direction = a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.HAS_BLOCKED_ME, this;\n      }, t.prototype.build = function () {\n        return new c(this);\n      }, t;\n    }();\n\n    e.BlockedUsersRequestBuilder = u;\n  }, function (t, e, n) {\n    function s(t) {\n      this.options = t || {\n        locator: {}\n      };\n    }\n\n    function u() {\n      this.cdata = !1;\n    }\n\n    function l(t, e) {\n      e.lineNumber = t.lineNumber, e.columnNumber = t.columnNumber;\n    }\n\n    function d(t) {\n      if (t) return \"\\n@\" + (t.systemId || \"\") + \"#[line:\" + t.lineNumber + \",col:\" + t.columnNumber + \"]\";\n    }\n\n    function r(t, e, n) {\n      return \"string\" == typeof t ? t.substr(e, n) : t.length >= e + n || e ? new java.lang.String(t, e, n) + \"\" : t;\n    }\n\n    function h(t, e) {\n      t.currentElement ? t.currentElement.appendChild(e) : t.doc.appendChild(e);\n    }\n\n    s.prototype.parseFromString = function (t, e) {\n      var n = this.options,\n          s = new p(),\n          r = n.domBuilder || new u(),\n          o = n.errorHandler,\n          i = n.locator,\n          a = n.xmlns || {},\n          c = {\n        lt: \"<\",\n        gt: \">\",\n        amp: \"&\",\n        quot: '\"',\n        apos: \"'\"\n      };\n      return i && r.setDocumentLocator(i), s.errorHandler = function (s, t, r) {\n        if (!s) {\n          if (t instanceof u) return t;\n          s = t;\n        }\n\n        var o = {},\n            i = s instanceof Function;\n\n        function e(e) {\n          var n = s[e];\n          !n && i && (n = 2 == s.length ? function (t) {\n            s(e, t);\n          } : s), o[e] = n && function (t) {\n            n(\"[xmldom \" + e + \"]\\t\" + t + d(r));\n          } || function () {};\n        }\n\n        return r = r || {}, e(\"warning\"), e(\"error\"), e(\"fatalError\"), o;\n      }(o, r, i), s.domBuilder = n.domBuilder || r, /\\/x?html?$/.test(e) && (c.nbsp = \" \", c.copy = \"©\", a[\"\"] = \"http://www.w3.org/1999/xhtml\"), a.xml = a.xml || \"http://www.w3.org/XML/1998/namespace\", t ? s.parse(t, a, c) : s.errorHandler.error(\"invalid doc source\"), r.doc;\n    }, u.prototype = {\n      startDocument: function () {\n        this.doc = new o().createDocument(null, null, null), this.locator && (this.doc.documentURI = this.locator.systemId);\n      },\n      startElement: function (t, e, n, s) {\n        var r = this.doc,\n            o = r.createElementNS(t, n || e),\n            i = s.length;\n        h(this, o), this.currentElement = o, this.locator && l(this.locator, o);\n\n        for (var a = 0; a < i; a++) {\n          t = s.getURI(a);\n          var c = s.getValue(a),\n              u = (n = s.getQName(a), r.createAttributeNS(t, n));\n          this.locator && l(s.getLocator(a), u), u.value = u.nodeValue = c, o.setAttributeNode(u);\n        }\n      },\n      endElement: function (t, e, n) {\n        var s = this.currentElement;\n        s.tagName;\n        this.currentElement = s.parentNode;\n      },\n      startPrefixMapping: function (t, e) {},\n      endPrefixMapping: function (t) {},\n      processingInstruction: function (t, e) {\n        var n = this.doc.createProcessingInstruction(t, e);\n        this.locator && l(this.locator, n), h(this, n);\n      },\n      ignorableWhitespace: function (t, e, n) {},\n      characters: function (t, e, n) {\n        if (t = r.apply(this, arguments)) {\n          if (this.cdata) var s = this.doc.createCDATASection(t);else s = this.doc.createTextNode(t);\n          this.currentElement ? this.currentElement.appendChild(s) : /^\\s*$/.test(t) && this.doc.appendChild(s), this.locator && l(this.locator, s);\n        }\n      },\n      skippedEntity: function (t) {},\n      endDocument: function () {\n        this.doc.normalize();\n      },\n      setDocumentLocator: function (t) {\n        (this.locator = t) && (t.lineNumber = 0);\n      },\n      comment: function (t, e, n) {\n        t = r.apply(this, arguments);\n        var s = this.doc.createComment(t);\n        this.locator && l(this.locator, s), h(this, s);\n      },\n      startCDATA: function () {\n        this.cdata = !0;\n      },\n      endCDATA: function () {\n        this.cdata = !1;\n      },\n      startDTD: function (t, e, n) {\n        var s = this.doc.implementation;\n\n        if (s && s.createDocumentType) {\n          var r = s.createDocumentType(t, e, n);\n          this.locator && l(this.locator, r), h(this, r);\n        }\n      },\n      warning: function (t) {},\n      error: function (t) {},\n      fatalError: function (t) {\n        throw t;\n      }\n    }, \"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g, function (t) {\n      u.prototype[t] = function () {\n        return null;\n      };\n    });\n    var p = n(53).XMLReader,\n        o = e.DOMImplementation = n(35).DOMImplementation;\n    e.XMLSerializer = n(35).XMLSerializer, e.DOMParser = s;\n  }, function (t, e) {\n    var n = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/,\n        s = new RegExp(\"[\\\\-\\\\.0-9\" + n.source.slice(1, -1) + \"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\"),\n        r = new RegExp(\"^\" + n.source + s.source + \"*(?::\" + n.source + s.source + \"*)?$\"),\n        d = 0,\n        h = 1,\n        p = 2,\n        E = 3,\n        f = 4,\n        g = 5,\n        _ = 6,\n        m = 7;\n\n    function o() {}\n\n    function b(t, e) {\n      return e.lineNumber = t.lineNumber, e.columnNumber = t.columnNumber, e;\n    }\n\n    function L(t, e, n, s, r, o) {\n      for (var i, a = ++e, c = d;;) {\n        var u = t.charAt(a);\n\n        switch (u) {\n          case \"=\":\n            if (c === h) i = t.slice(e, a), c = E;else {\n              if (c !== p) throw new Error(\"attribute equal must after attrName\");\n              c = E;\n            }\n            break;\n\n          case \"'\":\n          case '\"':\n            if (c === E || c === h) {\n              if (c === h && (o.warning('attribute value must after \"=\"'), i = t.slice(e, a)), e = a + 1, !(0 < (a = t.indexOf(u, e)))) throw new Error(\"attribute value no end '\" + u + \"' match\");\n              l = t.slice(e, a).replace(/&#?\\w+;/g, r), n.add(i, l, e - 1), c = g;\n            } else {\n              if (c != f) throw new Error('attribute value must after \"=\"');\n              l = t.slice(e, a).replace(/&#?\\w+;/g, r), n.add(i, l, e), o.warning('attribute \"' + i + '\" missed start quot(' + u + \")!!\"), e = a + 1, c = g;\n            }\n\n            break;\n\n          case \"/\":\n            switch (c) {\n              case d:\n                n.setTagName(t.slice(e, a));\n\n              case g:\n              case _:\n              case m:\n                c = m, n.closed = !0;\n\n              case f:\n              case h:\n              case p:\n                break;\n\n              default:\n                throw new Error(\"attribute invalid close char('/')\");\n            }\n\n            break;\n\n          case \"\":\n            return o.error(\"unexpected end of input\"), c == d && n.setTagName(t.slice(e, a)), a;\n\n          case \">\":\n            switch (c) {\n              case d:\n                n.setTagName(t.slice(e, a));\n\n              case g:\n              case _:\n              case m:\n                break;\n\n              case f:\n              case h:\n                \"/\" === (l = t.slice(e, a)).slice(-1) && (n.closed = !0, l = l.slice(0, -1));\n\n              case p:\n                c === p && (l = i), c == f ? (o.warning('attribute \"' + l + '\" missed quot(\")!!'), n.add(i, l.replace(/&#?\\w+;/g, r), e)) : (\"http://www.w3.org/1999/xhtml\" === s[\"\"] && l.match(/^(?:disabled|checked|selected)$/i) || o.warning('attribute \"' + l + '\" missed value!! \"' + l + '\" instead!!'), n.add(l, l, e));\n                break;\n\n              case E:\n                throw new Error(\"attribute value missed!!\");\n            }\n\n            return a;\n\n          case \"\":\n            u = \" \";\n\n          default:\n            if (u <= \" \") switch (c) {\n              case d:\n                n.setTagName(t.slice(e, a)), c = _;\n                break;\n\n              case h:\n                i = t.slice(e, a), c = p;\n                break;\n\n              case f:\n                var l = t.slice(e, a).replace(/&#?\\w+;/g, r);\n                o.warning('attribute \"' + l + '\" missed quot(\")!!'), n.add(i, l, e);\n\n              case g:\n                c = _;\n            } else switch (c) {\n              case p:\n                n.tagName;\n                \"http://www.w3.org/1999/xhtml\" === s[\"\"] && i.match(/^(?:disabled|checked|selected)$/i) || o.warning('attribute \"' + i + '\" missed value!! \"' + i + '\" instead2!!'), n.add(i, i, e), e = a, c = h;\n                break;\n\n              case g:\n                o.warning('attribute space is required\"' + i + '\"!!');\n\n              case _:\n                c = h, e = a;\n                break;\n\n              case E:\n                c = f, e = a;\n                break;\n\n              case m:\n                throw new Error(\"elements closed character '/' and '>' must be connected to\");\n            }\n        }\n\n        a++;\n      }\n    }\n\n    function D(t, e, n) {\n      for (var s = t.tagName, r = null, o = t.length; o--;) {\n        var i = t[o],\n            a = i.qName,\n            c = i.value;\n        if (0 < (h = a.indexOf(\":\"))) var u = i.prefix = a.slice(0, h),\n            l = a.slice(h + 1),\n            d = \"xmlns\" === u && l;else u = null, d = \"xmlns\" === (l = a) && \"\";\n        i.localName = l, !1 !== d && (null == r && (r = {}, C(n, n = {})), n[d] = r[d] = c, i.uri = \"http://www.w3.org/2000/xmlns/\", e.startPrefixMapping(d, c));\n      }\n\n      for (o = t.length; o--;) {\n        (u = (i = t[o]).prefix) && (\"xml\" === u && (i.uri = \"http://www.w3.org/XML/1998/namespace\"), \"xmlns\" !== u && (i.uri = n[u || \"\"]));\n      }\n\n      var h = s.indexOf(\":\");\n      l = t.localName = 0 < h ? (u = t.prefix = s.slice(0, h), s.slice(h + 1)) : (u = null, s);\n      var p = t.uri = n[u || \"\"];\n      if (e.startElement(p, l, s, t), !t.closed) return t.currentNSMap = n, t.localNSMap = r, !0;\n      if (e.endElement(p, l, s), r) for (u in r) e.endPrefixMapping(u);\n    }\n\n    function w(t, e, n, s, r) {\n      if (/^(?:script|textarea)$/i.test(n)) {\n        var o = t.indexOf(\"</\" + n + \">\", e),\n            i = t.substring(e + 1, o);\n        if (/[&<]/.test(i)) return /^script$/i.test(n) || (i = i.replace(/&#?\\w+;/g, s)), r.characters(i, 0, i.length), o;\n      }\n\n      return e + 1;\n    }\n\n    function U(t, e, n, s) {\n      var r = s[n];\n      return null == r && ((r = t.lastIndexOf(\"</\" + n + \">\")) < e && (r = t.lastIndexOf(\"</\" + n)), s[n] = r), r < e;\n    }\n\n    function C(t, e) {\n      for (var n in t) e[n] = t[n];\n    }\n\n    function Y(t, e, n, s) {\n      switch (t.charAt(e + 2)) {\n        case \"-\":\n          return \"-\" !== t.charAt(e + 3) ? -1 : e < (r = t.indexOf(\"--\\x3e\", e + 4)) ? (n.comment(t, e + 4, r - e - 4), r + 3) : (s.error(\"Unclosed comment\"), -1);\n\n        default:\n          if (\"CDATA[\" == t.substr(e + 3, 6)) {\n            var r = t.indexOf(\"]]>\", e + 9);\n            return n.startCDATA(), n.characters(t, e + 9, r - e - 9), n.endCDATA(), r + 3;\n          }\n\n          var o = function (t, e) {\n            var n,\n                s = [],\n                r = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n            r.lastIndex = e, r.exec(t);\n\n            for (; n = r.exec(t);) if (s.push(n), n[1]) return s;\n          }(t, e),\n              i = o.length;\n\n          if (1 < i && /!doctype/i.test(o[0][0])) {\n            var a = o[1][0],\n                c = 3 < i && /^public$/i.test(o[2][0]) && o[3][0],\n                u = 4 < i && o[4][0],\n                l = o[i - 1];\n            return n.startDTD(a, c && c.replace(/^(['\"])(.*?)\\1$/, \"$2\"), u && u.replace(/^(['\"])(.*?)\\1$/, \"$2\")), n.endDTD(), l.index + l[0].length;\n          }\n\n      }\n\n      return -1;\n    }\n\n    function x(t, e, n) {\n      var s = t.indexOf(\"?>\", e);\n\n      if (s) {\n        var r = t.substring(e, s).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\n        if (r) {\n          r[0].length;\n          return n.processingInstruction(r[1], r[2]), s + 2;\n        }\n\n        return -1;\n      }\n\n      return -1;\n    }\n\n    function G(t) {}\n\n    function i(t, e) {\n      return t.__proto__ = e, t;\n    }\n\n    o.prototype = {\n      parse: function (t, e, n) {\n        var s = this.domBuilder;\n        s.startDocument(), C(e, e = {}), function (n, t, s, r, o) {\n          function i(t) {\n            var e = t.slice(1, -1);\n            return e in s ? s[e] : \"#\" === e.charAt(0) ? function (t) {\n              {\n                if (65535 < t) {\n                  var e = 55296 + ((t -= 65536) >> 10),\n                      n = 56320 + (1023 & t);\n                  return String.fromCharCode(e, n);\n                }\n\n                return String.fromCharCode(t);\n              }\n            }(parseInt(e.substr(1).replace(\"x\", \"0x\"))) : (o.error(\"entity not found:\" + t), t);\n          }\n\n          function e(t) {\n            if (E < t) {\n              var e = n.substring(E, t).replace(/&#?\\w+;/g, i);\n              d && a(E), r.characters(e, 0, t - E), E = t;\n            }\n          }\n\n          function a(t, e) {\n            for (; u <= t && (e = l.exec(n));) c = e.index, u = c + e[0].length, d.lineNumber++;\n\n            d.columnNumber = t - c + 1;\n          }\n\n          var c = 0,\n              u = 0,\n              l = /.*(?:\\r\\n?|\\n)|.*$/g,\n              d = r.locator,\n              h = [{\n            currentNSMap: t\n          }],\n              p = {},\n              E = 0;\n\n          for (;;) {\n            try {\n              var f = n.indexOf(\"<\", E);\n\n              if (f < 0) {\n                if (!n.substr(E).match(/^\\s*$/)) {\n                  var g = r.doc,\n                      _ = g.createTextNode(n.substr(E));\n\n                  g.appendChild(_), r.currentElement = _;\n                }\n\n                return;\n              }\n\n              switch (E < f && e(f), n.charAt(f + 1)) {\n                case \"/\":\n                  var m = n.indexOf(\">\", f + 3),\n                      C = n.substring(f + 2, m),\n                      T = h.pop();\n                  m < 0 ? (C = n.substring(f + 2).replace(/[\\s<].*/, \"\"), o.error(\"end tag name: \" + C + \" is not complete:\" + T.tagName), m = f + 1 + C.length) : C.match(/\\s</) && (C = C.replace(/[\\s<].*/, \"\"), o.error(\"end tag name: \" + C + \" maybe not complete\"), m = f + 1 + C.length);\n                  var S = T.localNSMap,\n                      A = T.tagName == C,\n                      I = A || T.tagName && T.tagName.toLowerCase() == C.toLowerCase();\n\n                  if (I) {\n                    if (r.endElement(T.uri, T.localName, C), S) for (var y in S) r.endPrefixMapping(y);\n                    A || o.fatalError(\"end tag name: \" + C + \" is not match the current start tagName:\" + T.tagName);\n                  } else h.push(T);\n\n                  m++;\n                  break;\n\n                case \"?\":\n                  d && a(f), m = x(n, f, r);\n                  break;\n\n                case \"!\":\n                  d && a(f), m = Y(n, f, r, o);\n                  break;\n\n                default:\n                  d && a(f);\n                  var N = new G(),\n                      R = h[h.length - 1].currentNSMap,\n                      m = L(n, f, N, R, i, o),\n                      v = N.length;\n\n                  if (!N.closed && U(n, m, N.tagName, p) && (N.closed = !0, s.nbsp || o.warning(\"unclosed xml attribute\")), d && v) {\n                    for (var M = b(d, {}), O = 0; O < v; O++) {\n                      var P = N[O];\n                      a(P.offset), P.locator = b(d, {});\n                    }\n\n                    r.locator = M, D(N, r, R) && h.push(N), r.locator = d;\n                  } else D(N, r, R) && h.push(N);\n\n                  \"http://www.w3.org/1999/xhtml\" !== N.uri || N.closed ? m++ : m = w(n, m, N.tagName, i, r);\n              }\n            } catch (t) {\n              o.error(\"element parse error: \" + t), m = -1;\n            }\n\n            E < m ? E = m : e(Math.max(f, E) + 1);\n          }\n        }(t, e, n, s, this.errorHandler), s.endDocument();\n      }\n    }, G.prototype = {\n      setTagName: function (t) {\n        if (!r.test(t)) throw new Error(\"invalid tagName:\" + t);\n        this.tagName = t;\n      },\n      add: function (t, e, n) {\n        if (!r.test(t)) throw new Error(\"invalid attribute:\" + t);\n        this[this.length++] = {\n          qName: t,\n          value: e,\n          offset: n\n        };\n      },\n      length: 0,\n      getLocalName: function (t) {\n        return this[t].localName;\n      },\n      getLocator: function (t) {\n        return this[t].locator;\n      },\n      getQName: function (t) {\n        return this[t].qName;\n      },\n      getURI: function (t) {\n        return this[t].uri;\n      },\n      getValue: function (t) {\n        return this[t].value;\n      }\n    }, i({}, i.prototype) instanceof i || (i = function (t, e) {\n      function n() {}\n\n      for (e in n.prototype = e, n = new n(), t) n[e] = t[e];\n\n      return n;\n    }), e.XMLReader = o;\n  }]);\n});","map":null,"metadata":{},"sourceType":"script"}